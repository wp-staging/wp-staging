{"version":3,"file":"wpstg-backup.min.js","sources":["../../src/modules/wpstg-hover-intent.js","../../src/modules/wpstg-detect-memory-exhaust.js","../../src/wpstg.js","../../../node_modules/regenerator-runtime/runtime.js","../../src/modules/wpstg-dom-utils.js","../../src/modules/wpstg-polyfill.js","../../src/modules/wpstg-contact-us.js","../../src/backup/modules/wpstg-backup.js","../../src/backup/modules/wpstg-re-auth.js","../../src/backup/modules/wpstg-auth-check.js","../../src/backup/modules/wpstg-backup-create.js","../../src/backup/modules/wpstg-backup-delete.js","../../src/backup/modules/wpstg-backup-edit.js","../../src/backup/modules/wpstg-backup-restore.js","../../src/backup/modules/wpstg-backup-upload-url.js","../../src/backup/modules/wpstg-backup-upload.js","../../src/backup/modules/wpstg-backup-download.js","../../src/backup/modules/wpstg-backup-manage-schedules.js"],"sourcesContent":["'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","/**\n * Detect memory exhaustion and show warning.\n */\nexport default class WpstgDetectMemoryExhaust {\n  constructor(\n      wpstgObject = wpstg,\n  ) {\n    this.wpstgObject = wpstgObject;\n  }\n\n  async sendRequest(requestType) {\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: 'wpstg--detect-memory-exhaust',\n          requestType: requestType,\n          accessToken: this.wpstgObject.accessToken,\n          nonce: this.wpstgObject.nonce,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      const data = await response.json();\n\n      if ('undefined' !== typeof (data.status) && data.status && data.error) {\n        return data;\n      }\n\n      console.warn(data.message);\n    } catch (error) {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    }\n\n    return false;\n  }\n}\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\nimport WpstgDetectMemoryExhaust from './modules/wpstg-detect-memory-exhaust.js';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    retry: {\n      currentDelay: 0,\n      count: 0,\n      max: wpstg.maxFailedRetries,\n      retryOnErrors: [401, 403, 404, 429, 502, 503, 504],\n      performingRequest: false,\n      incrementRetry: function(incrementRatio = 1.25) {\n        WPStagingCommon.retry.performingRequest = true;\n        if (WPStagingCommon.retry.currentDelay === 0) {\n          // start with a delay of 1sec\n          WPStagingCommon.retry.currentDelay = 1000;\n          WPStagingCommon.retry.count = 1;\n        }\n\n        WPStagingCommon.retry.currentDelay += (500 * WPStagingCommon.retry.count * incrementRatio);\n        WPStagingCommon.retry.count++;\n      },\n      canRetry: function() {\n        return WPStagingCommon.retry.count < WPStagingCommon.retry.max;\n      },\n      reset: function() {\n        WPStagingCommon.retry.currentDelay = 0;\n        WPStagingCommon.retry.count = 0;\n        WPStagingCommon.retry.performingRequest = false;\n      },\n    },\n    memoryExhaustArticleLink: 'https://wp-staging.com/docs/php-fatal-error-allowed-memory-size-of-134217728-bytes-exhausted/',\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    async checkMemoryExhaustion(requestType) {\n      const detectMemoryExhaust = new WpstgDetectMemoryExhaust();\n      const response = await detectMemoryExhaust.sendRequest(requestType);\n\n      if (!response) {\n        return false;\n      }\n\n      return response;\n\n      response.messages = [{\n        'type': 'critical',\n        'date': result.data['time'],\n        'message': result.message + '. Read <a target=\"_blank\" href=\"' + WPStagingCommon.memoryExhaustArticleLink + '\">this article</a> for solving this issue. Please contact WP Staging support if you need further assistance.',\n      }];\n\n      WPStagingBackup.processResponse(response);\n\n      return true;\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        if (!event.target.closest('.wpstg--tooltiptext a')) {\n          target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n        }\n      });\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup wpstg-centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If an attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overwrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    sanitizeEventAttribute: function(string) {\n      if ( string === null ) {\n        return string;\n      }\n      return string.toString().replace(/(\"|')\\s+on([a-z]+)\\s?=\\s?([a-z0-9\\)\\(\\\"\\';]+)/i, '');\n    },\n    htmlEntityQuotesDecode: function(string) {\n      if ( string === null ) {\n        return string;\n      }\n      return string.toString().replace(/\\\\\"/g, '&quot;').replace(/\\\\'/g, '&#039');\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      // If retry request no need to show Error;\n      if (WPStagingCommon.retry.performingRequest) {\n        return;\n      }\n\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = wpstg.maxFailedRetries;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method;\n    var method = delegate.iterator[methodName];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method, or a missing .next mehtod, always terminate the\n      // yield* loop.\n      context.delegate = null;\n\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n      if (methodName !== \"return\") {\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a '\" + methodName + \"' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import {closest} from './wpstg-polyfill';\nimport WPStagingCommon from '../wpstg.js';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getPreviousSibling(element, selector) {\n  let sibling = element.previousElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.previousElementSibling;\n  }\n}\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n\n/**\n * Toggle target element set in data-wpstg-target of the given element\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleToggleElement(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.classList.toggle(hiddenClass);\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-copy to element(s) in data-wpstg-target\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyPaste(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target') || !element.getAttribute('data-wpstg-copy')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  navigator.clipboard.writeText(element.getAttribute('data-wpstg-copy'));\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.value = element.getAttribute('data-wpstg-copy', '');\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-source to clipboard\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyToClipboard(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-source')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const el = container.querySelector(element.getAttribute('data-wpstg-source'));\n\n  if (el) {\n    navigator.clipboard.writeText(el.value);\n  }\n}\n\n/**\n * A confirmation modal\n *\n * @param title\n * @param html\n * @param confirmText\n * @param confirmButtonClass\n * @return Promise\n */\nexport function confirmModal(title, html, confirmText, confirmButtonClass) {\n  return WPStagingCommon.getSwalModal(false, {\n    container: 'wpstg-swal-push-container',\n    confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n  }).fire({\n    title: title,\n    icon: 'warning',\n    html: html,\n    width: '750px',\n    focusConfirm: false,\n    confirmButtonText: confirmText,\n    showCancelButton: true,\n  });\n};\n/**\n * @param className\n * @param callback\n */\nexport function setClickHandlerByClass(className, callback) {\n  const elements = document.querySelectorAll(`.${className}`);\n\n  if (elements.length) {\n    elements.forEach((element) => {\n      element.addEventListener('click', callback);\n    });\n  } else {\n    console.warn(`No elements found with class: ${className}`);\n  }\n};\n\n/**\n * Initializes a module using a MutationObserver.\n *\n * @param {string} selector - The CSS selector for the target element.\n * @param {function} ModuleConstructor - The constructor function of the module to be initialized.\n *\n * @todo Unused, consider removing this in the future\n */\nexport function initializeModuleWithObserver(selector, ModuleConstructor) {\n  const observer = new MutationObserver(function(mutationsList, observer) {\n    const targetElement = document.querySelector(selector);\n    if (targetElement !== null) {\n      new ModuleConstructor();\n      observer.disconnect();\n    }\n  });\n  observer.observe(document.documentElement, {childList: true, subtree: true});\n};\n\n/**\n * Checks if a modal specified by the given selector is available in the DOM.\n * If the modal is available, it waits for a delay and then initializes the Module.\n * If the modal is not yet available, it recursively checks after a brief interval.\n *\n * @param {string} selector - CSS selector for the element to search for.\n * @param {function} Module - Constructor function to create an instance of the module.\n *\n * @todo Unused, consider removing this in the future\n */\nexport function initializeModuleDelayedIfElementIsAvailable(selector, Module) {\n  const element = document.querySelector(selector);\n  if (element) {\n    setTimeout(() => {\n      new Module();\n    }, 1000);\n  } else {\n    setTimeout(() => initializeModuleDelayedIfElementIsAvailable(selector, Module), 10);\n  }\n};\n\n/**\n * Hides elements in the DOM that match the given selector by setting their display style to 'none'.\n *\n * @param {string} selector - CSS selector for the elements to be hidden.\n * @return {void}\n */\nexport function hide(selector) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach((element) => {\n    element.style.display = 'none';\n  });\n};\n\n/**\n * Displays elements in the DOM that match the given selector by setting their display style to 'block'.\n *\n * @param {string} selector - CSS selector for the elements to be displayed.\n * @return {void}\n */\nexport function show(selector) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach((element) => {\n    element.style.display = 'block';\n  });\n}\n\n/**\n *\n * @param e\n */\nexport function copyTextToClipboard(e) {\n  const dataCopyContent = e.target.getAttribute('data-copy-content');\n  if (dataCopyContent) {\n    navigator.clipboard.writeText(dataCopyContent).then(() => {\n      notify('success', 'Copied to clipboard');\n    }).catch((err) => {\n      notify('error', 'Unable to copy to clipboard', err);\n    });\n  }\n}\n\n/**\n * Displays a notification message\n *\n * @param type\n * @param message\n */\nexport function notify(type, message) {\n  const notyf = new Notyf({\n    duration: 6000,\n    position: {\n      x: 'center',\n      y: 'bottom',\n    },\n    dismissible: true,\n    types: [\n      {\n        type: 'warning',\n        background: 'orange',\n        icon: true,\n      },\n    ],\n  });\n  notyf.open({type: type, message: message});\n}\n\n/**\n * Checks if an element is null, undefined, or empty (for strings or arrays)\n *\n * @param element\n * @return {boolean}\n */\nexport function checkIfElementNullOrUndefinedOrEmpty(element) {\n  if (element === null || element === undefined) {\n    return true;\n  }\n\n  if (typeof element === 'string' && element.trim() === '') {\n    return true;\n  }\n\n  if (Array.isArray(element) && element.length === 0) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * @param visibility\n * @return {void}\n */\nexport function showLoadingBar(visibility = 'visible') {\n  const loader = document.querySelectorAll('.wpstg-loading-bar-container');\n  loader.forEach(function(element) {\n    if (element) {\n      element.style.visibility = visibility;\n    }\n  });\n}\n\nexport function isElementChecked(selector) {\n  const element = qs(selector);\n  if (!element) {\n    return false;\n  }\n\n  return element.checked;\n}\n\nexport function getInputValue(selector, defaultValue = '') {\n  const element = qs(selector);\n  if (!element) {\n    return defaultValue;\n  }\n\n  return element.value;\n}\n\n/**\n * @param visibility\n * @return {void}\n */\nexport function loadingPlaceholder(visibility = 'visible') {\n  const loader = all('.wpstg-loading-placeholder-container');\n  loader.forEach(function(element) {\n    if (element) {\n      element.style.visibility = visibility;\n    }\n  });\n\n  setTimeout(() => {\n    loader.forEach(function(element) {\n      if (element && element.style.visibility === 'visible') {\n        element.style.visibility = 'hidden';\n      }\n    });\n\n    hideLoadingBar();\n  }, 5000);\n\n  const container = qs('.wpstg--tab--contents');\n\n  if (visibility === 'visible') {\n    showLoadingBar();\n    container && (container.style.overflow = 'hidden');\n    return;\n  }\n\n  hideLoadingBar();\n  container && (container.style.overflow = 'unset');\n}\n\n/**\n * @return {string|null}\n */\nexport function getActivePage() {\n  return (window.location.search.match(/[\\?&]page=([^&]*)/) || [])[1] || null;\n}\n\n/**\n *\n * @param container\n * @return {Promise<void>}\n */\nexport async function setLoadingPlaceholder(container = '') {\n  if (container === '') {\n    container = qs('.wpstg--tab--contents');\n  }\n\n  if (container === null) {\n    return;\n  }\n\n  const loadingPlaceholderContainer = container.querySelector('.wpstg-loading-placeholder-container');\n  const loadingWrapper = loadingPlaceholderContainer.querySelector('.wpstg-dom-loading-wrapper');\n\n  if (!loadingWrapper) {\n    return;\n  }\n\n  if (loadingWrapper.offsetHeight !== container.offsetHeight) {\n    const loadingLines = loadingWrapper.querySelectorAll('.wpstg-loading-lines-bar');\n    loadingLines.forEach((line) => line.remove());\n\n    loadingWrapper.querySelector('.wpstg-loading-line')?.remove();\n    loadingWrapper.querySelector('.wpstg-loading-last-line-bar')?.remove();\n    do {\n      loadingWrapper.insertAdjacentHTML('beforeend', '<div class=\"wpstg-loading-lines-bar\"></div>');\n      await new Promise((resolve) => setTimeout(resolve, 0));\n    } while (loadingWrapper.offsetHeight <= (container.offsetHeight -40));\n\n    loadingWrapper.firstElementChild?.classList.add('wpstg-loading-first-line-bar');\n    loadingWrapper.lastElementChild?.classList.add('wpstg-loading-last-line-bar');\n  }\n\n  await new Promise((resolve) => setTimeout(resolve, 0));\n}\n\n/**\n * Normalizes a URL path and appends a slug to it, ensuring there are no consecutive slashes.\n * @param path {string}\n * @param slug {string}\n * @return {string}\n */\nexport function normalizeAndAppendSlug(path, slug) {\n  let normalizedPath = path.replace(/\\/+$/g, '');\n  normalizedPath += '/' + slug + '/';\n  return normalizedPath.replace(/\\/+/g, '/');\n}\n\n/**\n * @param selector\n */\nexport function beautifyBackupCards(selector = '') {\n  if (selector === null || !selector) {\n    selector = document;\n  }\n\n  const corruptedBackups = selector.querySelector('.wpstg-corrupted-backup');\n  if (corruptedBackups) {\n    const backupCards = document.querySelectorAll('.wpstg-clone.wpstg-backup');\n    backupCards.forEach((container) => {\n      container.classList.add('wpstg-corrupted-backups-min-height');\n    });\n  }\n\n  const multiPartBackups = selector.querySelector('.invalid-backup-tabs');\n  const automatedBackups = selector.querySelector('.wpstg-automated-backup');\n  if ((automatedBackups || multiPartBackups) && !corruptedBackups) {\n    const backupCards = document.querySelectorAll('.wpstg-clone.wpstg-backup');\n    backupCards.forEach((container) => {\n      container.classList.add('wpstg-multiparts-backups-min-height');\n    });\n  }\n}\n\n/**\n * @param filePath\n * @return {string}\n */\nexport function extractFileName(filePath = '') {\n  if (filePath === '') {\n    return '';\n  }\n\n  return filePath.split('/').pop();\n}\n\n/**\n * @return {void}\n */\nexport function hideLoadingBar() {\n  const loader = document.querySelectorAll('.wpstg-loading-bar-container');\n  loader.forEach(function(element) {\n    if (element) {\n      element.style.visibility = 'hidden';\n    }\n  });\n}\n","/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Handle toggle of contact us modal\n */\n\nexport default class WpstgContactUs {\n  constructor(modalType = 'contact-us', wpstgObject = wpstg) {\n    this.wpstgObject = wpstgObject;\n    this.characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    this.currentDate = new Date();\n    this.modalType = modalType;\n    this.init();\n  }\n\n  init() {\n    this.contactUsModal = '#wpstg-' + this.modalType + '-modal';\n    this.askInTheForumForm = this.contactUsModal + ' #wpstg-' + this.modalType + '-report-issue-form';\n    this.contactUsSuccessPopup = this.contactUsModal + ' #wpstg-' + this.modalType + '-success-form';\n    this.contactUsLoader = this.contactUsModal + ' #wpstg-' + this.modalType + '-report-issue-loader';\n    this.contactUsSupport = this.contactUsModal + ' #wpstg-' + this.modalType + '-support-forum';\n    this.contactUsButton = document.querySelector('#wpstg-' + this.modalType + '-button');\n    this.contactUsButtonBackupTab = document.querySelector('#wpstg--tab--backup  #wpstg-' + this.modalType + '-button');\n    this.reportIssueButton = document.querySelector('#wpstg-contact-us-report-issue');\n    this.successForm = document.querySelector(this.contactUsModal + ' #wpstg-' + this.modalType + '-success-form');\n    this.contactUsReportIssueBtn = document.querySelector(this.contactUsModal + ' #wpstg-' + this.modalType + '-report-issue-btn');\n    this.contactUsCloseButton = document.querySelector(this.contactUsModal + ' #wpstg-modal-close');\n    this.contactUsSuccessPopupClose = document.querySelector(this.contactUsModal + ' #wpstg-' + this.modalType + '-success-modal-close');\n    this.debugCodeCopyButton = document.querySelector(this.contactUsModal + ' #wpstg-' + this.modalType + '-debug-code-copy');\n    this.contactUsResponse = document.querySelector(this.contactUsModal + ' #wpstg-' + this.modalType + '-debug-response');\n    this.contactUsDebugCodeField = document.querySelector(this.contactUsModal + ' #wpstg-' + this.modalType + '-debug-code');\n    this.isDebugWindowOpened = false;\n    this.addEvents();\n    this.notyf = new Notyf({\n      duration: 6000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: true,\n        },\n      ],\n    });\n  }\n\n  addEvents() {\n    document.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        dom.hide(this.contactUsModal);\n        dom.hide(this.askInTheForumForm);\n        dom.hide(this.contactUsSuccessPopup);\n        dom.hide(this.contactUsSupport);\n        this.isDebugWindowOpened = false;\n      }\n    });\n    if (this.contactUsButton !== null) {\n      this.contactUsButton.addEventListener('click', () => {\n        dom.show(this.contactUsModal);\n      });\n    }\n    if (this.contactUsButtonBackupTab !== null) {\n      this.contactUsButtonBackupTab.addEventListener('click', () => {\n        dom.show(this.contactUsModal);\n      });\n    }\n    if (this.reportIssueButton !== null) {\n      this.reportIssueButton.addEventListener('click', () => {\n        if (this.isDebugWindowOpened) {\n          dom.hide(this.askInTheForumForm);\n        } else {\n          dom.show(this.askInTheForumForm);\n        }\n\n        this.isDebugWindowOpened = !this.isDebugWindowOpened;\n      });\n    }\n\n    if (this.contactUsReportIssueBtn !== null) {\n      this.contactUsReportIssueBtn.addEventListener('click', () => {\n        this.sendDebugInfo();\n      });\n    }\n\n    if (this.contactUsSuccessPopupClose !== null) {\n      this.contactUsSuccessPopupClose.addEventListener('click', () => {\n        dom.hide(this.contactUsSuccessPopup);\n      });\n    }\n    if (this.contactUsCloseButton !== null) {\n      this.contactUsCloseButton.addEventListener('click', () => {\n        dom.hide(this.contactUsModal);\n        dom.hide(this.contactUsSupport);\n        dom.hide(this.askInTheForumForm);\n        this.isDebugWindowOpened = false;\n      });\n    }\n    if (this.debugCodeCopyButton !== null) {\n      this.debugCodeCopyButton.addEventListener('click', () => {\n        this.copyDebugCode();\n        this.notyf.success('Debug code copied to clipboard');\n      });\n    }\n  }\n\n  copyDebugCode() {\n    this.contactUsDebugCodeField.select();\n    this.contactUsDebugCodeField.setSelectionRange(0, 99999);\n    navigator.clipboard.writeText(this.contactUsDebugCodeField.value);\n  }\n\n  generateDebugCode(length) {\n    let result = '';\n    for ( let i = 0; i < length; i++ ) {\n      result += this.characters.charAt(Math.floor(Math.random() * this.characters.length));\n    }\n\n    return 'wpstg-' + result + '-' + this.currentDate.getHours() + this.currentDate.getMinutes() + this.currentDate.getSeconds();\n  }\n\n  sendDebugInfo() {\n    dom.show(this.contactUsLoader);\n    this.contactUsReportIssueBtn.disabled = true;\n    const debugCode = this.generateDebugCode(8);\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg_send_debug_log_report',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        debugCode: debugCode,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.contactUsReportIssueBtn.disabled = false;\n      if (response.ok) {\n        return response.json();\n      }\n    }).then((data) => {\n      if (data.response && data.response.sent === true) {\n        this.contactUsDebugCodeField.value = debugCode;\n        dom.show(this.contactUsSuccessPopup);\n        window.debugCode = debugCode;\n      } else {\n        this.contactUsDebugCodeField.value = (window.debugCode === undefined) ? debugCode: window.debugCode;\n        dom.show(this.contactUsSuccessPopup);\n      }\n\n      dom.hide(this.contactUsLoader);\n    }).catch((error) => {\n      dom.hide(this.contactUsLoader);\n      dom.show(this.contactUsSupport);\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import WPStagingCommon from '../../wpstg.js';\nimport * as dom from '../../modules/wpstg-dom-utils.js';\nimport 'regenerator-runtime/runtime';\nimport WpstgContactUs from '../../modules/wpstg-contact-us';\nimport wpstgAuthCheck from './wpstg-auth-check';\n\nlet WPStagingBackup;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    const backupTab = dom.qs('#wpstg--tab--backup');\n    backupTab.style.minHeight = backupTab.offsetHeight;\n    WPStagingBackup.fetchListing();\n  });\n\n  window.addEventListener('backupListingFinished', function() {\n    fetch(`${ajaxurl}?action=wpstg--backups--restore--file-list&_=${Math.random()}&withTemplate=true`, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg--backups--restore--file-list',\n        accessToken: wpstg.accessToken,\n        nonce: wpstg.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then(WPStagingCommon.handleFetchErrors)\n        .then((res) => res.json())\n        .then((res) => {\n          if (res.success !== undefined && res.success === false) {\n            WPStagingCommon.showError('Error: ' + res.data);\n          }\n\n          const ul = document.querySelector('.wpstg-backup-list ul');\n          if (ul) {\n            ul.innerHTML = res;\n            dom.beautifyBackupCards(ul);\n          }\n\n          dom.loadingPlaceholder('hidden');\n          const tabBackup = document.getElementById('wpstg--tab--backup');\n          tabBackup.style.minHeight = 'max-content';\n          dom.addEvent(dom.qs('#wpstg-existing-backups'), 'click', '.wpstg-tab-header', (el, event) => {\n            const target = dom.qs(el.getAttribute('data-id'));\n            el.classList.toggle('expand');\n            if (el.classList.contains('expand')) {\n              el.querySelector('span').classList.add('wpstg-rotate-90');\n              dom.slideDown(target);\n            } else {\n              el.querySelector('span').classList.remove('wpstg-rotate-90');\n              dom.slideUp(target);\n            }\n            event.stopImmediatePropagation();\n          });\n        })\n        .catch((e) => WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.'))\n    ;\n  });\n\n  window.addEventListener('finishedProcess', function() {\n    window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n  });\n\n  window.addEventListener('finishedProcessWithError', function() {\n    window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n  });\n\n  WPStagingBackup = {\n    performingCancelRequest: false,\n    isBackupSlowerThanUsual: false,\n    isBackupSpeedModalDisplayed: false,\n    isCancelled: false,\n    isFinished: false,\n    processInfo: {\n      title: null,\n      interval: null,\n      isOnlySchedule: false,\n    },\n    modal: {\n      create: {\n        html: null,\n        confirmBtnTxt: null,\n        hasBackupSchedule: null,\n      },\n      process: {\n        html: null,\n        cancelBtnTxt: null,\n        modal: null,\n      },\n      download: {\n        html: null,\n        data: {\n          indexFile: null,\n          files: [],\n        },\n      },\n      upload: {\n        html: null,\n        confirmBtnTxt: null,\n        retryCount: 0,\n        data: {\n          file: null, // file path\n        },\n      },\n      restore: {\n        html: null,\n        btnTxtNext: null,\n        btnTxtConfirm: null,\n        btnTxtCancel: null,\n        searchReplaceForm: null,\n        containerIntroduction: null,\n        data: {\n          file: null, // file path\n          fileObject: null, // JS \"File\" class instance\n          search: [],\n          replace: [],\n          backupMetadata: {},\n        },\n        baseDirectory: null,\n      },\n    },\n    messages: {\n      WARNING: 'warning',\n      ERROR: 'error',\n      INFO: 'info',\n      DEBUG: 'debug',\n      CRITICAL: 'critical',\n      data: {\n        all: [],\n        info: [],\n        error: [],\n        critical: [],\n        warning: [],\n        debug: [],\n      },\n      shouldWarn() {\n        return WPStagingBackup.messages.data.error.length > 0 ||\n        WPStagingBackup.messages.data.critical.length > 0\n        ;\n      },\n      countByType(type = WPStagingBackup.messages.ERROR) {\n        return WPStagingBackup.messages.data[type].length;\n      },\n      addMessage(message) {\n        if (Array.isArray(message)) {\n          message.forEach((item) => {\n            WPStagingBackup.messages.addMessage(item);\n          });\n          return;\n        }\n\n        if (!message.type) {\n          return;\n        }\n\n        const type = message.type.toLowerCase() || 'info';\n        if (!WPStagingBackup.messages.data[type]) {\n          WPStagingBackup.messages.data[type] = [];\n        }\n        WPStagingBackup.messages.data.all.push(message); // TODO RPoC\n        WPStagingBackup.messages.data[type].push(message);\n      },\n      reset() {\n        WPStagingBackup.messages.data = {\n          all: [],\n          info: [],\n          error: [],\n          critical: [],\n          warning: [],\n          debug: [],\n        };\n      },\n    },\n    timer: {\n      totalSeconds: 0,\n      interval: null,\n      start() {\n        if (null !== WPStagingBackup.timer.interval) {\n          return;\n        }\n\n        const prettify = (seconds) => {\n          // If potentially anything can exceed 24h execution time than that;\n          // const _seconds = parseInt(seconds, 10)\n          // const hours = Math.floor(_seconds / 3600)\n          // const minutes = Math.floor(_seconds / 60) % 60\n          // seconds = _seconds % 60\n          //\n          // return [hours, minutes, seconds]\n          //   .map(v => v < 10 ? '0' + v : v)\n          //   .filter((v,i) => v !== '00' || i > 0)\n          //   .join(':')\n          // ;\n          // Are we sure we won't create anything that exceeds 24h execution time? If not then this;\n          return `${(new Date(seconds * 1000)).toISOString().substr(11, 8)}`;\n        };\n\n        WPStagingBackup.timer.interval = setInterval(() => {\n          $('.wpstg-backup-process-elapsed-time').text(prettify(WPStagingBackup.timer.totalSeconds));\n          if (wpstgAuthCheck.isAuthenticated) {\n            WPStagingBackup.timer.totalSeconds++;\n          }\n        }, 1000);\n      },\n      stop() {\n        WPStagingBackup.timer.totalSeconds = 0;\n        if (WPStagingBackup.timer.interval) {\n          clearInterval(WPStagingBackup.timer.interval);\n          WPStagingBackup.timer.interval = null;\n        }\n      },\n    },\n    status: {\n      hasResponse: null,\n      reTryAfter: 5000,\n    },\n    fetchListing(isResetErrors = true) {\n      WPStagingCommon.isLoading(true);\n\n      $('#backup-messages').text('');\n\n      if (isResetErrors) {\n        WPStagingCommon.resetErrors();\n      }\n\n      return fetch(`${ajaxurl}?action=wpstg--backups--listing&_=${Math.random()}`, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: 'wpstg--backups--listing',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      }).then(WPStagingCommon.handleFetchErrors)\n          .then((res) => res.json())\n          .then((res) => {\n            const backupTab = dom.qs('#wpstg--tab--backup');\n            backupTab.style.minHeight = backupTab.offsetHeight + 'px';\n            $('#wpstg--tab--backup').empty();\n            WPStagingBackup.modal.create.html = null;\n            WPStagingCommon.cache.get('#wpstg--tab--backup').html(res);\n            if (res.success !== undefined && res.success === false) {\n              WPStagingCommon.showError('Error: ' + res.data);\n              dom.loadingPlaceholder('hidden');\n              return;\n            }\n\n            WPStagingCommon.showAjaxFatalError(res, '', 'Submit an error report.');\n            WPStagingCommon.isLoading(false);\n            window.dispatchEvent(new Event('backupListingFinished'));\n            $('#local-backup-title').show();\n            $('#cloud-backup-title').hide();\n            return res;\n          })\n          .catch((e) => WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.'))\n      ;\n    },\n    /**\n     * The cancel & cleanup process when we cancel a backup job or when a backup job is stopped due to an error.\n     *\n     * @param {Object} extraParams Extra parameter to send during cancel process\n     * @param {CallableFunction} callback This function is called when a backup cancel/cleanup process response is returned. This callback is always called even if cancel process fails.\n     */\n    cancel(extraParams = {}, callback = null) {\n      WPStagingBackup.timer.stop();\n      clearInterval(WPStagingBackup.processInfo.interval);\n      WPStagingBackup.isCancelled = true;\n      WPStagingBackup.processInfo.interval = null;\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      WPStagingCommon.closeSwalModal();\n\n      WPStagingCommon.getSwalModal(true).fire({\n        title: 'Cancelling & Cleaning up',\n        text: 'This modal will close automatically when done...',\n        icon: 'info',\n        showConfirmButton: false,\n        showCloseButton: false,\n        showLoaderOnConfirm: false,\n        showCancelButton: false,\n        allowEscapeKey: false,\n        allowOutsideClick: false,\n        width: 650,\n        onRender() {\n          WPStagingBackup.sendCancelRequest(\n              Object.assign({\n                isInit: 'yes',\n              }, extraParams),\n              callback,\n          );\n        },\n      });\n    },\n    sendCancelRequest(extraParams, callback) {\n      if (WPStagingBackup.performingCancelRequest) {\n        return;\n      }\n\n      WPStagingBackup.performingCancelRequest = true;\n\n      WPStagingCommon.ajax(\n          Object.assign({\n            action: 'wpstg--backups--cancel',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            jobIdBeingCancelled: WPStagingCommon.getJobId(),\n          }, extraParams),\n          function(response) {\n            WPStagingBackup.performingCancelRequest = false;\n            WPStagingBackup.isCancelled = false;\n            WPStagingCommon.showAjaxFatalError(response, '', 'Submit an error report.');\n\n            if (!response.hasOwnProperty('isRunning')) {\n              WPStagingCommon.showErrorModal('Cancel process did not finish gracefully. Some temporary files might not have been cleaned up.');\n            }\n\n            if (response.isRunning === false) {\n              wpstgAuthCheck.stop();\n              WPStagingCommon.closeSwalModal();\n              if (callback !== undefined && callback !== null) {\n                callback();\n              }\n            } else {\n              extraParams.isInit = 'no';\n              WPStagingBackup.sendCancelRequest(extraParams, callback);\n            }\n          },\n          'json',\n          false,\n          1, // Don't retry upon failure\n          1.25,\n          function(xhr, textStatus, errorThrown) {\n            WPStagingBackup.performingCancelRequest = false;\n\n            // Todo: Why do we need this?\n            WPStagingCommon.continueErrorHandle = false;\n\n            // Resource is busy, wait for request to finish and try again\n            if (xhr.status === 423) {\n              setTimeout(function() {\n                WPStagingBackup.sendCancelRequest(extraParams, callback);\n              }, 1000);\n              return;\n            }\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal('Cancel process did not finish gracefully. Some temporary files might not have been cleaned up.');\n            if (callback !== undefined && callback !== null) {\n              callback();\n            }\n          },\n      );\n    },\n    /**\n   * If process.execute exists, process.data and process.onResponse is not used\n   * process = { data: {}, onResponse: (resp) => {}, onAfterClose: () => {}, execute: () => {}, isShowCancelButton: bool }\n   * @param {object} process\n   */\n    process(process) {\n      if (typeof process.execute !== 'function' && (!process.data || !process.onResponse)) {\n        WPStagingCommon.closeSwalModal();\n        WPStagingCommon.showError('process.data and / or process.onResponse is not set');\n        return;\n      }\n\n      // TODO move to backend and get the contents as xhr response?\n      if (!WPStagingBackup.modal.process.html || !WPStagingBackup.modal.process.cancelBtnTxt) {\n        const $modal = $('#wpstg-backup-process-modal');\n        const html = $modal.html();\n        const btnTxt = $modal.attr('data-cancelButtonText');\n        WPStagingBackup.modal.process.html = html || null;\n        WPStagingBackup.modal.process.cancelBtnTxt = btnTxt || null;\n        $modal.remove();\n      }\n\n      $('body')\n          .off('click', '.wpstg-backup-process-logs-button')\n          .on('click', '.wpstg-backup-process-logs-button', function(e) {\n            WPStagingBackup.showLogsInModal(e);\n          })\n          .off('click', '.wpstg-backup-success-logs-button')\n          .on('click', '.wpstg-backup-success-logs-button', function(e) {\n            WPStagingBackup.showLogsInModal(e, 'success');\n          })\n      ;\n\n      process.isShowCancelButton = false !== process.isShowCancelButton;\n\n      WPStagingBackup.modal.process.modal = WPStagingCommon.getSwalModal(true, {\n        content: 'wpstg--process--content',\n      }).fire({\n        html: WPStagingBackup.modal.process.html,\n        cancelButtonText: WPStagingBackup.modal.process.cancelBtnTxt,\n        showCancelButton: process.isShowCancelButton,\n        showConfirmButton: false,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        width: 600,\n        onRender: () => {\n          const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n          const btnCancel = _btnCancel.cloneNode(true);\n          _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n\n          btnCancel.addEventListener('click', function(e) {\n            if (confirm('Do you want to cancel the process?')) {\n              WPStagingBackup.cancel();\n            }\n          });\n\n          if (typeof process.execute === 'function') {\n            process.execute();\n            return;\n          }\n\n          if (!process.data || !process.onResponse) {\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showError('process.data and / or process.onResponse is not set');\n            return;\n          }\n\n          WPStagingCommon.ajax(process.data, process.onResponse);\n        },\n        onAfterClose: () => typeof process.onAfterClose === 'function' && process.onAfterClose(),\n      });\n    },\n    processResponse(response) {\n      if (response === null) {\n        WPStagingCommon.closeSwalModal();\n        WPStagingCommon.showError('Invalid Response; null');\n        throw new Error(`Invalid Response; ${response}`);\n      }\n\n      const $container = $(WPStagingCommon.getSwalContainer());\n      const title = () => {\n        if ((response.title || response.statusTitle)) {\n          $container.find('.wpstg-backup-process-title').text(response.title || response.statusTitle);\n        }\n      };\n\n      const percentage = () => {\n        if (response.percentage) {\n          $container.find('.wpstg-backup-process-percent').text(response.percentage);\n        }\n      };\n\n      title();\n      percentage();\n      WPStagingBackup.addResponseMessagesToLog(response);\n\n      if (response.jobId) {\n        WPStagingCommon.setJobId(response.jobId);\n      }\n\n      if (response.isRunning === false && response.job_done === true) {\n        if (response.job === 'Backup') {\n          WPStagingBackup.calculateBackupSpeedIndex(response.backupSize, WPStagingBackup.timer.totalSeconds);\n        }\n\n        WPStagingBackup.timer.stop();\n        WPStagingBackup.isCancelled = true;\n        // For other classes that require 'status'\n        response.status = !response.isRunning;\n        window.dispatchEvent(new CustomEvent('finishedProcess', {\n          response: response,\n        }));\n      }\n    },\n    logsModal() {\n      WPStagingCommon.getSwalModal(true, {\n        popup: 'wpstg-swal-popup wpstg-centered-modal',\n      }).fire({\n        html: `<div class=\"wpstg--modal--error--logs\" style=\"display:block\"></div><div class=\"wpstg-backup-process-logs\" style=\"display:block\"></div>`,\n        width: '97%',\n        onRender: () => {\n          const $container = $(WPStagingCommon.getSwalContainer());\n          $container[0].style['z-index'] = 9999;\n\n          const $logsContainer = $container.find('.wpstg-backup-process-logs');\n          const $errorContainer = $container.find('.wpstg--modal--error--logs');\n          const $translations = $('#wpstg--js--translations');\n          const messages = WPStagingBackup.messages;\n          const title = $translations.attr('data-modal-logs-title')\n              .replace('{critical}', messages.countByType(messages.CRITICAL))\n              .replace('{errors}', messages.countByType(messages.ERROR))\n              .replace('{warnings}', messages.countByType(messages.WARNING))\n        ;\n\n          $errorContainer.before(`<h3>${title}</h3>`);\n          const warnings = [\n            WPStagingBackup.messages.CRITICAL,\n            WPStagingBackup.messages.ERROR,\n            WPStagingBackup.messages.WARNING,\n          ];\n\n          if (!WPStagingBackup.messages.shouldWarn()) {\n            $errorContainer.hide();\n          }\n\n          for (const message of messages.data.all) {\n            const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n\n            if (warnings.includes(message.type)) {\n              $errorContainer.append(\n                  `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n              );\n            }\n            $logsContainer.append(\n                `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n            );\n          }\n        },\n        onOpen: (container) => {\n          const $logsContainer = $(container).find('.wpstg-backup-process-logs');\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        },\n      });\n    },\n    addResponseMessagesToLog(response) {\n      if (!response.messages) {\n        return;\n      }\n\n      const $logsContainer = $('.wpstg-backup-process-logs');\n      const stoppingTypes = [\n        WPStagingBackup.messages.ERROR,\n        WPStagingBackup.messages.CRITICAL,\n      ];\n      const appendMessage = (message) => {\n        if (Array.isArray(message)) {\n          for (const item of message) {\n            appendMessage(item);\n          }\n\n          return;\n        }\n\n        if (!message.type) {\n          return;\n        }\n\n        const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n        $logsContainer.append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`);\n\n        if (stoppingTypes.includes(message.type.toLowerCase())) {\n          window.dispatchEvent(new CustomEvent('finishedProcessWithError', {\n            detail: {\n              error: message.message,\n            },\n          }));\n          // Callback approach is used to make sure the logs modal is always shown,\n          // after the completion of cancel/cleanup process.\n          // Makes sure cancel/cleanup process doesn't close the logs modal.\n          // Any other approach would have required a lot of refactoring.\n          WPStagingBackup.cancel({}, function() {\n            setTimeout(WPStagingBackup.logsModal, 500);\n          });\n        }\n      };\n\n      for (const message of response.messages) {\n        if (!message) {\n          continue;\n        }\n\n        WPStagingBackup.messages.addMessage(message);\n        appendMessage(message);\n      }\n\n      if ($logsContainer.is(':visible')) {\n        $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n      }\n\n      if (!WPStagingBackup.messages.shouldWarn()) {\n        return;\n      }\n\n      const $container = $(WPStagingCommon.getSwalContainer());\n      const $btnShowLogs = $container.find('.wpstg-backup-process-logs-button');\n      $btnShowLogs.html($btnShowLogs.attr('data-txt-bad'));\n\n      $btnShowLogs\n          .find('.wpstg--modal--logs--critical-count')\n          .text(WPStagingBackup.messages.countByType(WPStagingBackup.messages.CRITICAL))\n      ;\n\n      $btnShowLogs\n          .find('.wpstg--modal--logs--error-count')\n          .text(WPStagingBackup.messages.countByType(WPStagingBackup.messages.ERROR))\n      ;\n\n      $btnShowLogs\n          .find('.wpstg--modal--logs--warning-count')\n          .text(WPStagingBackup.messages.countByType(WPStagingBackup.messages.WARNING))\n      ;\n    },\n    downloadModal({title = null, bodyText = null}) {\n      if (WPStagingBackup.isBackupSlowerThanUsual && WPStagingBackup.isBackupSpeedModalDisplayed === false) {\n        return;\n      }\n\n      if (WPStagingBackup.modal.download.html === null) {\n        const $el = $('#wpstg-backup-success-modal');\n        WPStagingBackup.modal.download.html = $el.html();\n      }\n\n      WPStagingCommon.getSwalModal(true).fire({\n        'icon': 'success',\n        'html': WPStagingBackup.modal.download.html.replace('{title}', title).replace('{btnTxtLog}', 'Show Logs').replace('{text}', bodyText !== null ? bodyText : 'You can restore this backup anytime or upload it to another website and restore it there.'),\n        'confirmButtonText': 'Close',\n        'showCancelButton': false,\n        'showConfirmButton': true,\n      });\n\n      if (title === 'Backup Complete') {\n        const wpstgRateUsElement = WPStagingCommon.getSwalContainer().querySelector('.wpstg-rate-us');\n        if (wpstgRateUsElement) {\n          wpstgRateUsElement.classList.add('show');\n        }\n      }\n    },\n    async checkMemoryExhaustion(response, requestType) {\n      const result = await WPStagingCommon.checkMemoryExhaustion(requestType);\n      if (result === false) {\n        return;\n      }\n\n      let helpContent = ' <button class=\"wpstg-btn wpstg-primary-btn wpstg-report-issue-button\" type=\"button\">CONTACT US</button> for help in solving this issue.';\n      if (wpstg.isPro) {\n        helpContent = ' Read <a target=\"_blank\" href=\"' + WPStagingCommon.memoryExhaustArticleLink + '\">this article</a> for solving this issue. Please contact WP Staging support if you need further assistance.';\n      }\n\n      response.messages = [{\n        'type': 'critical',\n        'date': result.data['time'],\n        'message': result.message + '.' + helpContent,\n      }];\n\n      WPStagingBackup.processResponse(response);\n    },\n    statusStop() {\n      clearInterval(WPStagingBackup.processInfo.interval);\n      WPStagingBackup.processInfo.interval = null;\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n    },\n    statusStart(process) {\n      if (WPStagingBackup.processInfo.interval !== null) {\n        return;\n      }\n      WPStagingBackup.processInfo.interval = setInterval(() => {\n        if (true === WPStagingBackup.isCancelled) {\n          WPStagingBackup.statusStop();\n          return;\n        }\n\n        if (WPStagingBackup.status.hasResponse === false) {\n          return;\n        }\n\n        WPStagingBackup.status.hasResponse = false;\n        fetch(`${ajaxurl}?action=wpstg--backups--status&${process}=restore`, {\n          method: 'POST',\n          credentials: 'same-origin',\n          body: new URLSearchParams({\n            action: 'wpstg--backups--status',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          }),\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n          },\n        }).then((res) => res.json())\n            .then((res) => {\n              WPStagingBackup.status.hasResponse = true;\n              if (typeof res === 'undefined') {\n                WPStagingBackup.statusStop();\n              }\n\n              if (WPStagingBackup.processInfo.title === res.currentStatusTitle) {\n                return;\n              }\n\n              WPStagingBackup.processInfo.title = res.currentStatusTitle;\n              const $container = $(WPStagingCommon.getSwalContainer());\n              $container.find('.wpstg-backup-process-title').text(res.currentStatusTitle);\n              $container.find('.wpstg-backup-process-percent').text('0');\n            })\n            .catch((e) => {\n              WPStagingBackup.status.hasResponse = true;\n              WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.');\n            })\n        ;\n      }, 5000);\n    },\n    showLogsInModal(e, modal = 'process') {\n      if (WPStagingBackup.messages.data.all) {\n        const container = WPStagingCommon.getSwalContainer();\n        const logsContainer = container.querySelector('.wpstg-backup-' + modal + '-logs');\n        logsContainer.innerHTML = '';\n        WPStagingBackup.messages.data.all.forEach(function(message) {\n          const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n          const pElement = document.createElement('p');\n          pElement.className = msgClass;\n          pElement.textContent = `[${message.type}] - [${message.date}] - ${message.message}`;\n          logsContainer.appendChild(pElement);\n        });\n      }\n\n      const container = WPStagingCommon.getSwalContainer();\n      const $logs = $(container).find('.wpstg-backup-' + modal + '-logs');\n      $logs.toggle();\n      const logBtn = $(container).find('.wpstg-backup-' + modal + '-logs-button');\n      e.preventDefault();\n      if ($logs.is(':visible')) {\n        logBtn.text(wpstg.i18n.hideLogs);\n        container.childNodes[0].style.width = '97%';\n        container.style['z-index'] = 9999;\n      } else {\n        logBtn.text(wpstg.i18n.showLogs);\n        container.childNodes[0].style.width = '600px';\n      }\n    },\n    calculateBackupSpeedIndex(size, totalTime) {\n      fetch(ajaxurl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: 'wpstg_calculate_backup_speed_index',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          size: size,\n          time: totalTime,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      }).then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n      }).then((data) => {\n        WPStagingBackup.isBackupSlowerThanUsual = data.isBackupSlowerThanUsual;\n        WPStagingBackup.isBackupSpeedModalDisplayed = data.isBackupSpeedModalDisplayed;\n        if (data.isBackupSlowerThanUsual && data.isBackupSpeedModalDisplayed === false) {\n          const reportModal = document.querySelector('#wpstg-general-error-modal');\n          if (reportModal != null && reportModal != undefined) {\n            dom.show('#wpstg-general-error-modal');\n            new WpstgContactUs('general-error');\n          }\n        }\n      }).catch((error) => {\n        console.log(error);\n      });\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackup;\n","import 'regenerator-runtime/runtime';\nimport * as dom from '../../modules/wpstg-dom-utils.js';\nimport wpstgAuthCheck from './wpstg-auth-check';\n\nclass WpstgReAuth {\n  constructor() {\n    this.wrap = '';\n    this.tempHidden = '';\n    this.tempHiddenTimeout = '';\n  }\n\n  /**\n   * @return {void}\n   */\n  shows() {\n    this.wrap = document.getElementById('wpstg-auth-check-wrap');\n    this.parentElement = document.getElementById('wpstg-auth-check');\n    this.formElement = document.getElementById('wpstg-auth-check-form');\n    this.wrapElement = document.getElementById('wpstg-auth-check-wrap');\n    this.noFrameElement = this.wrapElement.querySelector('.wpstg-auth-fallback-expired');\n    this.iframeElement = '';\n    this.isIframeLoaded = false;\n\n    if (this.formElement) {\n      this.addUnloadEvent();\n      this.iframeElement = this.createIframeElement();\n      this.formElement.appendChild(this.iframeElement);\n    }\n\n    this.openModal();\n\n    if (this.iframeElement) {\n      this.focusIframe();\n      this.setIframeLoadTimeout();\n    } else {\n      this.focusFallbackElement();\n    }\n  }\n\n  /**\n   * @return {void}\n   */\n  addUnloadEvent() {\n    window.addEventListener('beforeunload', (event) => {\n      event.returnValue = 'Your session has expired. You can log in again from this page or go to the login page.';\n    });\n  }\n\n  /**\n  * @return {void}\n  */\n  createIframeElement() {\n    this.iframeElement = document.createElement('iframe');\n    this.iframeElement.id = 'wpstg-auth-check-frame';\n    this.iframeElement.style.border = '0px';\n    this.iframeElement.title = this.noFrameElement.textContent;\n\n    this.iframeElement.onload = () => this.handleIframeLoad();\n\n    this.iframeElement.src = this.formElement.dataset.src;\n    return this.iframeElement;\n  }\n\n  /**\n   * @return {void}\n   */\n  handleIframeLoad() {\n    let height;\n    let body;\n\n    this.isIframeLoaded = true;\n    this.formElement.classList.remove('loading');\n\n    try {\n      body = this.iframeElement.contentDocument.querySelector('body');\n      height = body.offsetHeight;\n    } catch (er) {\n      this.handleIframeLoadError();\n      return;\n    }\n\n    if (!body || !height) {\n      this.handleIframeLoadError();\n      return;\n    }\n\n    if (!body.classList.contains('interim-login-success')) {\n      this.parentElement.style.maxHeight = height + 40 + 'px';\n      return;\n    }\n\n    this.hide();\n  }\n\n  /**\n   * @return {void}\n   */\n  handleIframeLoadError() {\n    this.wrapElement.classList.add('fallback');\n    this.parentElement.style.maxHeight = '';\n    this.formElement.remove();\n    this.noFrameElement.focus();\n  }\n\n  /**\n   * @return {void}\n   */\n  openModal() {\n    document.body.classList.add('modal-open');\n    this.wrapElement.classList.remove('hidden');\n  }\n\n  /**\n   * @return {void}\n   */\n  focusIframe() {\n    this.iframeElement.focus();\n  }\n\n  /**\n   * @return {void}\n   */\n  setIframeLoadTimeout() {\n    setTimeout(() => {\n      if (!this.isIframeLoaded) {\n        this.wrapElement.classList.add('fallback');\n        this.formElement.remove();\n        this.noFrameElement.focus();\n      }\n    }, 2000);\n  }\n\n  /**\n   * @return {void}\n   */\n  focusFallbackElement() {\n    this.noFrameElement.focus();\n  }\n\n  /**\n   * @return {void}\n   */\n  hide() {\n    window.removeEventListener('beforeunload', function(event) {\n      event.returnValue = null;\n    });\n\n    dom.fadeOut(this.wrap, 200, () => {\n      this.wrap.classList.add('hidden');\n      this.wrap.style.display = '';\n      document.getElementById('wpstg-auth-check-frame').remove();\n      document.body.classList.remove('modal-open');\n    });\n\n    wpstgAuthCheck.checkUserAuthentication();\n  }\n}\n\nconst wpstgReAuth = new WpstgReAuth();\nexport default wpstgReAuth;\n","import 'regenerator-runtime/runtime';\nimport wpstgReAuth from './wpstg-re-auth';\n\nclass WpstgAuthCheck {\n  constructor(wpstgObject = wpstg) {\n    this.wpstgObject = wpstgObject;\n    this.count = 0;\n    this.status = true;\n    this.isAuthenticated = true;\n  }\n\n  /**\n   * Start checking user authentication\n   *\n   * @return {void}\n   */\n  start() {\n    if (this.status) {\n      setTimeout(() => {\n        this.checkUserAuthentication();\n      }, 1000);\n    }\n  }\n\n  /**\n   * @return {void}\n   */\n  stop() {\n    this.resetCount();\n    this.status = false;\n  }\n\n  /**\n   * @return {void}\n   */\n  resetCount() {\n    this.count = 0;\n  }\n\n  /**\n  * @return {void}\n  */\n  async checkUserAuthentication() {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg_check_user_is_authenticated',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if (data.wpAuthCheck === false) {\n        this.count++;\n      }\n\n      this.isAuthenticated = data.wpAuthCheck;\n      if (this.count === 2) {\n        this.stop();\n        this.createAuthCheckElements(data.redirectUrl);\n        return;\n      }\n\n      this.start();\n    }).catch((error) => {\n      console.error('Error:', error);\n    });\n  }\n\n  /**\n   * @param redirectUrl\n   * @return {void}\n   */\n  createAuthCheckElements(redirectUrl) {\n    const isAlreadyAppended = document.getElementById('wpstg-auth-check-wrap') !== null;\n\n    if (isAlreadyAppended) {\n      document.getElementById('wpstg-auth-check-wrap').remove();\n    }\n\n    const wpAuthCheckWrap = document.createElement('div');\n    wpAuthCheckWrap.id = 'wpstg-auth-check-wrap';\n    wpAuthCheckWrap.classList.add('hidden');\n\n    const wpAuthCheckBg = document.createElement('div');\n    wpAuthCheckBg.id = 'wpstg-auth-check-bg';\n\n    const wpAuthCheckDialog = document.createElement('div');\n    wpAuthCheckDialog.id = 'wpstg-auth-check';\n\n    const wpAuthCheckForm = document.createElement('div');\n    wpAuthCheckForm.id = 'wpstg-auth-check-form';\n    wpAuthCheckForm.classList.add('loading');\n    wpAuthCheckForm.dataset.src = redirectUrl + '?interim-login=1&wp_lang=en_US';\n\n    const wpAuthCheckFallback = document.createElement('div');\n    wpAuthCheckFallback.classList.add('wpstg-auth-fallback');\n\n    const wpAuthCheckExpired = document.createElement('p');\n    wpAuthCheckExpired.innerHTML = '<b class=\"wpstg-auth-fallback-expired\" tabindex=\"0\">Session expired</b>';\n\n    const wpAuthCheckLoginLink = document.createElement('p');\n    wpAuthCheckLoginLink.innerHTML = `<a href=\"${redirectUrl}\" target=\"_blank\">Please log in again.</a> The login page will open in a new tab. After logging in you can close it and return to this page.`;\n\n    const wpAuthCheckCloseButton = document.createElement('button');\n    wpAuthCheckCloseButton.type = 'button';\n    wpAuthCheckCloseButton.classList.add('wpstg-auth-check-close', 'button-link');\n    wpAuthCheckCloseButton.innerHTML = '<span class=\"screen-reader-text\">Close dialog</span>';\n    wpAuthCheckCloseButton.addEventListener('click', function() {\n      wpAuthCheckWrap.classList.add('hidden');\n    });\n\n    wpAuthCheckDialog.append(wpAuthCheckCloseButton, wpAuthCheckForm, wpAuthCheckFallback);\n    wpAuthCheckFallback.append(wpAuthCheckExpired, wpAuthCheckLoginLink);\n    wpAuthCheckWrap.append(wpAuthCheckBg, wpAuthCheckDialog);\n    document.body.appendChild(wpAuthCheckWrap);\n    wpstgReAuth.shows();\n  }\n}\n\nconst wpstgAuthCheck = new WpstgAuthCheck();\nexport default wpstgAuthCheck;\n\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\nimport wpstgAuthCheck from './wpstg-auth-check';\nimport * as dom from './../../modules/wpstg-dom-utils';\n\nlet WPStagingBackupCreate;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupCreate.listen();\n  });\n\n  window.addEventListener('startedCreatingBackup', function() {\n    window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n  });\n\n  WPStagingBackupCreate = {\n    listen() {\n      $('body')\n          .off('click', '#wpstg-new-backup', WPStagingBackupCreate.clickedBackup)\n          .on('click', '#wpstg-new-backup', WPStagingBackupCreate.clickedBackup)\n          .off('change', '.wpstg--swal2-container .wpstg-advanced-options-site input[type=checkbox]')\n          .on('change', '.wpstg--swal2-container .wpstg-advanced-options-site input[type=checkbox]', WPStagingBackupCreate.warnBackupMediaWithoutDatabase)\n          .off('change', '[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent, [type=\"checkbox\"][name=\"storages\"]')\n          .on('change', '[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent, [type=\"checkbox\"][name=\"storages\"]', WPStagingBackupCreate.disableBackupButtonIfNoSelection)\n          .on('click', '#wpstg-copy-backup-url', dom.copyTextToClipboard)\n      ;\n    },\n    async clickedBackup(e) {\n      WPStagingCommon.resetErrors();\n      e.preventDefault();\n      WPStagingBackup.isCancelled = false;\n\n      if (!WPStagingBackup.modal.create.html || !WPStagingBackup.modal.create.confirmBtnTxt) {\n        const $newBackupModal = $('#wpstg--modal--backup--new');\n        const html = $newBackupModal.html();\n        const btnTxt = $newBackupModal.attr('data-confirmButtonText');\n        WPStagingBackup.modal.create.html = html || null;\n        WPStagingBackup.modal.create.confirmBtnTxt = btnTxt || null;\n        $newBackupModal.remove();\n      }\n\n      const {value: formValues} = await WPStagingCommon.getSwalModal(false, {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n      }).fire({\n        title: '',\n        html: WPStagingBackup.modal.create.html,\n        focusConfirm: false,\n        confirmButtonText: WPStagingBackup.modal.create.confirmBtnTxt,\n        showCancelButton: true,\n        preConfirm: () => {\n          const container = WPStagingCommon.getSwalContainer();\n          WPStagingBackup.modal.create.hasBackupSchedule = WPStagingBackup.modal.create.hasBackupSchedule ? true : !container.querySelector('#repeatBackupOnSchedule').checked;\n          WPStagingBackup.processInfo.isOnlySchedule = !container.querySelector('#repeatBackupOnSchedule').checked && (!container.querySelector('#backupScheduleLaunch').checked);\n\n          const selectedStorages = container.querySelectorAll('input[name=\"storages\"]:checked');\n          const storages = [];\n          for (const storage of selectedStorages) {\n            storages.push(storage.value);\n          }\n\n          WPStagingCommon.selectedStorages = storages;\n\n          return {\n            name: WPStagingCommon.sanitizeEventAttribute(container.querySelector('input[name=\"backup_name\"]').value) || null,\n            isExportingPlugins: container.querySelector('#includePluginsInBackup:checked') !== null,\n            isExportingMuPlugins: container.querySelector('#includeMuPluginsInBackup:checked') !== null,\n            isExportingThemes: container.querySelector('#includeThemesInBackup:checked') !== null,\n            isExportingUploads: container.querySelector('#includeMediaLibraryInBackup:checked') !== null,\n            isExportingOtherWpContentFiles: container.querySelector('#includeOtherFilesInWpContent:checked') !== null,\n            isExportingDatabase: container.querySelector('#includeDatabaseInBackup:checked') !== null,\n            repeatBackupOnSchedule: container.querySelector('#repeatBackupOnSchedule:not(:checked)') !== null,\n            scheduleRecurrence: container.querySelector('#backupScheduleRecurrence').value || null,\n            scheduleTime: container.querySelector('#backupScheduleTime').value || null,\n            scheduleRotation: container.querySelector('#backupScheduleRotation').value || null,\n            storages: storages,\n            isCreateScheduleBackupNow: container.querySelector('#backupScheduleLaunch:checked') !== null,\n            backupType: container.querySelector('[name=\"backupType\"]').value || null,\n            isSmartExclusion: container.querySelector('#wpstgSmartExclusion:checked') !== null,\n            isExcludingSpamComments: container.querySelector('#wpstgExcludeSpamComments:checked') !== null,\n            isExcludingPostRevision: container.querySelector('#wpstgExcludePostRevision:checked') !== null,\n            isExcludingDeactivatedPlugins: container.querySelector('#wpstgExcludeDeactivatedPlugins:checked') !== null,\n            isExcludingUnusedThemes: container.querySelector('#wpstgExcludeUnusedThemes:checked') !== null,\n            isExcludingLogs: container.querySelector('#wpstgExcludeLogs:checked') !== null,\n            isExcludingCaches: container.querySelector('#wpstgExcludeCaches:checked') !== null,\n          };\n        },\n        onRender() {\n          if (WPStagingBackup.modal.create.hasBackupSchedule === true) {\n            document.querySelectorAll('#repeatBackupOnSchedule.wpstg-is-basic').forEach((el) => {\n              el.disabled = true;\n            });\n\n            document.querySelectorAll('.wpstg-basic-schedule-notice.wpstg-is-basic').forEach((el) => {\n              el.style.display = 'block';\n            });\n          }\n\n          if (WPStagingBackup.modal.create.hasBackupSchedule === false) {\n            document.querySelectorAll('#repeatBackupOnSchedule.wpstg-is-basic').forEach((el) => {\n              el.disabled = false;\n            });\n\n            document.querySelectorAll('.wpstg-basic-schedule-notice.wpstg-is-basic').forEach((el) => {\n              el.style.display = 'none';\n            });\n          }\n        },\n      });\n\n      if (!formValues) {\n        return;\n      }\n\n      WPStagingBackup.process({\n        execute: () => {\n          WPStagingBackup.messages.reset();\n          WPStagingBackupCreate.prepareBackup(formValues);\n        },\n      });\n    },\n    prepareBackup(data) {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--prepare-backup',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            wpstgBackupData: data,\n          },\n          function(response) {\n            if (response.success) {\n              window.dispatchEvent(new Event('startedCreatingBackup'));\n              WPStagingBackup.timer.start();\n              wpstgAuthCheck.status = true;\n              wpstgAuthCheck.start();\n              WPStagingBackupCreate.createBackup();\n            } else {\n              WPStagingCommon.showAjaxFatalError(response.data, '', 'Submit an error report.');\n            }\n          },\n          'json',\n          false,\n          10,\n          1.25,\n          function(xhr, textStatus, errorThrown) {\n            if (xhr.status === 423) {\n              WPStagingCommon.continueErrorHandle = false;\n              WPStagingBackup.shouldCleanUp = false;\n              WPStagingCommon.closeSwalModal();\n\n              setTimeout(function() {\n                WPStagingBackup.shouldCleanUp = true;\n              }, 1000);\n\n              WPStagingCommon.showErrorModal(xhr.responseJSON.data);\n            } else {\n              WPStagingCommon.continueErrorHandle = true;\n            }\n          },\n      );\n    },\n    createBackup() {\n      const maxBackupSequentialReturnError = wpstg.maxFailedRetries;\n      let backupReturnedError = 0;\n      WPStagingCommon.resetErrors();\n\n      if (WPStagingBackup.isCancelled) {\n        WPStagingBackup.statusStop();\n        return;\n      }\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--create',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          },\n          async function(response) {\n            backupReturnedError = 0;\n\n            if (WPStagingBackup.isCancelled) {\n              return;\n            }\n\n            if (typeof response === 'undefined') {\n              setTimeout(function() {\n                WPStagingBackupCreate.createBackup();\n              }, wpstg.delayReq);\n              return;\n            }\n\n            WPStagingBackup.processResponse(response);\n            if (!WPStagingBackup.processInfo.interval) {\n              WPStagingBackup.statusStart('create');\n            }\n\n            if (response.isRunning === true) {\n              WPStagingBackupCreate.createBackup();\n            } else if (response.jobStatus === 'JOB_FAIL') {\n              await WPStagingBackup.checkMemoryExhaustion(response, 'wpstg_backup');\n              setTimeout(function() {\n                WPStagingBackupCreate.createBackup();\n              }, wpstg.delayReq);\n            } else {\n              $('#wpstg--progress--status').text('Backup successfully created!');\n              wpstgAuthCheck.stop();\n              dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n              if (WPStagingBackup.messages.shouldWarn()) {\n              // noinspection JSIgnoredPromiseFromCall\n                WPStagingBackup.fetchListing();\n                WPStagingBackup.logsModal();\n                return;\n              }\n\n              WPStagingBackup.statusStop();\n              WPStagingCommon.closeSwalModal();\n              WPStagingBackup.fetchListing()\n                  .then(() => {\n                    if (!response.backupMd5 && !WPStagingBackup.processInfo.isOnlySchedule) {\n                      WPStagingCommon.showError('<strong>Warning</strong>: Failed to get backup md5 from response!<br/>Response content: '+JSON.stringify(response)+'<br/><br/>Please report this warning <a href=\"https://wp-staging.com/support/\" target=\"_blank\">to our support</a> and keep using WP Staging!');\n                      return;\n                    }\n\n                    // load remote backups list only when remote storage is selected.\n                    if (Array.isArray(WPStagingCommon.selectedStorages) &&\n                    ((WPStagingCommon.selectedStorages.includes('localStorage') && WPStagingCommon.selectedStorages.length >= 2) ||\n                    (!WPStagingCommon.selectedStorages.includes('localStorage') && WPStagingCommon.selectedStorages.length >= 1))\n                    ) {\n                      $('#wpstg-show-cloud-backup').click();\n                    }\n\n                    // Wait for fetchListing to populate the DOM with the backup data that we want to read\n                    let $el = '';\n                    let timesWaited = 0;\n                    const intervalWaitForBackupInDom = setInterval(function() {\n                      if (!WPStagingBackup.processInfo.isOnlySchedule && response.isLocalBackup) {\n                        timesWaited++;\n\n                        let backupFound = false;\n                        if (!response.isMultipartBackup) {\n                          $el = $(`.wpstg-backup[data-md5=\"${response.backupMd5}\"] .wpstg--backup--download`);\n                          backupFound = $el.length > 0;\n                        } else {\n                          response.backupMd5.forEach((md5) => {\n                            $el = $(`.wpstg-backup[data-md5=\"${md5}\"] .wpstg--backup--download`);\n                            if ($el.length) {\n                              backupFound = true;\n                            }\n                          });\n                        }\n\n                        // Could not find element, let's try again...\n                        if (!backupFound) {\n                          if (timesWaited >= 20) {\n                            // Bail: We tried too many times and couldn't find.\n                            clearInterval(intervalWaitForBackupInDom);\n                          }\n                          return;\n                        }\n\n                        // Found it. No more need for the interval.\n                        clearInterval(intervalWaitForBackupInDom);\n                      } else {\n                        // Just clear the interval\n                        clearInterval(intervalWaitForBackupInDom);\n                      }\n\n                      WPStagingBackup.downloadModal({\n                        title: WPStagingBackup.processInfo.isOnlySchedule ? 'Backup Schedule Created' : 'Backup Complete',\n                        bodyText: WPStagingBackup.processInfo.isOnlySchedule ? 'Backup is scheduled according to the provided settings.' : null,\n                      });\n                      $('.wpstg-backup-success-logs-wrapper').show();\n                      const $logsContainer = $('.wpstg-backup-success-logs');\n                      WPStagingBackup.messages.data.all.forEach((message) => {\n                        const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n                        $logsContainer\n                            .append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`)\n                        ;\n                      });\n                    }, 500);\n                  })\n              ;\n            }\n          },\n          'json',\n          false,\n          0, // Don't retry upon failure\n          1.25,\n          function(xhr, textStatus, errorThrown) {\n            WPStagingCommon.continueErrorHandle = false;\n            const response = {\n              'messages': [],\n            };\n\n            backupReturnedError++;\n\n            // Prevents loop in case PHP crashes constantly before being able to respond\n            if (backupReturnedError <= maxBackupSequentialReturnError) {\n              WPStagingBackupCreate.createBackup();\n            } else {\n              response.messages.push({\n                'type': 'critical',\n                'message': 'There was a PHP fatal error while processing the backup. You might need to check your PHP error log to find out the reason. Please contact WP STAGING support if you need help.',\n              });\n\n              WPStagingBackup.processResponse(response);\n              WPStagingBackup.cancel();\n              setTimeout(WPStagingBackup.logsModal, 500);\n            }\n          },\n      );\n    },\n    warnBackupMediaWithoutDatabase(event) {\n      const container = event.currentTarget.closest('.wpstg--swal2-container');\n      event.preventDefault();\n      // this is for remote upload feature PR: 2611\n      if (container.querySelector('#includeDatabaseInBackup') === null && container.querySelector('#includeMediaLibraryInBackup') === null) {\n        return;\n      }\n\n      const isExportingDatabase = container.querySelector('#includeDatabaseInBackup').checked;\n      const isExportingMediaLibrary = container.querySelector('#includeMediaLibraryInBackup').checked;\n\n      if (isExportingMediaLibrary && !isExportingDatabase) {\n        container.querySelector('#backupUploadsWithoutDatabaseWarning').style.display = 'block';\n      } else {\n        container.querySelector('#backupUploadsWithoutDatabaseWarning').style.display = 'none';\n      }\n    },\n    disableBackupButtonIfNoSelection(event) {\n      const container = event.currentTarget.closest('.wpstg--swal2-container');\n      event.preventDefault();\n      const checkboxesStorages = Array.from(container.querySelectorAll('[type=\"checkbox\"][name=\"storages\"]:checked'));\n      const isStorageSelected = checkboxesStorages.length > 0;\n      // this is for remote upload feature\n      if (container.querySelector('#includeDatabaseInBackup') === null && container.querySelector('#includeMediaLibraryInBackup') === null) {\n        container.querySelector('.wpstg--swal2-confirm').disabled = !isStorageSelected;\n        return;\n      }\n\n      const checkboxesDirs = Array.from(container.querySelectorAll('[type=\"checkbox\"][name=\"includedDirectories[]\"]:checked'));\n      const isExportingAnyDir = checkboxesDirs.length > 0;\n\n      const checkboxesDatabase = Array.from(container.querySelectorAll('input#includeDatabaseInBackup:checked'));\n      const isExportingDatabase = checkboxesDatabase.length === 1;\n\n      const checkboxesOtherFiles = Array.from(container.querySelectorAll('input#includeOtherFilesInWpContent:checked'));\n      const isExportingOtherFilesInWpContent = checkboxesOtherFiles.length === 1;\n\n\n      const confirmButton = container.querySelector('.wpstg--swal2-confirm');\n      confirmButton.disabled = !isExportingAnyDir && !isExportingDatabase && !isExportingOtherFilesInWpContent || !isStorageSelected;\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupCreate;\n","import WPStagingCommon from '../../wpstg.js';\nimport * as dom from '../../modules/wpstg-dom-utils.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupDelete;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupDelete.listen();\n  });\n\n  WPStagingBackupDelete = {\n    listen() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg-delete-backup[data-md5]', WPStagingBackupDelete.delete)\n          .on('click', '.wpstg-delete-backup[data-md5]', WPStagingBackupDelete.delete);\n    },\n    delete(e) {\n      e.preventDefault();\n      WPStagingCommon.resetErrors();\n\n      const name = this.getAttribute('data-name');\n\n      const htmlContent = 'Do you want to delete the backup <br>' + name + '?';\n\n      WPStagingCommon.getSwalModal(false, {\n        confirmButton: 'wpstg--btn--confirm wpstg-btn-danger wpstg-link-btn',\n      }).fire({\n        showConfirmButton: true,\n        showCancelButton: true,\n        cancelButtonText: 'Cancel',\n        confirmButtonText: 'Delete',\n        icon: 'warning',\n        title: 'Delete Backup?',\n        html: '<div class=\"wpstg--modal--delete\">' + htmlContent + '</div>',\n      }).then((result) => {\n        if (!result.value) {\n          return;\n        }\n\n        dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n        WPStagingCommon.isLoading(true);\n        WPStagingCommon.cache.get('#wpstg-existing-backups').hide();\n        const md5 = this.getAttribute('data-md5');\n        WPStagingCommon.ajax(\n            {\n              action: 'wpstg--backups--delete',\n              md5: md5,\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n            },\n            function(response) {\n              WPStagingCommon.showAjaxFatalError(response, '', ' Please submit an error report by using the CONTACT US button.');\n              WPStagingCommon.isLoading(false);\n              WPStagingBackup.fetchListing();\n            },\n        );\n      });\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupDelete;\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\nimport * as dom from '../../modules/wpstg-dom-utils';\n\nlet WPStagingBackupEdit;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupEdit.listen();\n  });\n\n  WPStagingBackupEdit = {\n    listen() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg--backup--edit[data-md5]', WPStagingBackupEdit.edit)\n          .on('click', '.wpstg--backup--edit[data-md5]', WPStagingBackupEdit.edit);\n    },\n    async edit(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const name = WPStagingCommon.htmlEntityQuotesDecode(WPStagingCommon.sanitizeEventAttribute($this.data('name')));\n      const notes = WPStagingCommon.htmlEntityQuotesDecode(WPStagingCommon.sanitizeEventAttribute($this.data('notes')));\n\n      const {value: formValues} = await WPStagingCommon.getSwalModal().fire({\n        title: '',\n        html: `\n                    <label id=\"wpstg-backup-edit-name\">Backup Name</label>\n                    <input id=\"wpstg-backup-edit-name-input\" class=\"wpstg--swal2-input\" maxlength=\"100\" value=\"${name}\">\n                    <label>Additional Notes</label>\n                    <textarea id=\"wpstg-backup-edit-notes-textarea\" class=\"wpstg--swal2-textarea\" maxlength=\"1000\">${notes}</textarea>\n                  `,\n        focusConfirm: false,\n        confirmButtonText: 'Save',\n        showCancelButton: true,\n        preConfirm: () => ({\n          name: WPStagingCommon.sanitizeEventAttribute(document.getElementById('wpstg-backup-edit-name-input').value) || null,\n          notes: WPStagingCommon.sanitizeEventAttribute(document.getElementById('wpstg-backup-edit-notes-textarea').value) || null,\n        }),\n      });\n\n      if (!formValues) {\n        return;\n      }\n\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--edit',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            md5: $this.data('md5'),\n            name: WPStagingCommon.sanitizeEventAttribute(formValues.name),\n            notes: WPStagingCommon.sanitizeEventAttribute(formValues.notes),\n          },\n          function(response) {\n            WPStagingCommon.showAjaxFatalError(response, '', 'Submit an error report.');\n            // noinspection JSIgnoredPromiseFromCall\n            dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n            WPStagingBackup.fetchListing();\n          },\n      );\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupEdit;\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupRestore;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupRestore.listen();\n  });\n\n  WPStagingBackupRestore = {\n    listen() {\n      $('body')\n          .off('click', '.wpstg--backup--restore', WPStagingBackupRestore.clickedRestore)\n          .on('click', '.wpstg--backup--restore', WPStagingBackupRestore.clickedRestore);\n    },\n    timer: {\n      totalSeconds: 0,\n      interval: null,\n      start() {\n        if (null !== WPStagingBackupRestore.timer.interval) {\n          return;\n        }\n        const prettify = (seconds) => {\n          return `${(new Date(seconds * 1000)).toISOString().substr(11, 8)}`;\n        };\n\n        WPStagingBackupRestore.timer.interval = setInterval(() => {\n          $('.wpstg--modal--process--elapsed-time').text(prettify(WPStagingBackupRestore.timer.totalSeconds));\n          WPStagingBackupRestore.timer.totalSeconds++;\n        }, 1000);\n      },\n      stop() {\n        WPStagingBackupRestore.timer.totalSeconds = 0;\n        if (WPStagingBackupRestore.timer.interval) {\n          clearInterval(WPStagingBackupRestore.timer.interval);\n          WPStagingBackupRestore.timer.interval = null;\n        }\n      },\n    },\n    clickedRestore(e) {\n      const currentObj = this;\n      WPStaging.checkUserDbPermissions('restore').then(function() {\n        WPStagingCommon.resetErrors();\n        e.preventDefault();\n        WPStagingBackup.isCancelled = false;\n        WPStagingBackup.modal.restore.data.file = currentObj.getAttribute('data-filePath');\n        WPStagingBackupRestore.selectedBackup();\n      });\n    },\n    selectedBackup() {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--read-backup-metadata',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            wpstg: {\n              file: WPStagingBackup.modal.restore.data.file,\n            },\n          },\n          function(response) {\n            let responseData;\n\n            try {\n              responseData = JSON.parse(WPStagingCommon.getDataFromWordPressResponse(response));\n              // Get the first item of the blogs object:\n              // blogs {1: {someData}} => {someData}\n              const mainNetwork = responseData.networks[Object.keys(responseData.networks)[0]];\n              const mainBlog = mainNetwork.blogs[Object.keys(mainNetwork.blogs)[0]];\n              responseData = mainBlog;\n            } catch (e) {\n              WPStagingCommon.showError(e);\n            }\n\n            WPStagingBackup.modal.restore.data.backupMetadata = responseData;\n\n            const postData = new FormData();\n            postData.append('action', 'wpstg--backups--restore--file-info');\n            postData.append('accessToken', wpstg.accessToken);\n            postData.append('nonce', wpstg.nonce);\n            postData.append('filePath', WPStagingBackup.modal.restore.data.file);\n\n            fetch(ajaxurl, {\n              method: 'POST',\n              body: postData,\n            })\n                .then(WPStagingCommon.handleFetchErrors)\n                .then((res) => res.json())\n                .then((html) => {\n                  WPStagingBackup.modal.restore.retryCount = 0;\n                  WPStagingBackupRestore.importModal(html, postData);\n                })\n                .catch((e) => WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.'));\n\n            $('.wpstg--modal--actions .wpstg--swal2-confirm').show();\n            $('.wpstg--modal--actions .wpstg--swal2-confirm').prop('disabled', false);\n          },\n      );\n    },\n    importModal(confirmHtml) {\n      const importSiteBackup = (data, retryRequest = false, errorCode = null) => {\n        WPStagingCommon.resetErrors();\n\n        if (WPStagingBackup.isCancelled) {\n          WPStagingBackup.statusStop();\n          return;\n        }\n\n        WPStagingBackup.timer.start();\n\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n\n        WPStagingCommon.ajax(\n            {\n              action: 'wpstg--backups--restore',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n              retry: retryRequest,\n              errorCode: errorCode,\n            },\n            async function(response) {\n              if (WPStagingBackup.isCancelled) {\n                return;\n              }\n\n              // reset retry count on success\n              WPStagingCommon.retry.reset();\n\n              if (typeof response === 'undefined') {\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n                return;\n              }\n\n              WPStagingBackup.processResponse(response);\n              if (!WPStagingBackup.processInfo.interval) {\n                WPStagingBackup.statusStart('restore');\n              }\n\n              if (response.isRunning === true) {\n                importSiteBackup(data);\n              } else if (response.jobStatus === 'JOB_FAIL') {\n                await WPStagingBackup.checkMemoryExhaustion(response, 'wpstg_restore');\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n              } else {\n                window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n                $('#wpstg--progress--status').text('Backup successfully imported!');\n                if (WPStagingBackup.messages.shouldWarn()) {\n                  WPStagingBackup.logsModal();\n                  return;\n                }\n                WPStagingBackup.statusStop();\n                const logEntries = $('.wpstg-backup-success-logs').innerHTML;\n                const html = '<div class=\"wpstg-backup-success-logs\">' + logEntries + '</div>';\n                const issueFound = html.includes('wpstg--modal--process--msg--warning') || html.includes('wpstg--modal--process--msg--error') ? 'Issues(s) found!<br> ' : '';\n\n                const loginText = WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase ? 'You will be redirected to the login page after closing this modal.' : '';\n\n                // TODO: remove default classes.\n                WPStagingCommon.getSwalModal(true, {\n                  container: 'wpstg-restore-finished-container',\n                }).fire({\n                  icon: 'success',\n                  title: 'Finished Successfully',\n                  html: '<div id=\"wpstg-restore-success\" class=\"wpstg--grey\">Site has been restored from backup. ' + loginText + '  <br/><br/><span class=\"wpstg--modal--process--msg-found\">' + issueFound + '</span><button class=\"wpstg-backup-success-logs-button\" data-txt-bad=\"\">Show Logs</button></div><br/>' + html,\n                  onClose: function() {\n                    if (WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase) {\n                      document.getElementById('wpstg-restore-wait').style.display = 'flex';\n\n                      // Reload in 15 seconds if something goes wrong with the Ajax call.\n                      setTimeout(function() {\n                        document.location.reload(true);\n                      }, 15000);\n\n                      WPStagingCommon.ajax(\n                          {\n                            action: 'raw_wpstg--backups--login-url',\n                            accessToken: wpstg.accessToken,\n                            nonce: wpstg.nonce,\n                          },\n                          function(response) {\n                            // When restoring on WordPress.com, login Url might be undefined due to private site settings.\n                            if (response.data.loginUrl === undefined && response.data.code === 'private_site') {\n                              return;\n                            }\n\n                            const loginUrl = new URL(response.data.loginUrl);\n                            loginUrl.searchParams.set('accessToken', wpstg.accessToken);\n                            loginUrl.searchParams.set('wpstgAfterRestore', 'yes');\n                            if (WPStagingBackup.modal.restore.data.backupMetadata.isCreatedOnWordPressCom) {\n                              loginUrl.searchParams.set('wpstgIsBackupCreatedOnWordPressCom', 'yes');\n                            }\n\n                            window.location.href = loginUrl.toString();\n                          },\n                      );\n                    } else {\n                      WPStagingBackup.fetchListing();\n                    }\n                  },\n                },\n                );\n              }\n            },\n            'json',\n            false,\n            10, // Don't retry upon failure\n            1.25,\n            async (xhr, textStatus, errorThrown) => { // Callback function to handle retry for Backup Restore\n              const errorCode = parseInt(xhr.status);\n\n              await WPStagingBackup.checkMemoryExhaustion({messages: []}, 'wpstg_restore');\n\n              if (!WPStagingCommon.retry.retryOnErrors.includes(errorCode)) {\n                return;\n              }\n\n              if (!WPStagingCommon.retry.canRetry()) {\n                return;\n              }\n\n              WPStagingCommon.continueErrorHandle = false;\n              WPStagingCommon.retry.incrementRetry();\n              const delay = WPStagingCommon.retry.currentDelay;\n\n              setTimeout(async () => {\n                // Mark this try, retry\n                importSiteBackup(data, true, errorCode);\n              }, delay);\n            },\n        );\n      };\n\n      const $modal = $('#wpstg--modal--backup--restore');\n\n      WPStagingBackup.modal.restore.html = $modal.html();\n      WPStagingBackup.modal.restore.baseDirectory = $modal.attr('data-baseDirectory');\n      WPStagingBackup.modal.restore.btnTxtNext = $modal.attr('data-nextButtonText');\n      WPStagingBackup.modal.restore.btnTxtConfirm = $modal.attr('data-confirmButtonText');\n      WPStagingBackup.modal.restore.btnTxtCancel = $modal.attr('data-cancelButtonText');\n\n      WPStagingCommon.getSwalModal()\n          .mixin({\n            progressSteps: ['1', '2'],\n          })\n          .queue([\n            {\n              html: $('.wpstg--modal--backup--restore--introduction').first(),\n              confirmButtonText: 'Next',\n              showCancelButton: true,\n              showConfirmButton: true,\n              reverseButtons: true,\n              width: 600,\n              onRender() {\n                $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database').hide();\n                $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database-multisite').hide();\n                $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-files').hide();\n\n                if (WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase) {\n                  $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database').show();\n                }\n\n                if (WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase && WPStagingBackup.modal.restore.data.backupMetadata.singleOrMulti === 'multi') {\n                  $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database-multisite').show();\n                }\n\n                if (\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingMuPlugins ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingPlugins ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingThemes ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingUploads ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingOtherWpContentFiles\n                ) {\n                  $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-files').show();\n                }\n              },\n            },\n            {\n              html: confirmHtml,\n              confirmButtonText: 'Restore',\n              showCancelButton: true,\n              showConfirmButton: true,\n              reverseButtons: true,\n              width: 650,\n            },\n          ])\n          .then((res) => {\n            // Early bail: Dismissed, canceled, or in a incoherent state.\n            if (!res || !res.value) {\n              return;\n            }\n\n            // Early bail: Step 1 (Confirm) must be true.\n            if (!res.value[1] || res.value[1] !== true) {\n              return;\n            }\n\n            WPStagingBackup.isCancelled = false;\n\n            const data = WPStagingBackup.modal.restore.data;\n\n            // Unset fileObject as we don't need it anymore, and it can't be converted to array.\n            WPStagingBackup.modal.restore.data.fileObject = null;\n\n            data['file'] = WPStagingBackup.modal.restore.baseDirectory + data['file'];\n\n            WPStagingCommon.ajax(\n                {\n                  action: 'wpstg--backups--prepare-restore',\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                  wpstgRestoreData: data,\n                },\n                function(response) {\n                  if (response.success) {\n                    WPStagingBackup.process({\n                      execute: () => {\n                        WPStagingBackup.messages.reset();\n                        importSiteBackup(data);\n                      },\n                    });\n                  } else {\n                    WPStagingCommon.showAjaxFatalError(response.data, '', 'Submit an error report.');\n                  }\n                },\n                'json',\n                false,\n                10,\n                1.25,\n                function(xhr, textStatus, errorThrown) {\n                  if (xhr.status === 423) {\n                    WPStagingCommon.continueErrorHandle = false;\n                    WPStagingBackup.shouldCleanUp = false;\n                    WPStagingCommon.closeSwalModal();\n\n                    setTimeout(function() {\n                      WPStagingBackup.shouldCleanUp = true;\n                    }, 1000);\n                    WPStagingCommon.showErrorModal(xhr.responseJSON.data);\n                  } else {\n                    WPStagingCommon.continueErrorHandle = true;\n                  }\n                },\n            );\n          });\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupRestore;\n","import * as dom from './../../modules/wpstg-dom-utils';\nimport WPStagingCommon from '../../wpstg';\nimport WPStagingBackup from './wpstg-backup';\nimport WPStagingBackupUpload from './wpstg-backup-upload.js';\n\nexport default class WpstgBackupUploadUrl {\n  constructor(wpstgObject = wpstg) {\n    this.wpstgObject = wpstgObject;\n    this.currentBackupName = '';\n    this.uploadProcessPercentage = 0;\n    this.isUploadCompleted = false;\n    this.isUploadCanceled = false;\n    this.isProcessStarted = false;\n    this.isWpstgBackupFile = false;\n    this.uploadBackupFromUrl = this.uploadBackupFromUrl.bind(this);\n  }\n\n  /**\n   * Start the upload process by displaying the progress bar\n   *\n   * @return {void}\n   */\n  startUploadProcess() {\n    dom.hide('.wpstg--swal2-container #wpstg-upload-select');\n    dom.show('.wpstg--swal2-container #wpstg-upload-progress');\n    dom.show('.wpstg--swal2-container .wpstg--modal--backup--upload--content .wpstg-linear-loader');\n    dom.qs('.wpstg--swal2-container .wpstg--modal--upload--process').style.display = 'flex';\n  }\n\n  /**\n   * Stop the upload process\n   *\n   * @return {void}\n   */\n  stopUploadProcess() {\n    setTimeout(() => {\n      this.currentBackupName = '';\n      this.uploadProcessPercentage = 0;\n      this.isUploadCompleted = false;\n      this.isUploadCanceled = false;\n      this.isProcessStarted = false;\n    }, 2000);\n  }\n\n  /**\n   * Update the upload progress bar and percentage\n   *\n   * @return {void}\n   */\n  updateUploadProcess() {\n    dom.qs('.wpstg--swal2-container .wpstg--modal--upload--progress').style.width = parseInt(this.uploadProcessPercentage) + '%';\n    dom.qs('.wpstg--swal2-container .wpstg--modal--upload--progress--title > span').textContent = this.uploadProcessPercentage + '%';\n  }\n\n  hasWpstgExtension() {\n    return this.currentBackupName.endsWith('.wpstg');\n  }\n\n  /**\n   * Extract the backup name from a given URL.\n   * @param {string} backupUrl\n   *\n   * @return {void}\n   */\n  extractBackupNameFromUrl(backupUrl) {\n    try {\n      const url = new URL(backupUrl);\n      this.currentBackupName = url.pathname.split('/').pop();\n    } catch (error) {\n      dom.notify('error', error.message);\n    }\n  }\n\n  /**\n   * Handle a successful response from the server.\n   * @param {object} response - The response data from the server.\n   *\n   * @return {void}\n   */\n  handleSuccessResponse(response) {\n    WPStagingCommon.closeSwalModal();\n\n    const message = response.message ? response.message : '';\n\n    if (response.success) {\n      dom.notify('success', (message ? message : 'Success'));\n    } else {\n      WPStagingCommon.showErrorModal((message ? message : 'Invalid request data'));\n    }\n\n    WPStagingCommon.showSuccessModal(dom.qs('#wpstg--modal--backup--upload').getAttribute('data-uploadSuccessMessage', 'Upload finished'));\n    dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n    WPStagingBackup.fetchListing();\n    this.stopUploadProcess();\n  }\n\n  /**\n   * Handle an in progress response from the server.\n   * @param {object} response - The response data from the server.\n   *\n   * @return {void}\n   */\n  handleInProgressResponse(response) {\n    this.uploadProcessPercentage = Math.round((response.startByte / response.fileSize) * 100, 1);\n    if (this.uploadProcessPercentage > 100) {\n      this.uploadProcessPercentage = 100;\n    }\n\n    this.updateUploadProcess();\n    this.uploadBackupFromUrl(response.fileSize, response.startByte);\n  }\n\n  /**\n   * Handle an error response from the server and ask whether to resume or cancel the download.\n   * @param {number} fileSize - The size of the file.\n   * @param {number} startByte - The starting byte for the upload.\n   *\n   * @return {void}\n   */\n  handleErrorResponse(fileSize, startByte) {\n    if (this.isProcessStarted === false) {\n      return;\n    }\n\n    const resumeDownload = confirm('An error occurred during the download. Do you want to resume the download?');\n    if (resumeDownload) {\n      this.uploadBackupFromUrl(fileSize, startByte);\n      return;\n    }\n\n    WPStagingCommon.closeSwalModal();\n    dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n    WPStagingBackup.fetchListing();\n    this.stopUploadProcess();\n  }\n\n  /**\n   * Adds an event listener when cancel button clicked during uploading process\n   *\n   * @return {void}\n   */\n  addEvent() {\n    const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n    const btnCancel = _btnCancel.cloneNode(true);\n    _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n    btnCancel.addEventListener('click', () => this.handleCancelProcess());\n  }\n\n  /**\n   * Handles cancel upload process\n   *\n   * @return {void}\n   */\n  handleCancelProcess() {\n    const resumeDownload = confirm('Do you want to abort the upload?');\n    this.isUploadCanceled = true;\n    if (resumeDownload) {\n      WPStagingCommon.closeSwalModal();\n      WPStagingBackupUpload.deleteUnfinishedUploads();\n      dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n      WPStagingBackup.fetchListing();\n      this.stopUploadProcess();\n      return;\n    }\n\n    this.isUploadCanceled = false;\n  }\n\n  /**\n   * Upload a backup from a URL.\n   * @param {number} fileSize - The size of the file.\n   * @param {number} startByte - The starting byte for the upload.\n   *\n   * @return {void}\n   */\n  async uploadBackupFromUrl(fileSize = 0, startByte = 0) {\n    if (this.isUploadCanceled) {\n      return false;\n    }\n\n    const container = WPStagingCommon.getSwalContainer();\n    const backupUrl = container.querySelector('input[name=\"wpstg-backup-url\"]').value;\n    if (dom.checkIfElementNullOrUndefinedOrEmpty(backupUrl)) {\n      dom.notify('error', 'Backup file URL is empty');\n      return false;\n    }\n\n    if (this.isProcessStarted === false) {\n      await this.extractBackupNameFromUrl(backupUrl);\n      this.isWpstgBackupFile = await this.hasWpstgExtension();\n    }\n\n    if (this.currentBackupName === '') {\n      dom.notify('error', 'Please enter a valid backup file url.');\n      return false;\n    }\n\n    if (!this.isWpstgBackupFile) {\n      dom.notify('error', 'Please enter correct backup file url');\n      return false;\n    }\n\n    if (this.isProcessStarted === false) {\n      this.isProcessStarted = true;\n      this.startUploadProcess();\n      this.addEvent();\n    }\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg-backups-download-url',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        backupUrl: backupUrl,\n        fileSize: fileSize,\n        startByte: startByte,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      this.isUploadCompleted = data.complete;\n      if (data.complete === false && data.success) {\n        this.handleInProgressResponse(data);\n        return;\n      }\n\n      this.handleSuccessResponse(data);\n    }).catch((error) => {\n      if (this.isUploadCompleted === false) {\n        this.handleErrorResponse(fileSize, startByte);\n      }\n    });\n  }\n}\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\nimport WpstgBackupUploadUrl from './wpstg-backup-upload-url';\nimport * as dom from '../../modules/wpstg-dom-utils';\n\nlet WPStagingBackupUpload;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupUpload.listen();\n  });\n\n  WPStagingBackupUpload = {\n    isUploading: false,\n    resumable: null,\n    resumableFile: null,\n    wpstgBackupUploadUrl: null,\n    upload: {\n      html: null,\n      successMessage: null,\n    },\n\n    listen() {\n      document.body.addEventListener('click', function(event) {\n        if (event.target.id === 'wpstg-upload-backup') {\n          WPStagingBackupUpload.uploadModal();\n          WPStagingBackupUpload.wpstgBackupUploadUrl = new WpstgBackupUploadUrl();\n        }\n      });\n    },\n\n    /**\n     * @see https://caniuse.com/fileapi\n     */\n    uploadNotSupported() {\n      WPStagingCommon.showErrorModal('Your browser do not support the File API, needed for the uploads. Please try a different/updated browser, or upload the Backup using FTP to the folder <strong>wp-content/uploads/wp-staging/backups</strong>');\n    },\n\n    setModalStateStart() {\n      WPStagingBackupUpload.isUploading = false;\n      dom.qs('.wpstg--swal2-container #wpstg-upload-select').style.display = 'block';\n      dom.qs('.wpstg--swal2-container #wpstg-upload-progress').style.display = 'none';\n      dom.qs('.wpstg--swal2-container .wpstg--modal--backup--upload--content .wpstg-linear-loader').style.display = 'none';\n    },\n\n    setModalStateUploading() {\n      WPStagingBackupUpload.isUploading = true;\n      dom.qs('.wpstg--swal2-container #wpstg-upload-select').style.display = 'none';\n      dom.qs('.wpstg--swal2-container #wpstg-upload-progress').style.display = 'block';\n      dom.qs('.wpstg--swal2-container .wpstg--modal--backup--upload--content .wpstg-linear-loader').style.display = 'block';\n      dom.qs('.wpstg--swal2-container .wpstg--modal--upload--process').style.display = 'flex';\n\n      const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n      const btnCancel = _btnCancel.cloneNode(true);\n      _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n\n      btnCancel.addEventListener('click', WPStagingBackupUpload.eventListenerConfirmCancelUpload);\n    },\n\n    eventListenerConfirmCancelUpload() {\n      if (confirm('Do you want to abort the upload?')) {\n        WPStagingBackupUpload.resumable.cancel();\n        WPStagingCommon.closeSwalModal();\n        WPStagingBackupUpload.deleteUnfinishedUploads();\n      }\n    },\n\n    deleteUnfinishedUploads() {\n      WPStagingCommon.ajax({\n        action: 'wpstg--backups--uploads-delete-unfinished',\n        accessToken: wpstg.accessToken,\n        nonce: wpstg.nonce,\n      },\n      function(response) {\n        // no-op\n      },\n      );\n    },\n    async uploadModal() {\n      if (!WPStagingBackupUpload.upload.html || !WPStagingBackupUpload.upload.successMessage || document.getElementById('wpstg--modal--backup--upload')) {\n        const uploadModal = document.getElementById('wpstg--modal--backup--upload');\n        if (uploadModal) {\n          const html = uploadModal.innerHTML;\n          const successMessage = uploadModal.getAttribute('data-uploadSuccessMessage');\n          WPStagingBackupUpload.upload.html = html || null;\n          WPStagingBackupUpload.upload.successMessage = successMessage || null;\n          uploadModal.parentNode.removeChild(uploadModal);\n        }\n      }\n\n      await WPStagingCommon.getSwalModal(true, {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-backup-download-button',\n      }).fire({\n        html: WPStagingBackupUpload.upload.html,\n        showConfirmButton: true,\n        showCloseButton: false,\n        showLoaderOnConfirm: false,\n        showCancelButton: true,\n        focusConfirm: false,\n        confirmButtonText: 'Upload',\n        width: 650,\n        allowEscapeKey: () => {\n          return !WPStagingBackupUpload.isUploading;\n        },\n        allowOutsideClick: () => {\n          return !WPStagingBackupUpload.isUploading;\n        },\n        onRender() {\n          const uploadButton = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg-backup-download-button')[0];\n          const btnUpload = uploadButton.cloneNode(true);\n          uploadButton.parentNode.replaceChild(btnUpload, uploadButton);\n          btnUpload.addEventListener('click', () => {\n            WPStagingBackupUpload.wpstgBackupUploadUrl.uploadBackupFromUrl();\n          });\n\n          WPStagingBackupUpload.deleteUnfinishedUploads();\n          WPStagingBackupUpload.setModalStateStart();\n\n          WPStagingBackupUpload.resumable = new Resumable({\n            target: wpstg.ajaxUrl,\n            chunkSize: wpstg.maxUploadChunkSize,\n            query: {\n              accessToken: wpstg.accessToken,\n              action: 'wpstg--backups--restore--file-upload',\n              uniqueIdentifierSuffix: Math.floor(Math.random() * 99999999),\n            },\n            permanentErrors: [400, 401, 403, 404, 409, 415, 500, 501, 507, 413], // These will STOP the upload. Other errors will retry the chunk.\n            fileType: ['wpstg', wpstg.backupDBExtension],\n            simultaneousUploads: 1,\n            prioritizeFirstAndLastChunk: false,\n            testChunks: false,\n            forceChunkSize: true,\n          });\n          WPStagingBackupUpload.resumable.resumableFile = null;\n\n          if (!WPStagingBackupUpload.resumable.support) {\n            WPStagingCommon.closeSwalModal();\n            WPStagingBackupUpload.uploadNotSupported();\n\n            return;\n          }\n\n          WPStagingBackupUpload.resumable.assignBrowse(dom.qs('.wpstg--swal2-container .resumable-browse'));\n          WPStagingBackupUpload.resumable.assignDrop(dom.qs('.wpstg--swal2-container .resumable-drop'));\n\n          WPStagingBackupUpload.resumable.on('fileAdded', WPStagingBackupUpload.handleFileAdded);\n          WPStagingBackupUpload.resumable.on('fileSuccess', WPStagingBackupUpload.handleFileSuccess);\n          WPStagingBackupUpload.resumable.on('error', WPStagingBackupUpload.handleError);\n          WPStagingBackupUpload.resumable.on('progress', WPStagingBackupUpload.handleProgress);\n        },\n      });\n    },\n\n    handleFileAdded(file) {\n      const uploadButton = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg-backup-download-button')[0];\n      if (uploadButton) {\n        uploadButton.style.display = 'none';\n      }\n\n      WPStagingBackupUpload.setModalStateUploading();\n\n      WPStagingBackupUpload.resumable.resumableFile = file;\n      WPStagingBackupUpload.resumable.upload();\n    },\n\n    handleFileSuccess(file, message) {\n      WPStagingCommon.closeSwalModal();\n      WPStagingCommon.showSuccessModal(WPStagingBackupUpload.upload.successMessage);\n      dom.setLoadingPlaceholder().then(() => dom.loadingPlaceholder());\n      WPStagingBackup.fetchListing();\n    },\n\n    handleProgress() {\n      const percent = Math.floor(WPStagingBackupUpload.resumable.progress() * 100);\n\n      dom.qs('.wpstg--swal2-container .wpstg--modal--upload--progress').style.width = percent + '%';\n      dom.qs('.wpstg--swal2-container .wpstg--modal--upload--progress--title > span').textContent = percent + '%';\n    },\n\n    handleError(message, file) {\n      try {\n        const json = JSON.parse(message);\n\n        if (json.hasOwnProperty('data') && json.data.hasOwnProperty('message')) {\n          if (json.data.hasOwnProperty('isDiskFull') && json.data.isDiskFull) {\n            WPStagingBackupUpload.resumable.cancel();\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal(json.data.message);\n            return;\n          }\n\n          if (json.data.hasOwnProperty('backupFailedValidation') && json.data.backupFailedValidation) {\n            WPStagingBackupUpload.resumable.cancel();\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal(json.data.message);\n            return;\n          }\n\n          if (!json.success) {\n            WPStagingBackupUpload.resumable.cancel();\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal(json.data.message);\n            return;\n          }\n        }\n      } catch (e) {\n        // not a JSON message, no-op\n      }\n\n      // Reduce chunk by 10%, with a minimum of 256kb reduction\n      const reduceChunkBytes = Math.max(256 * 1024, WPStagingBackupUpload.resumable.opts.chunkSize * 0.1);\n\n      WPStagingBackupUpload.resumable.opts.chunkSize = Math.ceil(WPStagingBackupUpload.resumable.opts.chunkSize - reduceChunkBytes);\n\n      if (WPStagingBackupUpload.resumable.opts.chunkSize < 64 * 1024) {\n        WPStagingCommon.closeSwalModal();\n        WPStagingCommon.showErrorModal('We could not upload the backup file, please try uploading it directly using FTP to the folder wp-content/uploads/wp-staging/backups. Please also make sure you have enough free disk space on the server.');\n      }\n\n      WPStagingBackupUpload.deleteUnfinishedUploads();\n\n      // console.log(WPStagingBackupUpload.resumable.opts.chunkSize);\n      WPStagingBackupUpload.resumable.files[0].retry();\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupUpload;\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupDownload;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupDownload.listen();\n  });\n\n  WPStagingBackupDownload = {\n    listen() {\n      $('body')\n          .off('click', '.wpstg--backup--download-modal', WPStagingBackupDownload.clickedDownload)\n          .on('click', '.wpstg--backup--download-modal', WPStagingBackupDownload.clickedDownload);\n    },\n    clickedDownload(e) {\n      WPStagingCommon.resetErrors();\n      e.preventDefault();\n      WPStagingBackup.isCancelled = false;\n\n      WPStagingBackup.modal.download.data.indexFile = this.getAttribute('data-filePath');\n      WPStagingBackupDownload.downloadModal();\n    },\n    renderPart(part, cssSelector) {\n      const html = `<div class=\"wpstg--backups--part\">\n        <h2>${part.name}</h2>\n        <p>File Size: ${part.fileSize}</p>\n        <a download href=\"${part.downloadLink}\">Download</a>\n      </div>`;\n      $(cssSelector).append(html);\n    },\n    downloadModal() {\n      WPStagingCommon.resetErrors();\n\n      const $modal = $('#wpstg--modal--backup--download-modal');\n\n      WPStagingBackup.modal.download.html = $modal.html();\n\n      WPStagingCommon.getSwalModal(false).fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'Cancel',\n        title: 'Download Backup',\n        html: WPStagingBackup.modal.download.html,\n        onRender() {\n          $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').show();\n          $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').hide();\n          $('.wpstg--modal--download--parts-container .wpstg--modal--download--parts').hide();\n          $('.wpstg--modal--download--parts-container .wpstg--modal--download--parts').html('');\n          $('.wpstg--modal--download--parts-container').show();\n\n          WPStagingCommon.ajax(\n              {\n                action: 'wpstg--backups--parts',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                filePath: WPStagingBackup.modal.download.data.indexFile,\n              },\n              function(response) {\n                if (WPStagingBackup.isCancelled) {\n                  return;\n                }\n\n                if (typeof response === 'undefined') {\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').hide();\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').show();\n                  return;\n                }\n\n                if (response.error === true) {\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').hide();\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').show();\n                  return;\n                }\n\n                response.parts.forEach((part) => {\n                  WPStagingBackupDownload.renderPart(part, '.wpstg--modal--download--parts-container .wpstg--modal--download--parts');\n                });\n\n                $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').hide();\n                $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').show();\n                $('.wpstg--modal--download--parts-container .wpstg--modal--download--parts').show();\n              },\n              'json',\n              false,\n              0, // Don't retry upon failure\n              1.25,\n          );\n        },\n      }).then();\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupDownload;\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup.js';\nimport * as dom from '../../modules/wpstg-dom-utils';\n\nlet WPStagingBackupManageSchedules;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupManageSchedules.listen();\n  });\n\n  WPStagingBackupManageSchedules = {\n    listen() {\n      document.body.addEventListener('click', function(event) {\n        if (event.target.id === 'wpstg-manage-backup-schedules') {\n          WPStagingBackupManageSchedules.manageSchedulesModal();\n        }\n      });\n      $('body').on('click', '.wpstg--edit-schedule-basic', WPStagingBackupManageSchedules.showAlertForBasic);\n    },\n    showAlertForBasic(e) {\n      WPStagingCommon.resetErrors();\n      e.preventDefault();\n      alert('Please upgrade to WP Staging Pro to edit existing backup plans. You can delete this plan and create a new one if you want to change it.');\n    },\n    manageSchedulesModal() {\n      WPStagingBackupManageSchedules.fetchSchedules();\n      const loaderElement = document.getElementById('wpstg-backup--manage--schedules-loader');\n\n      if (!loaderElement) {\n        document.getElementById('wpstg--modal--backup--manage--schedules').innerHTML += '<div id=\"wpstg-backup--manage--schedules-loader\" class=\"wpstg-loader show-loader\"></div>';\n      } else {\n        loaderElement.classList.add('show-loader');\n      }\n\n      WPStagingCommon.getSwalModal(false).fire({\n        html: document.getElementById('wpstg--modal--backup--manage--schedules').innerHTML,\n        showConfirmButton: false,\n        showCloseButton: true,\n        showLoaderOnConfirm: false,\n        showCancelButton: true,\n        cancelButtonText: 'Close',\n        confirmButtonText: 'Save',\n        width: 750,\n        allowEscapeKey: true,\n        allowOutsideClick: true,\n      });\n    },\n    fetchSchedules() {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups-fetch-schedules',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          },\n          function(response) {\n            dom.qs('.wpstg--swal2-container #wpstg-backup--manage--schedules-loader').classList.remove('show-loader');\n            dom.qs('.wpstg--swal2-container #wpstg--modal--backup--manage--schedules--content').innerHTML = response.data;\n\n            document.querySelectorAll('.wpstg--swal2-container #wpstg--modal--backup--manage--schedules--content .wpstg--dismiss-schedule').forEach(function(dismissButton) {\n              dismissButton.addEventListener('click', function(event) {\n                if (confirm('Do you really want to delete this schedule?')) {\n                  WPStagingBackupManageSchedules.dismissSchedule(event.target);\n                }\n              });\n            });\n          },\n      );\n    },\n    dismissSchedule(dismissTarget) {\n      const scheduleId = dismissTarget.dataset.scheduleId;\n      dom.setLoadingPlaceholder().then(() => dom.qs('.wpstg--swal2-container #wpstg-backup--manage--schedules-loader').classList.add('show-loader'));\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups-dismiss-schedule',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            scheduleId: scheduleId,\n          },\n          function(response) {\n            if (response.success) {\n              WPStagingBackupManageSchedules.fetchSchedules();\n              WPStagingBackup.fetchListing();\n              WPStagingBackup.modal.create.hasBackupSchedule = false;\n            } else {\n              WPStagingCommon.showErrorModal(response.data);\n              return;\n            }\n          },\n      );\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupManageSchedules;\n"],"names":["wpstgHoverIntent","parent","selector","onOver","onOut","x","y","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","e","clientX","clientY","compare","el","clearTimeout","Math","abs","undefined","setTimeout","dispatchOver","removeEventListener","addEventListener","this","onMouseOver","event","target","matches","closest","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","Object","assign","remove","WpstgDetectMemoryExhaust","wpstgObject","wpstg","prototype","sendRequest","_sendRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestType","response","data","wrap","_context","prev","next","fetch","ajaxUrl","method","credentials","body","URLSearchParams","action","accessToken","nonce","headers","sent","json","status","error","abrupt","console","warn","message","t0","i18n","stop","_x","apply","arguments","WPStagingCommon","$","continueErrorHandle","retry","currentDelay","count","max","maxFailedRetries","retryOnErrors","performingRequest","incrementRetry","incrementRatio","canRetry","reset","memoryExhaustArticleLink","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","checkMemoryExhaustion","detectMemoryExhaust","listenTooltip","document","querySelector","style","visibility","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","icon","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","hasOwnProperty","success","Array","length","shift","isLoading","show","hide","slugify","url","toString","toLowerCase","normalize","replace","sanitizeEventAttribute","string","htmlEntityQuotesDecode","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","ok","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","type","xhr","textStatus","errorThrown","log","errorCode","statusCode","jQuery","runtime","exports","Op","hasOwn","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","done","methodName","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","iterable","iteratorMethod","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","qs","querySelectorAll","element","display","copyTextToClipboard","dataCopyContent","getAttribute","navigator","clipboard","writeText","notify","Notyf","duration","position","dismissible","types","background","open","loadingPlaceholder","loader","hideLoadingBar","container","showLoadingBar","overflow","setLoadingPlaceholder","_setLoadingPlaceholder","loadingPlaceholderContainer","loadingWrapper","_loadingWrapper$query","_loadingWrapper$query2","_loadingWrapper$first","_loadingWrapper$lastE","offsetHeight","line","insertAdjacentHTML","firstElementChild","classList","add","lastElementChild","Element","msMatchesSelector","webkitMatchesSelector","s","parentElement","parentNode","nodeType","WPStagingBackup","WpstgContactUs","modalType","characters","currentDate","init","_proto","contactUsModal","askInTheForumForm","contactUsSuccessPopup","contactUsLoader","contactUsSupport","contactUsButton","contactUsButtonBackupTab","reportIssueButton","successForm","contactUsReportIssueBtn","contactUsCloseButton","contactUsSuccessPopupClose","debugCodeCopyButton","contactUsResponse","contactUsDebugCodeField","isDebugWindowOpened","addEvents","notyf","_this","dom","sendDebugInfo","copyDebugCode","select","setSelectionRange","generateDebugCode","floor","random","getHours","getMinutes","getSeconds","_this2","disabled","debugCode","wpstgReAuth","WpstgReAuth","tempHidden","tempHiddenTimeout","shows","getElementById","formElement","wrapElement","noFrameElement","iframeElement","isIframeLoaded","addUnloadEvent","createIframeElement","appendChild","openModal","focusIframe","setIframeLoadTimeout","focusFallbackElement","returnValue","createElement","id","border","textContent","onload","handleIframeLoad","src","dataset","height","contentDocument","er","handleIframeLoadError","contains","maxHeight","focus","opacity","transitionProperty","transitionDuration","removeProperty","wpstgAuthCheck","checkUserAuthentication","WpstgAuthCheck","isAuthenticated","start","resetCount","_checkUserAuthentication","wpAuthCheck","createAuthCheckElements","redirectUrl","wpAuthCheckWrap","wpAuthCheckBg","wpAuthCheckDialog","wpAuthCheckForm","wpAuthCheckFallback","wpAuthCheckExpired","innerHTML","wpAuthCheckLoginLink","wpAuthCheckCloseButton","append","backupTab","minHeight","fetchListing","res","evt","handler","ul","corruptedBackups","multiPartBackups","toggle","stopImmediatePropagation","WPStagingBackupCreate","WPStagingBackupDelete","WPStagingBackupEdit","WPStagingBackupRestore","WPStagingBackup$1","performingCancelRequest","isBackupSlowerThanUsual","isBackupSpeedModalDisplayed","isCancelled","isFinished","processInfo","isOnlySchedule","modal","confirmBtnTxt","hasBackupSchedule","process","cancelBtnTxt","download","indexFile","files","upload","retryCount","file","restore","btnTxtNext","btnTxtConfirm","btnTxtCancel","searchReplaceForm","containerIntroduction","fileObject","search","backupMetadata","baseDirectory","messages","WARNING","ERROR","INFO","DEBUG","CRITICAL","all","critical","warning","debug","shouldWarn","countByType","addMessage","isArray","item","totalSeconds","setInterval","seconds","toISOString","substr","clearInterval","hasResponse","reTryAfter","isResetErrors","empty","dispatchEvent","Event","cancel","extraParams","showCloseButton","showLoaderOnConfirm","allowEscapeKey","allowOutsideClick","width","onRender","sendCancelRequest","isInit","jobIdBeingCancelled","isRunning","execute","onResponse","$modal","btnTxt","attr","off","on","showLogsInModal","isShowCancelButton","content","_btnCancel","getElementsByClassName","btnCancel","cloneNode","replaceChild","confirm","onAfterClose","processResponse","$container","statusTitle","find","percentage","addResponseMessagesToLog","job_done","job","calculateBackupSpeedIndex","backupSize","CustomEvent","logsModal","$logsContainer","$errorContainer","$translations","before","warnings","_step","_iterator","_createForOfIteratorHelperLoose","msgClass","includes","date","onOpen","scrollTop","scrollHeight","_step3","stoppingTypes","_step2","_iterator2","detail","_iterator3","is","$btnShowLogs","downloadModal","_ref","_ref$title","_ref$bodyText","bodyText","$el","confirmButtonText","wpstgRateUsElement","helpContent","isPro","statusStop","statusStart","currentStatusTitle","logsContainer","pElement","className","$logs","logBtn","preventDefault","hideLogs","childNodes","showLogs","size","totalTime","time","reportModal","listen","clickedBackup","warnBackupMediaWithoutDatabase","disableBackupButtonIfNoSelection","$newBackupModal","_yield$WPStagingCommo","formValues","focusConfirm","preConfirm","checked","storages","storage","selectedStorages","isExportingPlugins","isExportingMuPlugins","isExportingThemes","isExportingUploads","isExportingOtherWpContentFiles","isExportingDatabase","repeatBackupOnSchedule","scheduleRecurrence","scheduleTime","scheduleRotation","isCreateScheduleBackupNow","backupType","isSmartExclusion","isExcludingSpamComments","isExcludingPostRevision","isExcludingDeactivatedPlugins","isExcludingUnusedThemes","isExcludingLogs","isExcludingCaches","prepareBackup","wpstgBackupData","createBackup","shouldCleanUp","responseJSON","maxBackupSequentialReturnError","backupReturnedError","_callee2","_context2","delayReq","jobStatus","backupMd5","click","timesWaited","intervalWaitForBackupInDom","isLocalBackup","backupFound","isMultipartBackup","md5","JSON","stringify","currentTarget","isExportingMediaLibrary","isStorageSelected","from","isExportingAnyDir","isExportingOtherFilesInWpContent","delete","_delete","edit","$this","notes","clickedRestore","currentObj","checkUserDbPermissions","selectedBackup","responseData","mainNetwork","parse","networks","blogs","postData","FormData","importModal","prop","confirmHtml","importSiteBackup","retryRequest","logEntries","issueFound","loginText","onClose","location","reload","loginUrl","code","URL","searchParams","set","isCreatedOnWordPressCom","href","_ref2","_callee3","_context3","_x2","_x3","_x4","progressSteps","queue","first","singleOrMulti","wpstgRestoreData","WPStagingBackupUpload","WpstgBackupUploadUrl","currentBackupName","uploadProcessPercentage","isUploadCompleted","isUploadCanceled","isProcessStarted","isWpstgBackupFile","uploadBackupFromUrl","bind","startUploadProcess","stopUploadProcess","updateUploadProcess","hasWpstgExtension","endsWith","extractBackupNameFromUrl","backupUrl","pathname","split","handleSuccessResponse","handleInProgressResponse","round","startByte","fileSize","handleErrorResponse","addEvent","handleCancelProcess","resumeDownload","deleteUnfinishedUploads","_uploadBackupFromUrl","_this3","trim","WPStagingBackupDownload","WPStagingBackupManageSchedules","WPStagingBackupUpload$1","isUploading","resumable","resumableFile","wpstgBackupUploadUrl","successMessage","uploadModal","uploadNotSupported","setModalStateStart","setModalStateUploading","eventListenerConfirmCancelUpload","removeChild","uploadButton","btnUpload","Resumable","chunkSize","maxUploadChunkSize","query","uniqueIdentifierSuffix","permanentErrors","fileType","backupDBExtension","simultaneousUploads","prioritizeFirstAndLastChunk","testChunks","forceChunkSize","support","assignBrowse","assignDrop","handleFileAdded","handleFileSuccess","handleError","handleProgress","percent","progress","isDiskFull","backupFailedValidation","reduceChunkBytes","opts","ceil","clickedDownload","renderPart","part","cssSelector","downloadLink","filePath","parts","manageSchedulesModal","showAlertForBasic","alert","fetchSchedules","loaderElement","dismissButton","dismissSchedule","dismissTarget","scheduleId"],"mappings":"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"}