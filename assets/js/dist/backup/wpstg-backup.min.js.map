{"version":3,"file":"wpstg-backup.min.js","sources":["../../src/modules/wpstg-hover-intent.js","../../src/wpstg.js","../../../node_modules/regenerator-runtime/runtime.js","../../src/modules/wpstg-dom-utils.js","../../src/modules/wpstg-polyfill.js","../../src/modules/wpstg-detect-memory-exhaust.js","../../src/backup/modules/wpstg-backup.js","../../src/modules/wpstg-sidebar-menu.js","../../src/modules/wpstg-contact-us.js","../../src/backup/modules/wpstg-backup-create.js","../../src/backup/modules/wpstg-backup-delete.js","../../src/backup/modules/wpstg-backup-edit.js","../../src/backup/modules/wpstg-backup-restore.js","../../src/backup/modules/wpstg-backup-upload.js","../../src/backup/modules/wpstg-backup-download.js","../../src/backup/modules/wpstg-backup-manage-schedules.js"],"sourcesContent":["'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    retry: {\n      currentDelay: 0,\n      count: 0,\n      max: 10,\n      retryOnErrors: [401, 403, 404, 429, 502, 503, 504],\n      performingRequest: false,\n      incrementRetry: function(incrementRatio = 1.25) {\n        WPStagingCommon.retry.performingRequest = true;\n        if (WPStagingCommon.retry.currentDelay === 0) {\n          // start with a delay of 1sec\n          WPStagingCommon.retry.currentDelay = 1000;\n          WPStagingCommon.retry.count = 1;\n        }\n\n        WPStagingCommon.retry.currentDelay += (500 * WPStagingCommon.retry.count * incrementRatio);\n        WPStagingCommon.retry.count++;\n      },\n      canRetry: function() {\n        return WPStagingCommon.retry.count < WPStagingCommon.retry.max;\n      },\n      reset: function() {\n        WPStagingCommon.retry.currentDelay = 0;\n        WPStagingCommon.retry.count = 0;\n        WPStagingCommon.retry.performingRequest = false;\n      },\n    },\n    memoryExhaustArticleLink: 'https://wp-staging.com/docs/php-fatal-error-allowed-memory-size-of-134217728-bytes-exhausted/',\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      // If retry request no need to show Error;\n      if (WPStagingCommon.retry.performingRequest) {\n        return;\n      }\n\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method;\n    var method = delegate.iterator[methodName];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method, or a missing .next mehtod, always terminate the\n      // yield* loop.\n      context.delegate = null;\n\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n      if (methodName !== \"return\") {\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a '\" + methodName + \"' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import {closest} from './wpstg-polyfill';\nimport WPStagingCommon from '../wpstg.js';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getPreviousSibling(element, selector) {\n  let sibling = element.previousElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.previousElementSibling;\n  }\n}\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n\n/**\n * Toggle target element set in data-wpstg-target of the given element\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleToggleElement(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.classList.toggle(hiddenClass);\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-copy to element(s) in data-wpstg-target\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyPaste(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target') || !element.getAttribute('data-wpstg-copy')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  navigator.clipboard.writeText(element.getAttribute('data-wpstg-copy'));\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.value = element.getAttribute('data-wpstg-copy', '');\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-source to clipboard\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyToClipboard(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-source')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const el = container.querySelector(element.getAttribute('data-wpstg-source'));\n\n  if (el) {\n    navigator.clipboard.writeText(el.value);\n  }\n}\n\n/**\n * A confirmation modal\n *\n * @param title\n * @param html\n * @param confirmText\n * @param confirmButtonClass\n * @return Promise\n */\nexport function confirmModal(title, html, confirmText, confirmButtonClass) {\n  return WPStagingCommon.getSwalModal(false, {\n    container: 'wpstg-swal-push-container',\n    confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n  }).fire({\n    title: title,\n    icon: 'warning',\n    html: html,\n    width: '750px',\n    focusConfirm: false,\n    confirmButtonText: confirmText,\n    showCancelButton: true,\n  });\n};\n\n/**\n * @param className\n * @param callback\n */\nexport function setClickHandlerByClass(className, callback) {\n  const elements = document.querySelectorAll(`.${className}`);\n\n  if (elements.length) {\n    elements.forEach((element) => {\n      element.addEventListener('click', callback);\n    });\n  } else {\n    console.warn(`No elements found with class: ${className}`);\n  }\n};\n\n/**\n * Initializes a module using a MutationObserver.\n *\n * @param {string} selector - The CSS selector for the target element.\n * @param {function} ModuleConstructor - The constructor function of the module to be initialized.\n */\nexport function initializeModuleWithObserver(selector, ModuleConstructor) {\n  const observer = new MutationObserver(function(mutationsList, observer) {\n    const targetElement = document.querySelector(selector);\n    if (targetElement !== null) {\n      new ModuleConstructor();\n      observer.disconnect();\n    }\n  });\n  observer.observe(document.documentElement, {childList: true, subtree: true});\n};\n\n/**\n * Checks if a modal specified by the given selector is available in the DOM.\n * If the modal is available, it waits for a delay and then initializes the Module.\n * If the modal is not yet available, it recursively checks after a brief interval.\n *\n * @param {string} selector - CSS selector for the element to search for.\n * @param {function} Module - Constructor function to create an instance of the module.\n */\nexport function initializeModuleDelayedIfElementIsAvailable(selector, Module) {\n  const element = document.querySelector(selector);\n  if (element) {\n    setTimeout(() => {\n      new Module();\n    }, 1000);\n  } else {\n    setTimeout(() => initializeModuleDelayedIfElementIsAvailable(selector, Module), 10);\n  }\n}\n","/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","/**\n * Detect memory exhaustion and show warning.\n */\nexport default class WpstgDetectMemoryExhaust {\n  constructor(\n      wpstgObject = wpstg,\n  ) {\n    this.wpstgObject = wpstgObject;\n  }\n\n  sendRequest(requestType, callback = null) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg--detect-memory-exhaust',\n        requestType: requestType,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if ('undefined' !== typeof (data.status) && data.status) {\n        if (data.error && typeof callback === 'function') {\n          callback(data.data, data.message);\n        }\n\n        return;\n      }\n\n      console.warn(data.message);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import WPStagingCommon from '../../wpstg.js';\nimport * as dom from '../../modules/wpstg-dom-utils.js';\nimport 'regenerator-runtime/runtime';\nimport WpstgDetectMemoryExhaust from '../../modules/wpstg-detect-memory-exhaust.js';\nimport WpstgSidebarMenu from '../../modules/wpstg-sidebar-menu.js';\nimport WpstgContactUs from '../../modules/wpstg-contact-us';\n\n\nlet WPStagingBackup;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackup.fetchListing();\n    new WpstgSidebarMenu();\n    dom.initializeModuleDelayedIfElementIsAvailable('#wpstg-contact-us-modal', WpstgContactUs);\n  });\n\n  window.addEventListener('backupListingFinished', function() {\n    fetch(`${ajaxurl}?action=wpstg--backups--restore--file-list&_=${Math.random()}&withTemplate=true`, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg--backups--restore--file-list',\n        accessToken: wpstg.accessToken,\n        nonce: wpstg.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then(WPStagingCommon.handleFetchErrors)\n        .then((res) => res.json())\n        .then((res) => {\n          if (res.success !== undefined && res.success === false) {\n            WPStagingCommon.showError('Error: ' + res.data);\n          }\n          const $ul = $('.wpstg-backup-list ul');\n          $ul.empty();\n          $ul.html(res);\n          dom.addEvent(dom.qs('#wpstg-existing-backups'), 'click', '.wpstg-tab-header', (el, event) => {\n            const target = dom.qs(el.getAttribute('data-id'));\n            el.classList.toggle('expand');\n            if (el.classList.contains('expand')) {\n              el.querySelector('span').classList.add('wpstg-rotate-90');\n              dom.slideDown(target);\n            } else {\n              el.querySelector('span').classList.remove('wpstg-rotate-90');\n              dom.slideUp(target);\n            }\n            event.stopImmediatePropagation();\n          });\n        })\n        .catch((e) => WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.'))\n    ;\n  });\n\n  window.addEventListener('finishedProcess', function() {\n    window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n  });\n\n  window.addEventListener('finishedProcessWithError', function() {\n    window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n  });\n\n  WPStagingBackup = {\n    performingCancelRequest: false,\n    isCancelled: false,\n    isFinished: false,\n    processInfo: {\n      title: null,\n      interval: null,\n      isOnlySchedule: false,\n    },\n    modal: {\n      create: {\n        html: null,\n        confirmBtnTxt: null,\n        hasBackupSchedule: null,\n      },\n      process: {\n        html: null,\n        cancelBtnTxt: null,\n        modal: null,\n      },\n      download: {\n        html: null,\n        data: {\n          indexFile: null,\n          files: [],\n        },\n      },\n      restore: {\n        html: null,\n        btnTxtNext: null,\n        btnTxtConfirm: null,\n        btnTxtCancel: null,\n        searchReplaceForm: null,\n        containerIntroduction: null,\n        data: {\n          file: null, // file path\n          fileObject: null, // JS \"File\" class instance\n          search: [],\n          replace: [],\n          backupMetadata: {},\n        },\n        baseDirectory: null,\n      },\n    },\n    messages: {\n      WARNING: 'warning',\n      ERROR: 'error',\n      INFO: 'info',\n      DEBUG: 'debug',\n      CRITICAL: 'critical',\n      data: {\n        all: [],\n        info: [],\n        error: [],\n        critical: [],\n        warning: [],\n        debug: [],\n      },\n      shouldWarn() {\n        return WPStagingBackup.messages.data.error.length > 0 ||\n        WPStagingBackup.messages.data.critical.length > 0\n        ;\n      },\n      countByType(type = WPStagingBackup.messages.ERROR) {\n        return WPStagingBackup.messages.data[type].length;\n      },\n      addMessage(message) {\n        if (Array.isArray(message)) {\n          message.forEach((item) => {\n            WPStagingBackup.messages.addMessage(item);\n          });\n          return;\n        }\n        const type = message.type.toLowerCase() || 'info';\n        if (!WPStagingBackup.messages.data[type]) {\n          WPStagingBackup.messages.data[type] = [];\n        }\n        WPStagingBackup.messages.data.all.push(message); // TODO RPoC\n        WPStagingBackup.messages.data[type].push(message);\n      },\n      reset() {\n        WPStagingBackup.messages.data = {\n          all: [],\n          info: [],\n          error: [],\n          critical: [],\n          warning: [],\n          debug: [],\n        };\n      },\n    },\n    timer: {\n      totalSeconds: 0,\n      interval: null,\n      start() {\n        if (null !== WPStagingBackup.timer.interval) {\n          return;\n        }\n\n        const prettify = (seconds) => {\n          // If potentially anything can exceed 24h execution time than that;\n          // const _seconds = parseInt(seconds, 10)\n          // const hours = Math.floor(_seconds / 3600)\n          // const minutes = Math.floor(_seconds / 60) % 60\n          // seconds = _seconds % 60\n          //\n          // return [hours, minutes, seconds]\n          //   .map(v => v < 10 ? '0' + v : v)\n          //   .filter((v,i) => v !== '00' || i > 0)\n          //   .join(':')\n          // ;\n          // Are we sure we won't create anything that exceeds 24h execution time? If not then this;\n          return `${(new Date(seconds * 1000)).toISOString().substr(11, 8)}`;\n        };\n\n        WPStagingBackup.timer.interval = setInterval(() => {\n          $('.wpstg--modal--process--elapsed-time').text(prettify(WPStagingBackup.timer.totalSeconds));\n          WPStagingBackup.timer.totalSeconds++;\n        }, 1000);\n      },\n      stop() {\n        WPStagingBackup.timer.totalSeconds = 0;\n        if (WPStagingBackup.timer.interval) {\n          clearInterval(WPStagingBackup.timer.interval);\n          WPStagingBackup.timer.interval = null;\n        }\n      },\n    },\n    status: {\n      hasResponse: null,\n      reTryAfter: 5000,\n    },\n    fetchListing(isResetErrors = true) {\n      WPStagingCommon.isLoading(true);\n\n      $('#backup-messages').text('');\n\n      if (isResetErrors) {\n        WPStagingCommon.resetErrors();\n      }\n\n      return fetch(`${ajaxurl}?action=wpstg--backups--listing&_=${Math.random()}`, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: 'wpstg--backups--listing',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      }).then(WPStagingCommon.handleFetchErrors)\n          .then((res) => res.json())\n          .then((res) => {\n            WPStagingCommon.cache.get('#wpstg--tab--backup').html(res);\n            if (res.success !== undefined && res.success === false) {\n              WPStagingCommon.showError('Error: ' + res.data);\n              return;\n            }\n            WPStagingCommon.showAjaxFatalError(res, '', 'Submit an error report.');\n            WPStagingCommon.isLoading(false);\n            window.dispatchEvent(new Event('backupListingFinished'));\n            return res;\n          })\n          .catch((e) => WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.'))\n      ;\n    },\n    /**\n     * The cancel & cleanup process when we cancel a backup job or when a backup job is stopped due to an error.\n     *\n     * @param {Object} extraParams Extra parameter to send during cancel process\n     * @param {CallableFunction} callback This function is called when a backup cancel/cleanup process response is returned. This callback is always called even if cancel process fails.\n     */\n    cancel(extraParams = {}, callback = null) {\n      WPStagingBackup.timer.stop();\n      clearInterval(WPStagingBackup.processInfo.interval);\n      WPStagingBackup.isCancelled = true;\n      WPStagingBackup.processInfo.interval = null;\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      WPStagingCommon.closeSwalModal();\n\n      WPStagingCommon.getSwalModal(true).fire({\n        title: 'Cancelling & Cleaning up',\n        text: 'This modal will close automatically when done...',\n        icon: 'info',\n        showConfirmButton: false,\n        showCloseButton: false,\n        showLoaderOnConfirm: false,\n        showCancelButton: false,\n        allowEscapeKey: false,\n        allowOutsideClick: false,\n        width: 650,\n        onRender() {\n          WPStagingBackup.sendCancelRequest(\n              Object.assign({\n                isInit: 'yes',\n              }, extraParams),\n              callback,\n          );\n        },\n      });\n    },\n    sendCancelRequest(extraParams, callback) {\n      if (WPStagingBackup.performingCancelRequest) {\n        return;\n      }\n\n      WPStagingBackup.performingCancelRequest = true;\n\n      WPStagingCommon.ajax(\n          Object.assign({\n            action: 'wpstg--backups--cancel',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            jobIdBeingCancelled: WPStagingCommon.getJobId(),\n          }, extraParams),\n          function(response) {\n            WPStagingBackup.performingCancelRequest = false;\n            WPStagingBackup.isCancelled = false;\n            WPStagingCommon.showAjaxFatalError(response, '', 'Submit an error report.');\n\n            if (!response.hasOwnProperty('isRunning')) {\n              WPStagingCommon.showErrorModal('Cancel process did not finish gracefully. Some temporary files might not have been cleaned up.');\n            }\n\n            if (response.isRunning === true) {\n              WPStagingCommon.closeSwalModal();\n              if (callback !== undefined && callback !== null) {\n                callback();\n              }\n            } else {\n              extraParams.isInit = 'no';\n              WPStagingBackup.sendCancelRequest(extraParams, callback);\n            }\n          },\n          'json',\n          false,\n          10, // Don't retry upon failure\n          1.25,\n          function(xhr, textStatus, errorThrown) {\n            WPStagingBackup.performingCancelRequest = false;\n\n            // Todo: Why do we need this?\n            WPStagingCommon.continueErrorHandle = false;\n\n            // Resource is busy, wait for request to finish and try again\n            if (xhr.status === 423) {\n              setTimeout(function() {\n                WPStagingBackup.sendCancelRequest(extraParams, callback);\n              }, 1000);\n              return;\n            }\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal('Cancel process did not finish gracefully. Some temporary files might not have been cleaned up.');\n            if (callback !== undefined && callback !== null) {\n              callback();\n            }\n          },\n      );\n    },\n    /**\n   * If process.execute exists, process.data and process.onResponse is not used\n   * process = { data: {}, onResponse: (resp) => {}, onAfterClose: () => {}, execute: () => {}, isShowCancelButton: bool }\n   * @param {object} process\n   */\n    process(process) {\n      if (typeof process.execute !== 'function' && (!process.data || !process.onResponse)) {\n        WPStagingCommon.closeSwalModal();\n        WPStagingCommon.showError('process.data and / or process.onResponse is not set');\n        return;\n      }\n\n      // TODO move to backend and get the contents as xhr response?\n      if (!WPStagingBackup.modal.process.html || !WPStagingBackup.modal.process.cancelBtnTxt) {\n        const $modal = $('#wpstg--modal--backup--process');\n        const html = $modal.html();\n        const btnTxt = $modal.attr('data-cancelButtonText');\n        WPStagingBackup.modal.process.html = html || null;\n        WPStagingBackup.modal.process.cancelBtnTxt = btnTxt || null;\n        $modal.remove();\n      }\n\n      $('body')\n          .off('click', '.wpstg--modal--process--logs--tail')\n          .on('click', '.wpstg--modal--process--logs--tail', function(e) {\n            const logBtn = $(this);\n            e.preventDefault();\n            const container = WPStagingCommon.getSwalContainer();\n            const $logs = $(container).find('.wpstg--modal--process--logs');\n            $logs.toggle();\n            if ($logs.is(':visible')) {\n              logBtn.text(wpstg.i18n.hideLogs);\n              container.childNodes[0].style.width = '97%';\n              container.style['z-index'] = 9999;\n            } else {\n              logBtn.text(wpstg.i18n.showLogs);\n              container.childNodes[0].style.width = '600px';\n            }\n          })\n      ;\n\n      process.isShowCancelButton = false !== process.isShowCancelButton;\n\n      WPStagingBackup.modal.process.modal = WPStagingCommon.getSwalModal(true, {\n        content: 'wpstg--process--content',\n      }).fire({\n        html: WPStagingBackup.modal.process.html,\n        cancelButtonText: WPStagingBackup.modal.process.cancelBtnTxt,\n        showCancelButton: process.isShowCancelButton,\n        showConfirmButton: false,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        width: 600,\n        onRender: () => {\n          const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n          const btnCancel = _btnCancel.cloneNode(true);\n          _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n\n          btnCancel.addEventListener('click', function(e) {\n            if (confirm('Do you want to cancel the process?')) {\n              WPStagingBackup.cancel();\n            }\n          });\n\n          if (typeof process.execute === 'function') {\n            process.execute();\n            return;\n          }\n\n          if (!process.data || !process.onResponse) {\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showError('process.data and / or process.onResponse is not set');\n            return;\n          }\n\n          WPStagingCommon.ajax(process.data, process.onResponse);\n        },\n        onAfterClose: () => typeof process.onAfterClose === 'function' && process.onAfterClose(),\n      });\n    },\n    processResponse(response) {\n      if (response === null) {\n        WPStagingCommon.closeSwalModal();\n        WPStagingCommon.showError('Invalid Response; null');\n        throw new Error(`Invalid Response; ${response}`);\n      }\n\n      const $container = $(WPStagingCommon.getSwalContainer());\n      const title = () => {\n        if ((response.title || response.statusTitle)) {\n          $container.find('.wpstg--modal--process--title').text(response.title || response.statusTitle);\n        }\n      };\n      const percentage = () => {\n        if (response.percentage) {\n          $container.find('.wpstg--modal--process--percent').text(response.percentage);\n        }\n      };\n      const logs = () => {\n        if (!response.messages) {\n          return;\n        }\n        const $logsContainer = $container.find('.wpstg--modal--process--logs');\n        const stoppingTypes = [\n          WPStagingBackup.messages.ERROR,\n          WPStagingBackup.messages.CRITICAL,\n        ];\n        const appendMessage = (message) => {\n          if (Array.isArray(message)) {\n            for (const item of message) {\n              appendMessage(item);\n            }\n            return;\n          }\n          const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n          $logsContainer.append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`);\n\n          if (stoppingTypes.includes(message.type.toLowerCase())) {\n            window.dispatchEvent(new CustomEvent('finishedProcessWithError', {\n              detail: {\n                error: message.message,\n              },\n            }));\n            // Callback approach is used to make sure the logs modal is always shown,\n            // after the completion of cancel/cleanup process.\n            // Makes sure cancel/cleanup process doesn't close the logs modal.\n            // Any other approach would have required a lot of refactoring.\n            WPStagingBackup.cancel({}, function() {\n              setTimeout(WPStagingBackup.logsModal, 500);\n            });\n          }\n        };\n        for (const message of response.messages) {\n          if (!message) {\n            continue;\n          }\n          WPStagingBackup.messages.addMessage(message);\n          appendMessage(message);\n        }\n\n        if ($logsContainer.is(':visible')) {\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        }\n\n        if (!WPStagingBackup.messages.shouldWarn()) {\n          return;\n        }\n\n        const $btnShowLogs = $container.find('.wpstg--modal--process--logs--tail');\n        $btnShowLogs.html($btnShowLogs.attr('data-txt-bad'));\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--critical-count')\n            .text(WPStagingBackup.messages.countByType(WPStagingBackup.messages.CRITICAL))\n        ;\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--error-count')\n            .text(WPStagingBackup.messages.countByType(WPStagingBackup.messages.ERROR))\n        ;\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--warning-count')\n            .text(WPStagingBackup.messages.countByType(WPStagingBackup.messages.WARNING))\n        ;\n      };\n\n      title();\n      percentage();\n      logs();\n\n      if (response.jobId) {\n        WPStagingCommon.setJobId(response.jobId);\n      }\n\n      if (response.isRunning === true && response.job_done === true) {\n        WPStagingBackup.timer.stop();\n        WPStagingBackup.isCancelled = true;\n        // For other classes that require 'status'\n        response.status = response.isRunning;\n        window.dispatchEvent(new CustomEvent('finishedProcess', {\n          response: response,\n        }));\n      }\n    },\n    logsModal() {\n      WPStagingCommon.getSwalModal(true, {\n        popup: 'wpstg-swal-popup centered-modal',\n      }).fire({\n        html: `<div class=\"wpstg--modal--error--logs\" style=\"display:block\"></div><div class=\"wpstg--modal--process--logs\" style=\"display:block\"></div>`,\n        width: '97%',\n        onRender: () => {\n          const $container = $(WPStagingCommon.getSwalContainer());\n          $container[0].style['z-index'] = 9999;\n\n          const $logsContainer = $container.find('.wpstg--modal--process--logs');\n          const $errorContainer = $container.find('.wpstg--modal--error--logs');\n          const $translations = $('#wpstg--js--translations');\n          const messages = WPStagingBackup.messages;\n          const title = $translations.attr('data-modal-logs-title')\n              .replace('{critical}', messages.countByType(messages.CRITICAL))\n              .replace('{errors}', messages.countByType(messages.ERROR))\n              .replace('{warnings}', messages.countByType(messages.WARNING))\n        ;\n\n          $errorContainer.before(`<h3>${title}</h3>`);\n          const warnings = [\n            WPStagingBackup.messages.CRITICAL,\n            WPStagingBackup.messages.ERROR,\n            WPStagingBackup.messages.WARNING,\n          ];\n\n          if (!WPStagingBackup.messages.shouldWarn()) {\n            $errorContainer.hide();\n          }\n\n          for (const message of messages.data.all) {\n            const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n\n            if (warnings.includes(message.type)) {\n              $errorContainer.append(\n                  `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n              );\n            }\n            $logsContainer.append(\n                `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n            );\n          }\n        },\n        onOpen: (container) => {\n          const $logsContainer = $(container).find('.wpstg--modal--process--logs');\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        },\n      });\n    },\n    downloadModal({title = null, bodyText = null}) {\n      if (null === WPStagingBackup.modal.download.html) {\n        const $el = $('#wpstg--modal--backup--download');\n        WPStagingBackup.modal.download.html = $el.html();\n        $el.remove();\n      }\n\n      WPStagingCommon.getSwalModal(true).fire({\n        'icon': 'success',\n        'html': WPStagingBackup.modal.download.html.replace('{title}', title).replace('{btnTxtLog}', '<span style=\"text-decoration: underline\">Show Logs</span>').replace('{text}', bodyText !== null ? bodyText : 'You can restore this backup anytime or upload it to another website and restore it there.'),\n        'confirmButtonText': 'Close',\n        'showCancelButton': false,\n        'showConfirmButton': true,\n      });\n    },\n    checkMemoryExhaustion(response, requestType) {\n      const detectMemoryExhaust = new WpstgDetectMemoryExhaust();\n      detectMemoryExhaust.sendRequest(requestType, function(data, message) {\n        response.messages = [{\n          'type': 'critical',\n          'date': data['time'],\n          'message': message + '. Visit <a target=\"_blank\" href=\"' + WPStagingCommon.memoryExhaustArticleLink + '\">this article</a> for more detail. Please contact WP Staging support if you need help.',\n        }];\n\n        WPStagingBackup.processResponse(response);\n      });\n    },\n    statusStop() {\n      clearInterval(WPStagingBackup.processInfo.interval);\n      WPStagingBackup.processInfo.interval = null;\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n    },\n    statusStart(process) {\n      if (WPStagingBackup.processInfo.interval !== null) {\n        return;\n      }\n      WPStagingBackup.processInfo.interval = setInterval(() => {\n        if (true === WPStagingBackup.isCancelled) {\n          WPStagingBackup.statusStop();\n          return;\n        }\n\n        if (WPStagingBackup.status.hasResponse === false) {\n          return;\n        }\n\n        WPStagingBackup.status.hasResponse = false;\n        fetch(`${ajaxurl}?action=wpstg--backups--status&${process}=restore`, {\n          method: 'POST',\n          credentials: 'same-origin',\n          body: new URLSearchParams({\n            action: 'wpstg--backups--status',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          }),\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n          },\n        }).then((res) => res.json())\n            .then((res) => {\n              WPStagingBackup.status.hasResponse = true;\n              if (typeof res === 'undefined') {\n                WPStagingBackup.statusStop();\n              }\n\n              if (WPStagingBackup.processInfo.title === res.currentStatusTitle) {\n                return;\n              }\n\n              WPStagingBackup.processInfo.title = res.currentStatusTitle;\n              const $container = $(WPStagingCommon.getSwalContainer());\n              $container.find('.wpstg--modal--process--title').text(res.currentStatusTitle);\n              $container.find('.wpstg--modal--process--percent').text('0');\n            })\n            .catch((e) => {\n              WPStagingBackup.status.hasResponse = true;\n              WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.');\n            })\n        ;\n      }, 5000);\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackup;\n","/**\n * Enable side bar menu and set url on tab click\n */\nexport default class WpstgSidebarMenu {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.wpstdStagingTab = document.querySelector('#wpstg--tab--toggle--staging');\n    this.wpstdBackupTab = document.querySelector('#wpstg--tab--toggle--backup');\n    this.wpstdSidebarMenu = document.querySelector('#toplevel_page_wpstg_clone');\n    this.addEvents();\n  }\n\n  addEvents() {\n    if (this.wpstdStagingTab !== null) {\n      this.wpstdStagingTab.addEventListener('click', () => {\n        this.setPageUrl('wpstg_clone');\n        this.setSidebarMenu('wpstg_clone');\n      });\n    }\n\n    if (this.wpstdBackupTab !== null) {\n      this.wpstdBackupTab.addEventListener('click', () => {\n        this.setPageUrl('wpstg_backup');\n        this.setSidebarMenu('wpstg_backup');\n      });\n    }\n  }\n\n  setPageUrl(page) {\n    window.history.pushState(null, null, window.location.pathname + '?page=' + page);\n  }\n\n  setSidebarMenu(page) {\n    const wpstgSidebarMenuElements = this.wpstdSidebarMenu.querySelector('ul').querySelectorAll('li');\n    if (wpstgSidebarMenuElements.length > 0) {\n      for (let i = 0; i < wpstgSidebarMenuElements.length; i++) {\n        wpstgSidebarMenuElements[i].classList.remove('current');\n        if (wpstgSidebarMenuElements[i].querySelector('a') !== null) {\n          if (wpstgSidebarMenuElements[i].querySelector('a').getAttribute('href') ==='admin.php?page=' + page) {\n            wpstgSidebarMenuElements[i].classList.add('current');\n          }\n        }\n      }\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Handle toggle of contact us modal pupup\n */\n\nexport default class WpstgContactUs {\n  constructor(wpstgObject = wpstg) {\n    this.wpstgObject = wpstgObject;\n    this.characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    this.currentDate = new Date();\n    this.init();\n  }\n\n  init() {\n    this.contactUsModal = document.querySelector('#wpstg-contact-us-modal');\n    this.contactUsButton = document.querySelector('#wpstg-contact-us-button');\n    this.contactUsButtonBackupTab = document.querySelector('#wpstg--tab--backup  #wpstg-contact-us-button');\n    this.reportIssueButton = document.querySelector('#wpstg-contact-us-report-issue');\n    this.askInTheForumForm = document.querySelector('#wpstg-contact-us-report-issue-form');\n    this.successForm = document.querySelector('#wpstg-contact-us-success-form');\n    this.contactUsReportIssueBtn = document.querySelector('#wpstg-contact-us-report-issue-btn');\n    this.contactUsCloseButton = document.querySelector('#wpstg-modal-close');\n    this.contactUsSuccessPopup = document.querySelector('#wpstg-contact-us-success-form');\n    this.contactUsSuccessPopupClose = document.querySelector('#wpstg-contact-us-success-modal-close');\n    this.debugCodeCopyButton = document.querySelector('#wpstg-contact-us-debug-code-copy');\n    this.contactUsLoader = document.querySelector('#wpstg-contact-us-report-issue-loader');\n    this.contactUsResponse = document.querySelector('#wpstg-contact-us-debug-response');\n    this.contactUsDebugCodeField = document.querySelector('#wpstg-contact-us-debug-code');\n    this.contactUsSupport = document.querySelector('#wpstg-contact-us-support-forum');\n    this.isDebugWindowOpened = false;\n    this.addEvents();\n\n    this.notyf = new Notyf({\n      duration: 6000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: true,\n        },\n      ],\n    });\n  }\n\n  addEvents() {\n    document.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        this.hide(this.contactUsModal);\n        this.hide(this.askInTheForumForm);\n        this.hide(this.contactUsSuccessPopup);\n        this.hide(this.contactUsSupport);\n        this.isDebugWindowOpened = false;\n      }\n    });\n    this.contactUsButton.addEventListener('click', () => {\n      this.show(this.contactUsModal);\n    });\n    if (this.contactUsButtonBackupTab !== null) {\n      this.contactUsButtonBackupTab.addEventListener('click', () => {\n        this.show(this.contactUsModal);\n      });\n    }\n    this.reportIssueButton.addEventListener('click', () => {\n      if (this.isDebugWindowOpened) {\n        this.hide(this.askInTheForumForm);\n      } else {\n        this.show(this.askInTheForumForm);\n      }\n\n      this.isDebugWindowOpened = !this.isDebugWindowOpened;\n    });\n    this.contactUsReportIssueBtn.addEventListener('click', () => {\n      this.sendDebugInfo();\n    });\n    this.contactUsSuccessPopupClose.addEventListener('click', () => {\n      this.hide(this.contactUsSuccessPopup);\n    });\n    this.contactUsCloseButton.addEventListener('click', () => {\n      this.hide(this.contactUsModal);\n      this.hide(this.contactUsSupport);\n      this.hide(this.askInTheForumForm);\n      this.isDebugWindowOpened = false;\n    });\n    this.debugCodeCopyButton.addEventListener('click', () => {\n      this.copyDebugCode();\n      this.notyf.success('Debug code copied to clipboard');\n    });\n  }\n\n  copyDebugCode() {\n    this.contactUsDebugCodeField.select();\n    this.contactUsDebugCodeField.setSelectionRange(0, 99999);\n    navigator.clipboard.writeText(this.contactUsDebugCodeField.value);\n  }\n\n  show(element) {\n    element.style.display = 'block';\n  }\n\n  hide(element) {\n    element.style.display = 'none';\n  }\n\n  generateDebugCode(length) {\n    let result = '';\n    for ( let i = 0; i < length; i++ ) {\n      result += this.characters.charAt(Math.floor(Math.random() * this.characters.length));\n    }\n\n    return 'wpstg-' + result + '-' + this.currentDate.getHours() + this.currentDate.getMinutes() + this.currentDate.getSeconds();\n  }\n\n  sendDebugInfo() {\n    this.show(this.contactUsLoader);\n    this.contactUsReportIssueBtn.disabled = true;\n    const debugCode = this.generateDebugCode(8);\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg_send_debug_log_report',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        debugCode: debugCode,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.contactUsReportIssueBtn.disabled = false;\n      if (response.ok) {\n        return response.json();\n      }\n    }).then((data) => {\n      if (data.response && data.response.sent === true) {\n        this.contactUsDebugCodeField.value = debugCode;\n        this.show(this.contactUsSuccessPopup);\n      } else {\n        this.contactUsDebugCodeField.value = debugCode;\n        this.show(this.contactUsSuccessPopup);\n      }\n\n      this.hide(this.contactUsLoader);\n    }).catch((error) => {\n      this.hide(this.contactUsLoader);\n      this.show(this.contactUsSupport);\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupCreate;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupCreate.listen();\n  });\n\n  window.addEventListener('startedCreatingBackup', function() {\n    window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n  });\n\n  WPStagingBackupCreate = {\n    listen() {\n      $('body')\n          .off('click', '#wpstg-new-backup', WPStagingBackupCreate.clickedBackup)\n          .on('click', '#wpstg-new-backup', WPStagingBackupCreate.clickedBackup)\n          .off('change', '.wpstg--swal2-container .wpstg-advanced-options-site input[type=checkbox]')\n          .on('change', '.wpstg--swal2-container .wpstg-advanced-options-site input[type=checkbox]', WPStagingBackupCreate.warnBackupMediaWithoutDatabase)\n          .off('change', '[name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent')\n          .on('change', '[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent', WPStagingBackupCreate.disableBackupButtonIfNoSelection)\n      ;\n    },\n    async clickedBackup(e) {\n      WPStagingCommon.resetErrors();\n      e.preventDefault();\n      WPStagingBackup.isCancelled = false;\n\n      if (!WPStagingBackup.modal.create.html || !WPStagingBackup.modal.create.confirmBtnTxt) {\n        const $newBackupModal = $('#wpstg--modal--backup--new');\n        const html = $newBackupModal.html();\n        const btnTxt = $newBackupModal.attr('data-confirmButtonText');\n        WPStagingBackup.modal.create.html = html || null;\n        WPStagingBackup.modal.create.confirmBtnTxt = btnTxt || null;\n        $newBackupModal.remove();\n      }\n\n      const {value: formValues} = await WPStagingCommon.getSwalModal(false, {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n      }).fire({\n        title: '',\n        html: WPStagingBackup.modal.create.html,\n        focusConfirm: false,\n        confirmButtonText: WPStagingBackup.modal.create.confirmBtnTxt,\n        showCancelButton: true,\n        preConfirm: () => {\n          const container = WPStagingCommon.getSwalContainer();\n          WPStagingBackup.modal.create.hasBackupSchedule = WPStagingBackup.modal.create.hasBackupSchedule ? true : !container.querySelector('#repeatBackupOnSchedule').checked;\n          WPStagingBackup.processInfo.isOnlySchedule = !container.querySelector('#repeatBackupOnSchedule').checked && (!container.querySelector('#backupScheduleLaunch').checked);\n\n          const selectedStorages = container.querySelectorAll('input[name=\"storages\"]:checked');\n          const storages = [];\n          for (const storage of selectedStorages) {\n            storages.push(storage.value);\n          }\n\n          return {\n            name: container.querySelector('input[name=\"backup_name\"]').value || null,\n            isExportingPlugins: container.querySelector('#includePluginsInBackup:checked') !== null,\n            isExportingMuPlugins: container.querySelector('#includeMuPluginsInBackup:checked') !== null,\n            isExportingThemes: container.querySelector('#includeThemesInBackup:checked') !== null,\n            isExportingUploads: container.querySelector('#includeMediaLibraryInBackup:checked') !== null,\n            isExportingOtherWpContentFiles: container.querySelector('#includeOtherFilesInWpContent:checked') !== null,\n            isExportingDatabase: container.querySelector('#includeDatabaseInBackup:checked') !== null,\n            repeatBackupOnSchedule: container.querySelector('#repeatBackupOnSchedule:not(:checked)') !== null,\n            scheduleRecurrence: container.querySelector('#backupScheduleRecurrence').value || null,\n            scheduleTime: container.querySelector('#backupScheduleTime').value || null,\n            scheduleRotation: container.querySelector('#backupScheduleRotation').value || null,\n            storages: storages,\n            isCreateScheduleBackupNow: container.querySelector('#backupScheduleLaunch:checked') !== null,\n          };\n        },\n        onRender() {\n          if (WPStagingBackup.modal.create.hasBackupSchedule === true) {\n            document.querySelectorAll('#repeatBackupOnSchedule.wpstg-is-basic').forEach((el) => {\n              el.disabled = true;\n            });\n\n            document.querySelectorAll('.wpstg-basic-schedule-notice.wpstg-is-basic').forEach((el) => {\n              el.style.display = 'block';\n            });\n          }\n\n          if (WPStagingBackup.modal.create.hasBackupSchedule === false) {\n            document.querySelectorAll('#repeatBackupOnSchedule.wpstg-is-basic').forEach((el) => {\n              el.disabled = false;\n            });\n\n            document.querySelectorAll('.wpstg-basic-schedule-notice.wpstg-is-basic').forEach((el) => {\n              el.style.display = 'none';\n            });\n          }\n        },\n      });\n\n      if (!formValues) {\n        return;\n      }\n\n      WPStagingBackup.process({\n        execute: () => {\n          WPStagingBackup.messages.reset();\n          WPStagingBackupCreate.prepareBackup(formValues);\n        },\n      });\n    },\n    prepareBackup(data) {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--prepare-backup',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            wpstgBackupData: data,\n          },\n          function(response) {\n            if (response.success) {\n              window.dispatchEvent(new Event('startedCreatingBackup'));\n              WPStagingBackup.timer.start();\n\n              WPStagingBackupCreate.createBackup();\n            } else {\n              WPStagingCommon.showAjaxFatalError(response.data, '', 'Submit an error report.');\n            }\n          },\n          'json',\n          false,\n          10,\n          1.25,\n          function(xhr, textStatus, errorThrown) {\n            if (xhr.status === 423) {\n              WPStagingCommon.continueErrorHandle = false;\n              WPStagingBackup.shouldCleanUp = false;\n              WPStagingCommon.closeSwalModal();\n\n              setTimeout(function() {\n                WPStagingBackup.shouldCleanUp = true;\n              }, 1000);\n\n              WPStagingCommon.showErrorModal(xhr.responseJSON.data);\n            } else {\n              WPStagingCommon.continueErrorHandle = true;\n            }\n          },\n      );\n    },\n    createBackup() {\n      const maxBackupSequentialReturnError = 10;\n      let backupReturnedError = 0;\n      WPStagingCommon.resetErrors();\n\n      if (WPStagingBackup.isCancelled) {\n        WPStagingBackup.statusStop();\n        return;\n      }\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--create',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          },\n          function(response) {\n            backupReturnedError = 0;\n\n            if (WPStagingBackup.isCancelled) {\n              return;\n            }\n\n            if (typeof response === 'undefined') {\n              setTimeout(function() {\n                WPStagingBackupCreate.createBackup();\n              }, wpstg.delayReq);\n              return;\n            }\n\n            WPStagingBackup.processResponse(response);\n            if (!WPStagingBackup.processInfo.interval) {\n              WPStagingBackup.statusStart('create');\n            }\n\n            if (response.isRunning === false) {\n              if (response.jobStatus === 'JOB_FAIL') {\n                WPStagingBackup.checkMemoryExhaustion(response, 'wpstg_backup');\n                setTimeout(function() {\n                  WPStagingBackupCreate.createBackup();\n                }, wpstg.delayReq);\n              } else {\n                WPStagingBackupCreate.createBackup();\n              }\n            } else if (response.isRunning === true) {\n              $('#wpstg--progress--status').text('Backup successfully created!');\n\n              if (WPStagingBackup.messages.shouldWarn()) {\n              // noinspection JSIgnoredPromiseFromCall\n                WPStagingBackup.fetchListing();\n                WPStagingBackup.logsModal();\n                return;\n              }\n              WPStagingBackup.statusStop();\n              WPStagingCommon.closeSwalModal();\n              WPStagingBackup.fetchListing()\n                  .then(() => {\n                    if (!response.backupMd5 && !WPStagingBackup.processInfo.isOnlySchedule) {\n                      WPStagingCommon.showError('Failed to get backup md5 from response');\n                      return;\n                    }\n\n                    // Wait for fetchListing to populate the DOM with the backup data that we want to read\n                    let $el = '';\n                    let timesWaited = 0;\n                    const intervalWaitForBackupInDom = setInterval(function() {\n                      if (!WPStagingBackup.processInfo.isOnlySchedule && response.isLocalBackup) {\n                        timesWaited++;\n\n                        let backupFound = false;\n                        if (!response.isMultipartBackup) {\n                          $el = $(`.wpstg-backup[data-md5=\"${response.backupMd5}\"] .wpstg--backup--download`);\n                          backupFound = $el.length > 0;\n                        } else {\n                          response.backupMd5.forEach((md5) => {\n                            $el = $(`.wpstg-backup[data-md5=\"${md5}\"] .wpstg--backup--download`);\n                            if ($el.length) {\n                              backupFound = true;\n                            }\n                          });\n                        }\n\n                        // Could not find element, let's try again...\n                        if (!backupFound) {\n                          if (timesWaited >= 20) {\n                            // Bail: We tried too many times and couldn't find.\n                            clearInterval(intervalWaitForBackupInDom);\n                          }\n                          return;\n                        }\n\n                        // Found it. No more need for the interval.\n                        clearInterval(intervalWaitForBackupInDom);\n\n                        const backupSize = response.hasOwnProperty('backupSize') ? ' (' + response.backupSize + ')' : '';\n                      } else {\n                        // Just clear the interval\n                        clearInterval(intervalWaitForBackupInDom);\n                      }\n\n                      WPStagingBackup.downloadModal({\n                        title: WPStagingBackup.processInfo.isOnlySchedule ? 'Backup Schedule Created' : 'Backup Complete',\n                        bodyText: WPStagingBackup.processInfo.isOnlySchedule ? 'Backup is scheduled according to the provided settings.' : null,\n                      });\n                      $('.wpstg--modal--download--logs--wrapper').show();\n                      const $logsContainer = $('.wpstg--modal--process--logs');\n                      WPStagingBackup.messages.data.all.forEach((message) => {\n                        const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n                        $logsContainer\n                            .append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`)\n                        ;\n                      });\n                    }, 500);\n                  })\n              ;\n            }\n          },\n          'json',\n          false,\n          0, // Don't retry upon failure\n          1.25,\n          function(xhr, textStatus, errorThrown) {\n            WPStagingCommon.continueErrorHandle = false;\n            console.log(xhr);\n            const response = {\n              'messages': [],\n            };\n\n            backupReturnedError++;\n\n            // Prevents loop in case PHP crashes constantly before being able to respond\n            if (backupReturnedError <= maxBackupSequentialReturnError) {\n              WPStagingBackupCreate.createBackup();\n            } else {\n              response.messages.push({\n                'type': 'critical',\n                'message': 'There was a PHP fatal error while processing the backup. You might need to check your PHP error log to find out the reason. Please contact WPSTAGING support if you need help.',\n              });\n\n              WPStagingBackup.processResponse(response);\n              WPStagingBackup.cancel();\n              setTimeout(WPStagingBackup.logsModal, 500);\n            }\n          },\n      );\n    },\n    warnBackupMediaWithoutDatabase() {\n      const isExportingDatabase = document.getElementById('includeDatabaseInBackup').checked;\n      const isExportingMediaLibrary = document.getElementById('includeMediaLibraryInBackup').checked;\n\n      if (isExportingMediaLibrary && !isExportingDatabase) {\n        document.getElementById('backupUploadsWithoutDatabaseWarning').style.display = 'block';\n      } else {\n        document.getElementById('backupUploadsWithoutDatabaseWarning').style.display = 'none';\n      }\n    },\n    disableBackupButtonIfNoSelection() {\n      const isExportingAnyDir = $('[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"]:checked').length > 0;\n      const isExportingDatabase = $('input#includeDatabaseInBackup:checked').length === 1;\n      const isExportingOtherFilesInWpContent = $('input#includeOtherFilesInWpContent:checked').length === 1;\n      if (!isExportingAnyDir && !isExportingDatabase && !isExportingOtherFilesInWpContent) {\n        $('.wpstg--swal2-confirm').prop('disabled', true);\n      } else {\n        $('.wpstg--swal2-confirm').prop('disabled', false);\n      }\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupCreate;\n","import WPStagingCommon from '../../wpstg.js';\nimport {qs} from '../../modules/wpstg-dom-utils.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupDelete;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupDelete.listen();\n  });\n\n  WPStagingBackupDelete = {\n    listen() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg-delete-backup[data-md5]', WPStagingBackupDelete.delete)\n          .on('click', '.wpstg-delete-backup[data-md5]', WPStagingBackupDelete.delete);\n    },\n    delete(e) {\n      e.preventDefault();\n      WPStagingCommon.resetErrors();\n\n      const name = this.getAttribute('data-name');\n\n      const htmlContent = 'Are you sure you want to delete this backup: ' + name + '?';\n\n      WPStagingCommon.getSwalModal(false, {\n        confirmButton: 'wpstg--btn--confirm wpstg-btn-danger wpstg-link-btn',\n      }).fire({\n        showConfirmButton: true,\n        showCancelButton: true,\n        cancelButtonText: 'Cancel',\n        confirmButtonText: 'Delete',\n        icon: 'warning',\n        title: 'Delete Backup!',\n        html: '<div class=\"wpstg--modal--delete\">' + htmlContent + '</div>',\n      }).then((result) => {\n        if (!result.value) {\n          return;\n        }\n\n        WPStagingCommon.isLoading(true);\n        WPStagingCommon.cache.get('#wpstg-existing-backups').hide();\n        const md5 = this.getAttribute('data-md5');\n        WPStagingCommon.ajax(\n            {\n              action: 'wpstg--backups--delete',\n              md5: md5,\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n            },\n            function(response) {\n              WPStagingCommon.showAjaxFatalError(response, '', ' Please submit an error report by using the REPORT ISSUE button.');\n              WPStagingCommon.isLoading(false);\n              WPStagingBackup.fetchListing();\n            },\n        );\n      });\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupDelete;\n","import WPStagingCommon from '../../wpstg.js';\nimport {qs} from '../../modules/wpstg-dom-utils.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupEdit;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupEdit.listen();\n  });\n\n  WPStagingBackupEdit = {\n    listen() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg--backup--edit[data-md5]', WPStagingBackupEdit.edit)\n          .on('click', '.wpstg--backup--edit[data-md5]', WPStagingBackupEdit.edit);\n    },\n    async edit(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const name = $this.data('name');\n      const notes = $this.data('notes');\n\n      const {value: formValues} = await WPStagingCommon.getSwalModal().fire({\n        title: '',\n        html: `\n                    <label id=\"wpstg-backup-edit-name\">Backup Name</label>\n                    <input id=\"wpstg-backup-edit-name-input\" class=\"wpstg--swal2-input\" value=\"${name}\" maxlength=\"100\">\n                    <label>Additional Notes</label>\n                    <textarea id=\"wpstg-backup-edit-notes-textarea\" class=\"wpstg--swal2-textarea\" maxlength=\"1000\">${notes}</textarea>\n                  `,\n        focusConfirm: false,\n        confirmButtonText: 'Save',\n        showCancelButton: true,\n        preConfirm: () => ({\n          name: document.getElementById('wpstg-backup-edit-name-input').value || null,\n          notes: document.getElementById('wpstg-backup-edit-notes-textarea').value || null,\n        }),\n      });\n\n      if (!formValues) {\n        return;\n      }\n\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--edit',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            md5: $this.data('md5'),\n            name: formValues.name,\n            notes: formValues.notes,\n          },\n          function(response) {\n            WPStagingCommon.showAjaxFatalError(response, '', 'Submit an error report.');\n            // noinspection JSIgnoredPromiseFromCall\n            WPStagingBackup.fetchListing();\n          },\n      );\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupEdit;\n","import WPStagingCommon from '../../wpstg.js';\nimport * as dom from './../../modules/wpstg-dom-utils';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupRestore;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupRestore.listen();\n  });\n\n  WPStagingBackupRestore = {\n    listen() {\n      $('body')\n          .off('click', '.wpstg--backup--restore', WPStagingBackupRestore.clickedRestore)\n          .on('click', '.wpstg--backup--restore', WPStagingBackupRestore.clickedRestore);\n    },\n    clickedRestore(e) {\n      const currentObj = this;\n      WPStaging.checkUserDbPermissions('restore').then(function() {\n        WPStagingCommon.resetErrors();\n        e.preventDefault();\n        WPStagingBackup.isCancelled = false;\n\n        WPStagingBackup.modal.restore.data.file = currentObj.getAttribute('data-filePath');\n        WPStagingBackupRestore.selectedBackup();\n      });\n    },\n    selectedBackup() {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--read-backup-metadata',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            wpstg: {\n              file: WPStagingBackup.modal.restore.data.file,\n            },\n          },\n          function(response) {\n            let responseData;\n\n            try {\n              responseData = JSON.parse(WPStagingCommon.getDataFromWordPressResponse(response));\n              // Get the first item of the blogs object:\n              // blogs {1: {someData}} => {someData}\n              const mainNetwork = responseData.networks[Object.keys(responseData.networks)[0]];\n              const mainBlog = mainNetwork.blogs[Object.keys(mainNetwork.blogs)[0]];\n              responseData = mainBlog;\n            } catch (e) {\n              WPStagingCommon.showError(e);\n            }\n\n            WPStagingBackup.modal.restore.data.backupMetadata = responseData;\n\n            const postData = new FormData();\n            postData.append('action', 'wpstg--backups--restore--file-info');\n            postData.append('accessToken', wpstg.accessToken);\n            postData.append('nonce', wpstg.nonce);\n            postData.append('filePath', WPStagingBackup.modal.restore.data.file);\n\n            fetch(ajaxurl, {\n              method: 'POST',\n              body: postData,\n            })\n                .then(WPStagingCommon.handleFetchErrors)\n                .then((res) => res.json())\n                .then((html) => {\n                  WPStagingBackup.modal.restore.retryCount = 0;\n                  WPStagingBackupRestore.importModal(html, postData);\n                })\n                .catch((e) => WPStagingCommon.showAjaxFatalError(e, '', 'Submit an error report.'));\n\n            $('.wpstg--modal--actions .wpstg--swal2-confirm').show();\n            $('.wpstg--modal--actions .wpstg--swal2-confirm').prop('disabled', false);\n          },\n      );\n    },\n    importModal(confirmHtml) {\n      const importSiteBackup = (data, retryRequest = false, errorCode = null) => {\n        WPStagingCommon.resetErrors();\n\n        if (WPStagingBackup.isCancelled) {\n          WPStagingBackup.statusStop();\n          return;\n        }\n\n        WPStagingBackup.timer.start();\n\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n\n        WPStagingCommon.ajax(\n            {\n              action: 'wpstg--backups--restore',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n              retry: retryRequest,\n              errorCode: errorCode,\n            },\n            function(response) {\n              if (WPStagingBackup.isCancelled) {\n                return;\n              }\n\n              // reset retry count on success\n              WPStagingCommon.retry.reset();\n\n              if (typeof response === 'undefined') {\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n                return;\n              }\n\n              WPStagingBackup.processResponse(response);\n              if (!WPStagingBackup.processInfo.interval) {\n                WPStagingBackup.statusStart('restore');\n              }\n\n              if (response.isRunning === false) {\n                if ( response.jobStatus === 'JOB_FAIL') {\n                  WPStagingBackup.checkMemoryExhaustion(response, 'wpstg_restore');\n                  setTimeout(function() {\n                    importSiteBackup(data);\n                  }, wpstg.delayReq);\n                } else {\n                  importSiteBackup(data);\n                }\n              } else if (response.isRunning === true) {\n                window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n                $('#wpstg--progress--status').text('Backup successfully imported!');\n                if (WPStagingBackup.messages.shouldWarn()) {\n                  WPStagingBackup.logsModal();\n                  return;\n                }\n                WPStagingBackup.statusStop();\n                const logEntries = $('.wpstg--modal--process--logs').get(1).innerHTML;\n                const html = '<div class=\"wpstg--modal--process--logs\">' + logEntries + '</div>';\n                const issueFound = html.includes('wpstg--modal--process--msg--warning') || html.includes('wpstg--modal--process--msg--error') ? 'Issues(s) found!<br> ' : '';\n\n                const loginText = WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase ? 'You will be redirected to the login page after closing this modal.' : '';\n\n                // TODO: remove default classes.\n                WPStagingCommon.getSwalModal(true, {\n                  container: 'wpstg-restore-finished-container',\n                }).fire({\n                  icon: 'success',\n                  title: 'Finished Successfully',\n                  html: '<div id=\"wpstg-restore-success\" class=\"wpstg--grey\">Site has been restored from backup. ' + loginText + '  <br/><br/><span class=\"wpstg--modal--process--msg-found\">' + issueFound + '</span><button class=\"wpstg--modal--process--logs--tail\" data-txt-bad=\"\">Show Logs</button></div><br/>' + html,\n                  onClose: function() {\n                    if (WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase) {\n                      document.getElementById('wpstg-restore-wait').style.display = 'flex';\n\n                      // Reload in 15 seconds if something goes wrong with the Ajax call.\n                      setTimeout(function() {\n                        document.location.reload(true);\n                      }, 15000);\n\n                      WPStagingCommon.ajax(\n                          {\n                            action: 'raw_wpstg--backups--login-url',\n                            accessToken: wpstg.accessToken,\n                            nonce: wpstg.nonce,\n                          },\n                          function(response) {\n                            const loginUrl = new URL(response.data.loginUrl);\n                            loginUrl.searchParams.set('accessToken', wpstg.accessToken);\n                            loginUrl.searchParams.set('wpstgAfterRestore', 'yes');\n                            window.location.href = loginUrl.toString();\n                          },\n                      );\n                    } else {\n                      WPStagingBackup.fetchListing();\n                    }\n                  },\n                },\n                );\n              }\n            },\n            'json',\n            false,\n            10, // Don't retry upon failure\n            1.25,\n            (xhr, textStatus, errorThrown) => { // Callback function to handle retry for Backup Restore\n              const errorCode = parseInt(xhr.status);\n\n              WPStagingBackup.checkMemoryExhaustion({messages: []}, 'wpstg_restore');\n\n              if (!WPStagingCommon.retry.retryOnErrors.includes(errorCode)) {\n                return;\n              }\n\n              if (!WPStagingCommon.retry.canRetry()) {\n                return;\n              }\n\n              WPStagingCommon.continueErrorHandle = false;\n              WPStagingCommon.retry.incrementRetry();\n              const delay = WPStagingCommon.retry.currentDelay;\n\n              setTimeout(async () => {\n                // Mark this try, retry\n                importSiteBackup(data, true, errorCode);\n              }, delay);\n            },\n        );\n      };\n\n      const $modal = $('#wpstg--modal--backup--restore');\n\n      WPStagingBackup.modal.restore.html = $modal.html();\n      WPStagingBackup.modal.restore.baseDirectory = $modal.attr('data-baseDirectory');\n      WPStagingBackup.modal.restore.btnTxtNext = $modal.attr('data-nextButtonText');\n      WPStagingBackup.modal.restore.btnTxtConfirm = $modal.attr('data-confirmButtonText');\n      WPStagingBackup.modal.restore.btnTxtCancel = $modal.attr('data-cancelButtonText');\n\n      WPStagingCommon.getSwalModal()\n          .mixin({\n            progressSteps: ['1', '2'],\n          })\n          .queue([\n            {\n              html: $('.wpstg--modal--backup--restore--introduction').first(),\n              confirmButtonText: 'Next',\n              showCancelButton: true,\n              showConfirmButton: true,\n              reverseButtons: true,\n              width: 600,\n              onRender() {\n                $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database').hide();\n                $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database-multisite').hide();\n                $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-files').hide();\n\n                if (WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase) {\n                  $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database').show();\n                }\n\n                if (WPStagingBackup.modal.restore.data.backupMetadata.isExportingDatabase && WPStagingBackup.modal.restore.data.backupMetadata.singleOrMulti === 'multi') {\n                  $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-database-multisite').show();\n                }\n\n                if (\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingMuPlugins ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingPlugins ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingThemes ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingUploads ||\n                  WPStagingBackup.modal.restore.data.backupMetadata.isExportingOtherWpContentFiles\n                ) {\n                  $('.wpstg--modal--backup--restore--introduction .wpstg-backup-restore-contains-files').show();\n                }\n              },\n            },\n            {\n              html: confirmHtml,\n              confirmButtonText: 'Restore',\n              showCancelButton: true,\n              showConfirmButton: true,\n              reverseButtons: true,\n              width: 650,\n            },\n          ])\n          .then((res) => {\n            // Early bail: Dismissed, canceled, or in a incoherent state.\n            if (!res || !res.value) {\n              return;\n            }\n\n            // Early bail: Step 1 (Confirm) must be true.\n            if (!res.value[1] || res.value[1] !== true) {\n              return;\n            }\n\n            WPStagingBackup.isCancelled = false;\n\n            const data = WPStagingBackup.modal.restore.data;\n\n            // Unset fileObject as we don't need it anymore, and it can't be converted to array.\n            WPStagingBackup.modal.restore.data.fileObject = null;\n\n            data['file'] = WPStagingBackup.modal.restore.baseDirectory + data['file'];\n\n            WPStagingCommon.ajax(\n                {\n                  action: 'wpstg--backups--prepare-restore',\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                  wpstgRestoreData: data,\n                },\n                function(response) {\n                  if (response.success) {\n                    WPStagingBackup.process({\n                      execute: () => {\n                        WPStagingBackup.messages.reset();\n                        importSiteBackup(data);\n                      },\n                    });\n                  } else {\n                    WPStagingCommon.showAjaxFatalError(response.data, '', 'Submit an error report.');\n                  }\n                },\n                'json',\n                false,\n                10,\n                1.25,\n                function(xhr, textStatus, errorThrown) {\n                  if (xhr.status === 423) {\n                    WPStagingCommon.continueErrorHandle = false;\n                    WPStagingBackup.shouldCleanUp = false;\n                    WPStagingCommon.closeSwalModal();\n\n                    setTimeout(function() {\n                      WPStagingBackup.shouldCleanUp = true;\n                    }, 1000);\n                    WPStagingCommon.showErrorModal(xhr.responseJSON.data);\n                  } else {\n                    WPStagingCommon.continueErrorHandle = true;\n                  }\n                },\n            );\n          });\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupRestore;\n","import WPStagingCommon from '../../wpstg.js';\nimport {qs} from '../../modules/wpstg-dom-utils.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupUpload;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupUpload.listen();\n  });\n\n  WPStagingBackupUpload = {\n    isUploading: false,\n    resumable: null,\n    resumableFile: null,\n\n    listen() {\n      document.body.addEventListener('click', function(event) {\n        if (event.target.id === 'wpstg-upload-backup') {\n          WPStagingBackupUpload.uploadModal();\n        }\n      });\n    },\n\n    /**\n     * @see https://caniuse.com/fileapi\n     */\n    uploadNotSupported() {\n      WPStagingCommon.showErrorModal('Your browser do not support the File API, needed for the uploads. Please try a different/updated browser, or upload the Backup using FTP to the folder <strong>wp-content/uploads/wp-staging/backups</strong>');\n    },\n\n    setModalStateStart() {\n      WPStagingBackupUpload.isUploading = false;\n      qs('.wpstg--swal2-container #wpstg-upload-select').style.display = 'block';\n      qs('.wpstg--swal2-container #wpstg-upload-progress').style.display = 'none';\n      qs('.wpstg--swal2-container .wpstg--modal--backup--upload--content .wpstg-linear-loader').style.display = 'none';\n    },\n\n    setModalStateUploading() {\n      WPStagingBackupUpload.isUploading = true;\n      qs('.wpstg--swal2-container #wpstg-upload-select').style.display = 'none';\n      qs('.wpstg--swal2-container #wpstg-upload-progress').style.display = 'block';\n      qs('.wpstg--swal2-container .wpstg--modal--backup--upload--content .wpstg-linear-loader').style.display = 'block';\n      qs('.wpstg--swal2-container .wpstg--modal--upload--process').style.display = 'flex';\n\n      const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n      const btnCancel = _btnCancel.cloneNode(true);\n      _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n\n      btnCancel.addEventListener('click', WPStagingBackupUpload.eventListenerConfirmCancelUpload);\n    },\n\n    eventListenerConfirmCancelUpload() {\n      if (confirm('Do you want to abort the upload?')) {\n        WPStagingBackupUpload.resumable.cancel();\n        WPStagingCommon.closeSwalModal();\n        WPStagingBackupUpload.deleteUnfinishedUploads();\n      }\n    },\n\n    deleteUnfinishedUploads() {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups--uploads-delete-unfinished',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          },\n          function(response) {\n          // no-op\n          },\n      );\n    },\n\n    uploadModal() {\n      WPStagingCommon.getSwalModal(true).fire({\n        html: document.getElementById('wpstg--modal--backup--upload').innerHTML,\n        showConfirmButton: false,\n        showCloseButton: false,\n        showLoaderOnConfirm: false,\n        showCancelButton: true,\n        width: 650,\n        allowEscapeKey: () => {\n          return !WPStagingBackupUpload.isUploading;\n        },\n        allowOutsideClick: () => {\n          return !WPStagingBackupUpload.isUploading;\n        },\n        onRender() {\n          WPStagingBackupUpload.deleteUnfinishedUploads();\n          WPStagingBackupUpload.setModalStateStart();\n\n          WPStagingBackupUpload.resumable = new Resumable({\n            target: wpstg.ajaxUrl,\n            chunkSize: wpstg.maxUploadChunkSize,\n            query: {\n              accessToken: wpstg.accessToken,\n              action: 'wpstg--backups--restore--file-upload',\n              uniqueIdentifierSuffix: Math.floor(Math.random() * 99999999),\n            },\n            permanentErrors: [400, 401, 403, 404, 409, 415, 500, 501, 507, 413], // These will STOP the upload. Other errors will retry the chunk.\n            fileType: ['wpstg', wpstg.backupDBExtension],\n            simultaneousUploads: 1,\n            prioritizeFirstAndLastChunk: false,\n            testChunks: false,\n            forceChunkSize: true,\n          });\n          WPStagingBackupUpload.resumable.resumableFile = null;\n\n          if (!WPStagingBackupUpload.resumable.support) {\n            WPStagingCommon.closeSwalModal();\n            WPStagingBackupUpload.uploadNotSupported();\n\n            return;\n          }\n\n          WPStagingBackupUpload.resumable.assignBrowse(qs('.wpstg--swal2-container .resumable-browse'));\n          WPStagingBackupUpload.resumable.assignDrop(qs('.wpstg--swal2-container .resumable-drop'));\n\n          WPStagingBackupUpload.resumable.on('fileAdded', WPStagingBackupUpload.handleFileAdded);\n          WPStagingBackupUpload.resumable.on('fileSuccess', WPStagingBackupUpload.handleFileSuccess);\n          WPStagingBackupUpload.resumable.on('error', WPStagingBackupUpload.handleError);\n          WPStagingBackupUpload.resumable.on('progress', WPStagingBackupUpload.handleProgress);\n        },\n      });\n    },\n\n    handleFileAdded(file) {\n      WPStagingBackupUpload.setModalStateUploading();\n\n      WPStagingBackupUpload.resumable.resumableFile = file;\n      WPStagingBackupUpload.resumable.upload();\n    },\n\n    handleFileSuccess(file, message) {\n      WPStagingCommon.closeSwalModal();\n      WPStagingCommon.showSuccessModal(qs('#wpstg--modal--backup--upload').getAttribute('data-uploadSuccessMessage', 'Upload finished'));\n      WPStagingBackup.fetchListing();\n    },\n\n    handleProgress() {\n      const percent = Math.floor(WPStagingBackupUpload.resumable.progress() * 100);\n\n      qs('.wpstg--swal2-container .wpstg--modal--upload--progress').style.width = percent + '%';\n      qs('.wpstg--swal2-container .wpstg--modal--upload--progress--title > span').textContent = percent + '%';\n    },\n\n    handleError(message, file) {\n      try {\n        const json = JSON.parse(message);\n\n        if (json.hasOwnProperty('data') && json.data.hasOwnProperty('message') ) {\n          if (json.data.hasOwnProperty('isDiskFull') && json.data.isDiskFull) {\n            WPStagingBackupUpload.resumable.cancel();\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal(json.data.message);\n            return;\n          }\n\n          if (json.data.hasOwnProperty('backupFailedValidation') && json.data.backupFailedValidation) {\n            WPStagingBackupUpload.resumable.cancel();\n            WPStagingCommon.closeSwalModal();\n            WPStagingCommon.showErrorModal(json.data.message);\n            return;\n          }\n        }\n      } catch (e) {\n        // not a JSON message, no-op\n      }\n\n      // Reduce chunk by 10%, with a minimum of 256kb reduction\n      const reduceChunkBytes = Math.max(256 * 1024, WPStagingBackupUpload.resumable.opts.chunkSize * 0.1);\n\n      WPStagingBackupUpload.resumable.opts.chunkSize = Math.ceil(WPStagingBackupUpload.resumable.opts.chunkSize - reduceChunkBytes);\n\n      if (WPStagingBackupUpload.resumable.opts.chunkSize < 64 * 1024) {\n        WPStagingCommon.closeSwalModal();\n        WPStagingCommon.showErrorModal('We could not upload the backup file, please try uploading it directly using FTP to the folder wp-content/uploads/wp-staging/backups. Please also make sure you have enough free disk space on the server.');\n      }\n\n      WPStagingBackupUpload.deleteUnfinishedUploads();\n\n      console.log(WPStagingBackupUpload.resumable.opts.chunkSize);\n      WPStagingBackupUpload.resumable.files[0].retry();\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupUpload;\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup';\n\nlet WPStagingBackupDownload;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupDownload.listen();\n  });\n\n  WPStagingBackupDownload = {\n    listen() {\n      $('body')\n          .off('click', '.wpstg--backup--download-modal', WPStagingBackupDownload.clickedDownload)\n          .on('click', '.wpstg--backup--download-modal', WPStagingBackupDownload.clickedDownload);\n    },\n    clickedDownload(e) {\n      WPStagingCommon.resetErrors();\n      e.preventDefault();\n      WPStagingBackup.isCancelled = false;\n\n      WPStagingBackup.modal.download.data.indexFile = this.getAttribute('data-filePath');\n      WPStagingBackupDownload.downloadModal();\n    },\n    renderPart(part, cssSelector) {\n      const html = `<div class=\"wpstg--backups--part\">\n        <h2>${part.name}</h2>\n        <p>File Size: ${part.fileSize}</p>\n        <a download href=\"${part.downloadLink}\">Download</a>\n      </div>`;\n      $(cssSelector).append(html);\n    },\n    downloadModal() {\n      WPStagingCommon.resetErrors();\n\n      const $modal = $('#wpstg--modal--backup--download-modal');\n\n      WPStagingBackup.modal.download.html = $modal.html();\n\n      WPStagingCommon.getSwalModal(false).fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'Cancel',\n        title: 'Download Backup',\n        html: WPStagingBackup.modal.download.html,\n        onRender() {\n          $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').show();\n          $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').hide();\n          $('.wpstg--modal--download--parts-container .wpstg--modal--download--parts').hide();\n          $('.wpstg--modal--download--parts-container .wpstg--modal--download--parts').html('');\n          $('.wpstg--modal--download--parts-container').show();\n\n          WPStagingCommon.ajax(\n              {\n                action: 'wpstg--backups--parts',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                filePath: WPStagingBackup.modal.download.data.indexFile,\n              },\n              function(response) {\n                if (WPStagingBackup.isCancelled) {\n                  return;\n                }\n\n                if (typeof response === 'undefined') {\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').hide();\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').show();\n                  return;\n                }\n\n                if (response.error === true) {\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').hide();\n                  $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').show();\n                  return;\n                }\n\n                response.parts.forEach((part) => {\n                  WPStagingBackupDownload.renderPart(part, '.wpstg--modal--download--parts-container .wpstg--modal--download--parts');\n                });\n\n                $('.wpstg--modal--download--parts-container .wpstg--modal--fetching--data').hide();\n                $('.wpstg--modal--download--parts-container .wpstg--modal--download--text').show();\n                $('.wpstg--modal--download--parts-container .wpstg--modal--download--parts').show();\n              },\n              'json',\n              false,\n              0, // Don't retry upon failure\n              1.25,\n          );\n        },\n      }).then();\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupDownload;\n","import WPStagingCommon from '../../wpstg.js';\nimport 'regenerator-runtime/runtime';\nimport WPStagingBackup from './wpstg-backup.js';\nimport {qs} from '../../modules/wpstg-dom-utils';\n\nlet WPStagingBackupManageSchedules;\n\n(function($) {\n  window.addEventListener('backups-tab', function() {\n    WPStagingBackupManageSchedules.listen();\n  });\n\n  WPStagingBackupManageSchedules = {\n    listen() {\n      document.body.addEventListener('click', function(event) {\n        if (event.target.id === 'wpstg-manage-backup-schedules') {\n          WPStagingBackupManageSchedules.manageSchedulesModal();\n        }\n      });\n      $('body').on('click', '.wpstg--edit-schedule-basic', WPStagingBackupManageSchedules.showAlertForBasic);\n    },\n    showAlertForBasic(e) {\n      WPStagingCommon.resetErrors();\n      e.preventDefault();\n      alert('Please upgrade to WP Staging Pro to edit existing backup plans. You can delete this plan and create a new one if you want to change it.');\n    },\n    manageSchedulesModal() {\n      WPStagingBackupManageSchedules.fetchSchedules();\n      WPStagingCommon.getSwalModal(false).fire({\n        html: document.getElementById('wpstg--modal--backup--manage--schedules').innerHTML,\n        showConfirmButton: false,\n        showCloseButton: true,\n        showLoaderOnConfirm: false,\n        showCancelButton: true,\n        cancelButtonText: 'Close',\n        confirmButtonText: 'Save',\n        width: 750,\n        allowEscapeKey: true,\n        allowOutsideClick: true,\n      });\n    },\n    fetchSchedules() {\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups-fetch-schedules',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          },\n          function(response) {\n            qs('.wpstg--swal2-container #wpstg--modal--backup--manage--schedules--content').innerHTML = response.data;\n\n            document.querySelectorAll('.wpstg--swal2-container #wpstg--modal--backup--manage--schedules--content .wpstg--dismiss-schedule').forEach(function(dismissButton) {\n              dismissButton.addEventListener('click', function(event) {\n                if (confirm('Do you really want to delete this schedule?')) {\n                  WPStagingBackupManageSchedules.dismissSchedule(event.target);\n                }\n              });\n            });\n          },\n      );\n    },\n    dismissSchedule(dismissTarget) {\n      const scheduleId = dismissTarget.dataset.scheduleId;\n\n      WPStagingCommon.ajax(\n          {\n            action: 'wpstg--backups-dismiss-schedule',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            scheduleId: scheduleId,\n          },\n          function(response) {\n            if (response.success) {\n              WPStagingBackupManageSchedules.fetchSchedules();\n              WPStagingBackup.fetchListing();\n              WPStagingBackup.modal.create.hasBackupSchedule = false;\n            } else {\n              WPStagingCommon.showErrorModal(response.data);\n              return;\n            }\n            console.log(response);\n          },\n      );\n    },\n  };\n}(jQuery));\n\nexport default WPStagingBackupManageSchedules;\n"],"names":["wpstgHoverIntent","parent","selector","onOver","onOut","x","y","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","e","clientX","clientY","compare","el","clearTimeout","Math","abs","undefined","setTimeout","dispatchOver","removeEventListener","addEventListener","this","onMouseOver","event","target","matches","closest","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","Object","assign","remove","WPStagingCommon","$","continueErrorHandle","retry","currentDelay","count","max","retryOnErrors","performingRequest","incrementRetry","incrementRatio","canRetry","reset","memoryExhaustArticleLink","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","listenTooltip","document","querySelector","style","visibility","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","icon","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","response","Error","hasOwnProperty","success","data","Array","length","shift","isLoading","show","hide","slugify","url","toString","toLowerCase","normalize","replace","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","error","message","handleFetchErrors","ok","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","type","xhr","textStatus","errorThrown","console","log","errorCode","statusCode","jQuery","runtime","exports","Op","prototype","hasOwn","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","iterable","iteratorMethod","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","qs","initializeModuleDelayedIfElementIsAvailable","Module","Element","msMatchesSelector","webkitMatchesSelector","s","parentElement","parentNode","nodeType","WPStagingBackup","WpstgDetectMemoryExhaust","wpstgObject","wpstg","sendRequest","requestType","_this","fetch","ajaxUrl","credentials","body","URLSearchParams","action","accessToken","nonce","headers","json","warn","i18n","WpstgSidebarMenu","init","_proto","wpstdStagingTab","wpstdBackupTab","wpstdSidebarMenu","addEvents","setPageUrl","setSidebarMenu","page","history","pushState","location","pathname","wpstgSidebarMenuElements","querySelectorAll","classList","getAttribute","add","WpstgContactUs","characters","currentDate","contactUsModal","contactUsButton","contactUsButtonBackupTab","reportIssueButton","askInTheForumForm","successForm","contactUsReportIssueBtn","contactUsCloseButton","contactUsSuccessPopup","contactUsSuccessPopupClose","debugCodeCopyButton","contactUsLoader","contactUsResponse","contactUsDebugCodeField","contactUsSupport","isDebugWindowOpened","notyf","Notyf","duration","position","dismissible","types","background","sendDebugInfo","copyDebugCode","select","setSelectionRange","navigator","clipboard","writeText","element","display","generateDebugCode","floor","random","getHours","getMinutes","getSeconds","_this2","disabled","debugCode","fetchListing","dom","res","evt","handler","$ul","empty","toggle","contains","overflow","height","offsetHeight","transitionProperty","transitionDuration","removeProperty","stopImmediatePropagation","WPStagingBackupCreate","WPStagingBackupDelete","WPStagingBackupEdit","WPStagingBackupRestore","WPStagingBackupUpload","WPStagingBackupDownload","WPStagingBackupManageSchedules","WPStagingBackup$1","performingCancelRequest","isCancelled","isFinished","processInfo","isOnlySchedule","modal","confirmBtnTxt","hasBackupSchedule","process","cancelBtnTxt","download","indexFile","files","restore","btnTxtNext","btnTxtConfirm","btnTxtCancel","searchReplaceForm","containerIntroduction","file","fileObject","search","backupMetadata","baseDirectory","messages","WARNING","ERROR","INFO","DEBUG","CRITICAL","all","critical","warning","debug","shouldWarn","countByType","addMessage","isArray","item","totalSeconds","start","setInterval","seconds","toISOString","substr","clearInterval","hasResponse","reTryAfter","isResetErrors","dispatchEvent","Event","cancel","extraParams","showCloseButton","showLoaderOnConfirm","allowEscapeKey","allowOutsideClick","width","onRender","sendCancelRequest","isInit","jobIdBeingCancelled","isRunning","execute","onResponse","$modal","btnTxt","attr","off","on","logBtn","preventDefault","container","$logs","find","is","hideLogs","childNodes","showLogs","isShowCancelButton","content","_btnCancel","getElementsByClassName","btnCancel","cloneNode","replaceChild","confirm","onAfterClose","processResponse","$container","statusTitle","percentage","_step2","$logsContainer","stoppingTypes","_step","_iterator","_createForOfIteratorHelperLoose","msgClass","append","date","includes","CustomEvent","detail","logsModal","_iterator2","scrollTop","scrollHeight","$btnShowLogs","logs","job_done","$errorContainer","$translations","before","warnings","_step3","_iterator3","onOpen","downloadModal","_ref","_ref$title","_ref$bodyText","bodyText","$el","confirmButtonText","checkMemoryExhaustion","statusStop","statusStart","currentStatusTitle","listen","clickedBackup","warnBackupMediaWithoutDatabase","disableBackupButtonIfNoSelection","_asyncToGenerator","_regeneratorRuntime","_callee","$newBackupModal","_yield$WPStagingCommo","formValues","_context","focusConfirm","preConfirm","checked","storages","storage","isExportingPlugins","isExportingMuPlugins","isExportingThemes","isExportingUploads","isExportingOtherWpContentFiles","isExportingDatabase","repeatBackupOnSchedule","scheduleRecurrence","scheduleTime","scheduleRotation","isCreateScheduleBackupNow","prepareBackup","wpstgBackupData","createBackup","shouldCleanUp","responseJSON","backupReturnedError","jobStatus","delayReq","backupMd5","timesWaited","intervalWaitForBackupInDom","isLocalBackup","backupFound","isMultipartBackup","md5","backupSize","getElementById","isExportingMediaLibrary","isExportingAnyDir","isExportingOtherFilesInWpContent","prop","delete","_delete","edit","$this","notes","clickedRestore","currentObj","checkUserDbPermissions","selectedBackup","responseData","mainNetwork","JSON","parse","networks","blogs","postData","FormData","retryCount","importModal","confirmHtml","importSiteBackup","retryRequest","innerHTML","issueFound","loginText","onClose","reload","loginUrl","URL","searchParams","set","href","progressSteps","queue","first","singleOrMulti","wpstgRestoreData","isUploading","resumable","resumableFile","id","uploadModal","uploadNotSupported","setModalStateStart","setModalStateUploading","eventListenerConfirmCancelUpload","deleteUnfinishedUploads","Resumable","chunkSize","maxUploadChunkSize","query","uniqueIdentifierSuffix","permanentErrors","fileType","backupDBExtension","simultaneousUploads","prioritizeFirstAndLastChunk","testChunks","forceChunkSize","support","assignBrowse","assignDrop","handleFileAdded","handleFileSuccess","handleError","handleProgress","upload","percent","progress","textContent","isDiskFull","backupFailedValidation","reduceChunkBytes","opts","ceil","clickedDownload","renderPart","part","cssSelector","fileSize","downloadLink","filePath","parts","manageSchedulesModal","showAlertForBasic","alert","fetchSchedules","dismissButton","dismissSchedule","dismissTarget","scheduleId","dataset"],"mappings":"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"}