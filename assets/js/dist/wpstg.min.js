var version=function(){"use strict";function t(t,e,r,s){var n,o,a,i,l=!1,c=!1,u={},g=0,p=0,w={sensitivity:7,interval:100,timeout:0,handleFocus:!1};function h(t){n=t.clientX,o=t.clientY}function m(t,e){if(p&&(p=clearTimeout(p)),Math.abs(a-n)+Math.abs(i-o)<w.sensitivity)return g=1,c?void 0:r(t,e);a=n,i=o,p=setTimeout((function(){m(t,e)}),w.interval)}function f(t,e){return l=!0,p&&(p=clearTimeout(p)),t.removeEventListener("mousemove",h,!1),1!==g&&(a=e.clientX,i=e.clientY,t.addEventListener("mousemove",h,!1),p=setTimeout((function(){m(t,e)}),w.interval)),this}function d(t){t.target.matches(e+", "+e+" *")&&f(t.target.closest(e),t)}function v(t,e){return l=!1,p&&(p=clearTimeout(p)),t.removeEventListener("mousemove",h,!1),1===g&&(p=setTimeout((function(){!function(t,e){p&&(p=clearTimeout(p)),g=0,c||s(t,e)}(t,e)}),w.timeout)),this}function E(t){t.target.matches(e+", "+e+" *")&&v(t.target.closest(e),t)}function S(t){var s,n;t.target.matches(e+", "+e+" *")&&(s=t.target.closest(e),n=t,l||(c=!0,r(s,n)))}function y(t){var r,n;t.target.matches(e+", "+e+" *")&&(r=t.target.closest(e),n=t,!l&&c&&(c=!1,s(r,n)))}function b(){t.removeEventListener("focus",S,!1),t.removeEventListener("blur",y,!1)}return u.options=function(e){var r=e.handleFocus!==w.handleFocus;return w=Object.assign({},w,e),r&&(w.handleFocus?(t.addEventListener("focus",S,!1),t.addEventListener("blur",y,!1)):b()),u},u.remove=function(){t&&(t.removeEventListener("mouseover",d,!1),t.removeEventListener("mouseout",E,!1),b())},t&&(t.addEventListener("mouseover",d,!1),t.addEventListener("mouseout",E,!1)),u}var e,r;return e=jQuery,r={continueErrorHandle:!0,cache:{elements:[],get:function(t){return-1!==e.inArray(t,this.elements)||(this.elements[t]=e(t)),this.elements[t]},refresh:function(t){t.elements[t]=e(t)}},listenTooltip:function(){t(document,".wpstg--tooltip",(function(t,e){t.querySelector(".wpstg--tooltiptext").style.visibility="visible"}),(function(t,e){t.querySelector(".wpstg--tooltiptext").style.visibility="hidden"}))},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},getSwalModal:function(t,e){void 0===t&&(t=!1),void 0===e&&(e={});var r={confirmButton:"wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width",cancelButton:"wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width",actions:"wpstg--modal--actions",popup:t?"wpstg-swal-popup centered-modal":"wpstg-swal-popup"},s={customClass:Object.assign(r,e),buttonsStyling:!1,reverseButtons:!0,showClass:{popup:"wpstg--swal2-show wpstg-swal-show"}};return wpstgSwal.mixin(s)},showSuccessModal:function(t){this.getSwalModal().fire({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",icon:"success",title:"Success!",html:'<div class="wpstg--grey" style="text-align: left; margin-top: 8px;">'+t+"</div>"})},showWarningModal:function(t){this.getSwalModal().fire({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",icon:"warning",title:"",html:'<div class="wpstg--grey" style="text-align: left; margin-top: 8px;">'+t+"</div>"})},showErrorModal:function(t){this.getSwalModal().fire({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",icon:"error",title:"Error!",html:'<div class="wpstg--grey" style="text-align: left; margin-top: 8px;">'+t+"</div>"})},getSwalContainer:function(){return wpstgSwal.getContainer()},closeSwalModal:function(){wpstgSwal.close()},getDataFromWordPressResponse:function(t){if("object"!=typeof t)throw new Error("Unexpected response (ERR 1341)");if(!t.hasOwnProperty("success"))throw new Error("Unexpected response (ERR 1342)");if(!t.hasOwnProperty("data"))throw new Error("Unexpected response (ERR 1343)");if(!1===t.success)throw t.data instanceof Array&&t.data.length>0?new Error(t.data.shift()):new Error("Response was not successful");return t.data},isLoading:function(t){t&&!1!==t?r.cache.get(".wpstg-loader").show():r.cache.get(".wpstg-loader").hide()},slugify:function(t){return t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")},showAjaxFatalError:function(t,e,s){return e=e?e+"<br/><br/>":"Something went wrong! <br/><br/>",s=s?s+"<br/><br/>":"<br/><br/>Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.",!1===t?(r.showError(e+" Error: No response."+s),void window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess)):void 0!==t.error&&t.error?(r.showError(e+" Error: "+t.message+s),void window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess)):void 0},handleFetchErrors:function(t){return t.ok||r.showError("Error: "+t.status+" - "+t.statusText+". Please try again or contact support."),t},showError:function(t){r.cache.get("#wpstg-try-again").css("display","inline-block"),r.cache.get("#wpstg-cancel-cloning").text("Reset"),r.cache.get("#wpstg-resume-cloning").show(),r.cache.get("#wpstg-error-wrapper").show(),r.cache.get("#wpstg-error-details").show().html(t),r.cache.get("#wpstg-removing-clone").removeClass("loading"),r.cache.get(".wpstg-loader").hide(),e(".wpstg--modal--process--generic-problem").show().html(t)},resetErrors:function(){r.cache.get("#wpstg-error-details").hide().html("")},ajax:function(t,s,n,o,a,i,l){void 0===i&&(i=null),void 0===l&&(l=null),void 0===n&&(n="json"),!1!==o&&(o=!0);var c=10,u=1e4*(a=void 0===a?0:a);i=parseInt(i),isNaN(i)||(u*=i),e.ajax({url:ajaxurl+"?action=wpstg_processing&_="+Date.now()/1e3,type:"POST",dataType:n,cache:!1,data:t,error:function(e,g,p){if(console.log(e.status+" "+e.statusText+"---"+g),"function"!=typeof l||(l(e,g,p),r.continueErrorHandle))if(++a<=c)setTimeout((function(){r.ajax(t,s,n,o,a,i)}),u);else{var w=void 0===e.status?"Unknown":e.status;r.showError("Fatal Error:  "+w+" Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.")}else r.continueErrorHandle=!0},success:function(t){"function"==typeof s&&s(t)},statusCode:{404:function(){a>=c&&r.showError("Error 404 - Can't find ajax request URL! Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.")},500:function(){a>=c&&r.showError("Fatal Error 500 - Internal server error while processing the request! Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.")},504:function(){a>c&&r.showError("Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},502:function(){a>=c&&r.showError("Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},503:function(){a>=c&&r.showError("Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},429:function(){a>=c&&r.showError("Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},403:function(){a>=c&&r.showError("Refresh page or login again! The process should be finished successfully. \n ")}}})}}}();
//# sourceMappingURL=wpstg.min.js.map
