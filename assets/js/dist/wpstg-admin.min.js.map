{"version":3,"file":"wpstg-admin.min.js","sources":["../src/modules/wpstg-polyfill.js","../src/modules/wpstg-hover-intent.js","../src/wpstg.js","../src/modules/wpstg-dom-utils.js","../src/modules/wpstg-sidebar-menu.js","../src/modules/wpstg-contact-us.js","../src/modules/wpstg-clone-staging.js","../src/modules/wpstg-directory-navigation.js","../src/modules/wpstg-table-selection.js","../src/modules/wpstg-exclude-filters.js","../src/modules/wpstg-modal.js","../src/modules/wpstg-reset-modal.js","../src/modules/wpstg-cloning-advance-settings.js","../src/modules/wpstg-main-menu.js","../src/modules/wpstg-process-modal.js","../src/wpstg-admin.js"],"sourcesContent":["/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    retry: {\n      currentDelay: 0,\n      count: 0,\n      max: 10,\n      retryOnErrors: [401, 403, 404, 429, 502, 503, 504],\n      performingRequest: false,\n      incrementRetry: function(incrementRatio = 1.25) {\n        WPStagingCommon.retry.performingRequest = true;\n        if (WPStagingCommon.retry.currentDelay === 0) {\n          // start with a delay of 1sec\n          WPStagingCommon.retry.currentDelay = 1000;\n          WPStagingCommon.retry.count = 1;\n        }\n\n        WPStagingCommon.retry.currentDelay += (500 * WPStagingCommon.retry.count * incrementRatio);\n        WPStagingCommon.retry.count++;\n      },\n      canRetry: function() {\n        return WPStagingCommon.retry.count < WPStagingCommon.retry.max;\n      },\n      reset: function() {\n        WPStagingCommon.retry.currentDelay = 0;\n        WPStagingCommon.retry.count = 0;\n        WPStagingCommon.retry.performingRequest = false;\n      },\n    },\n    memoryExhaustArticleLink: 'https://wp-staging.com/docs/php-fatal-error-allowed-memory-size-of-134217728-bytes-exhausted/',\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup wpstg-centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      // If retry request no need to show Error;\n      if (WPStagingCommon.retry.performingRequest) {\n        return;\n      }\n\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","import {closest} from './wpstg-polyfill';\nimport WPStagingCommon from '../wpstg.js';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getPreviousSibling(element, selector) {\n  let sibling = element.previousElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.previousElementSibling;\n  }\n}\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n\n/**\n * Toggle target element set in data-wpstg-target of the given element\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleToggleElement(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.classList.toggle(hiddenClass);\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-copy to element(s) in data-wpstg-target\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyPaste(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target') || !element.getAttribute('data-wpstg-copy')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  navigator.clipboard.writeText(element.getAttribute('data-wpstg-copy'));\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.value = element.getAttribute('data-wpstg-copy', '');\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-source to clipboard\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyToClipboard(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-source')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const el = container.querySelector(element.getAttribute('data-wpstg-source'));\n\n  if (el) {\n    navigator.clipboard.writeText(el.value);\n  }\n}\n\n/**\n * A confirmation modal\n *\n * @param title\n * @param html\n * @param confirmText\n * @param confirmButtonClass\n * @return Promise\n */\nexport function confirmModal(title, html, confirmText, confirmButtonClass) {\n  return WPStagingCommon.getSwalModal(false, {\n    container: 'wpstg-swal-push-container',\n    confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n  }).fire({\n    title: title,\n    icon: 'warning',\n    html: html,\n    width: '750px',\n    focusConfirm: false,\n    confirmButtonText: confirmText,\n    showCancelButton: true,\n  });\n};\n/**\n * @param className\n * @param callback\n */\nexport function setClickHandlerByClass(className, callback) {\n  const elements = document.querySelectorAll(`.${className}`);\n\n  if (elements.length) {\n    elements.forEach((element) => {\n      element.addEventListener('click', callback);\n    });\n  } else {\n    console.warn(`No elements found with class: ${className}`);\n  }\n};\n\n/**\n * Initializes a module using a MutationObserver.\n *\n * @param {string} selector - The CSS selector for the target element.\n * @param {function} ModuleConstructor - The constructor function of the module to be initialized.\n *\n * @todo Unused, consider removing this in the future\n */\nexport function initializeModuleWithObserver(selector, ModuleConstructor) {\n  const observer = new MutationObserver(function(mutationsList, observer) {\n    const targetElement = document.querySelector(selector);\n    if (targetElement !== null) {\n      new ModuleConstructor();\n      observer.disconnect();\n    }\n  });\n  observer.observe(document.documentElement, {childList: true, subtree: true});\n};\n\n/**\n * Checks if a modal specified by the given selector is available in the DOM.\n * If the modal is available, it waits for a delay and then initializes the Module.\n * If the modal is not yet available, it recursively checks after a brief interval.\n *\n * @param {string} selector - CSS selector for the element to search for.\n * @param {function} Module - Constructor function to create an instance of the module.\n *\n * @todo Unused, consider removing this in the future\n */\nexport function initializeModuleDelayedIfElementIsAvailable(selector, Module) {\n  const element = document.querySelector(selector);\n  if (element) {\n    setTimeout(() => {\n      new Module();\n    }, 1000);\n  } else {\n    setTimeout(() => initializeModuleDelayedIfElementIsAvailable(selector, Module), 10);\n  }\n};\n\n/**\n * Hides elements in the DOM that match the given selector by setting their display style to 'none'.\n *\n * @param {string} selector - CSS selector for the elements to be hidden.\n * @return {void}\n */\nexport function hide(selector) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach((element) => {\n    element.style.display = 'none';\n  });\n};\n\n/**\n * Displays elements in the DOM that match the given selector by setting their display style to 'block'.\n *\n * @param {string} selector - CSS selector for the elements to be displayed.\n * @return {void}\n */\nexport function show(selector) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach((element) => {\n    element.style.display = 'block';\n  });\n}\n","/**\n * Enable side bar menu and set url on tab click\n */\nexport default class WpstgSidebarMenu {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.wpstdStagingTab = document.querySelector('#wpstg--tab--toggle--staging');\n    this.wpstdBackupTab = document.querySelector('#wpstg--tab--toggle--backup');\n    this.wpstdSidebarMenu = document.querySelector('#toplevel_page_wpstg_clone');\n    this.addEvents();\n  }\n\n  addEvents() {\n    if (this.wpstdStagingTab !== null) {\n      this.wpstdStagingTab.addEventListener('click', () => {\n        this.setPageUrl('wpstg_clone');\n        this.setSidebarMenu('wpstg_clone');\n      });\n    }\n\n    if (this.wpstdBackupTab !== null) {\n      this.wpstdBackupTab.addEventListener('click', () => {\n        this.setPageUrl('wpstg_backup');\n        this.setSidebarMenu('wpstg_backup');\n      });\n    }\n  }\n\n  setPageUrl(page) {\n    window.history.pushState(null, null, window.location.pathname + '?page=' + page);\n  }\n\n  setSidebarMenu(page) {\n    const wpstgSidebarMenuElements = this.wpstdSidebarMenu.querySelector('ul').querySelectorAll('li');\n    if (wpstgSidebarMenuElements.length > 0) {\n      for (let i = 0; i < wpstgSidebarMenuElements.length; i++) {\n        wpstgSidebarMenuElements[i].classList.remove('current');\n        if (wpstgSidebarMenuElements[i].querySelector('a') !== null) {\n          if (wpstgSidebarMenuElements[i].querySelector('a').getAttribute('href') ==='admin.php?page=' + page) {\n            wpstgSidebarMenuElements[i].classList.add('current');\n          }\n        }\n      }\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Handle toggle of contact us modal pupup\n */\n\nexport default class WpstgContactUs {\n  constructor(wpstgObject = wpstg) {\n    this.wpstgObject = wpstgObject;\n    this.characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    this.currentDate = new Date();\n    this.init();\n  }\n\n  init() {\n    this.contactUsModal = document.querySelector('#wpstg-contact-us-modal');\n    this.contactUsButton = document.querySelector('#wpstg-contact-us-button');\n    this.contactUsButtonBackupTab = document.querySelector('#wpstg--tab--backup  #wpstg-contact-us-button');\n    this.reportIssueButton = document.querySelector('#wpstg-contact-us-report-issue');\n    this.askInTheForumForm = document.querySelector('#wpstg-contact-us-report-issue-form');\n    this.successForm = document.querySelector('#wpstg-contact-us-success-form');\n    this.contactUsReportIssueBtn = document.querySelector('#wpstg-contact-us-report-issue-btn');\n    this.contactUsCloseButton = document.querySelector('#wpstg-modal-close');\n    this.contactUsSuccessPopup = document.querySelector('#wpstg-contact-us-success-form');\n    this.contactUsSuccessPopupClose = document.querySelector('#wpstg-contact-us-success-modal-close');\n    this.debugCodeCopyButton = document.querySelector('#wpstg-contact-us-debug-code-copy');\n    this.contactUsLoader = document.querySelector('#wpstg-contact-us-report-issue-loader');\n    this.contactUsResponse = document.querySelector('#wpstg-contact-us-debug-response');\n    this.contactUsDebugCodeField = document.querySelector('#wpstg-contact-us-debug-code');\n    this.contactUsSupport = document.querySelector('#wpstg-contact-us-support-forum');\n    this.isDebugWindowOpened = false;\n    this.addEvents();\n\n    this.notyf = new Notyf({\n      duration: 6000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: true,\n        },\n      ],\n    });\n  }\n\n  addEvents() {\n    document.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        this.hide(this.contactUsModal);\n        this.hide(this.askInTheForumForm);\n        this.hide(this.contactUsSuccessPopup);\n        this.hide(this.contactUsSupport);\n        this.isDebugWindowOpened = false;\n      }\n    });\n    if (this.contactUsButton !== null) {\n      this.contactUsButton.addEventListener('click', () => {\n        this.show(this.contactUsModal);\n      });\n    }\n    if (this.contactUsButtonBackupTab !== null) {\n      this.contactUsButtonBackupTab.addEventListener('click', () => {\n        this.show(this.contactUsModal);\n      });\n    }\n    this.reportIssueButton.addEventListener('click', () => {\n      if (this.isDebugWindowOpened) {\n        this.hide(this.askInTheForumForm);\n      } else {\n        this.show(this.askInTheForumForm);\n      }\n\n      this.isDebugWindowOpened = !this.isDebugWindowOpened;\n    });\n    this.contactUsReportIssueBtn.addEventListener('click', () => {\n      this.sendDebugInfo();\n    });\n    this.contactUsSuccessPopupClose.addEventListener('click', () => {\n      this.hide(this.contactUsSuccessPopup);\n    });\n    this.contactUsCloseButton.addEventListener('click', () => {\n      this.hide(this.contactUsModal);\n      this.hide(this.contactUsSupport);\n      this.hide(this.askInTheForumForm);\n      this.isDebugWindowOpened = false;\n    });\n    this.debugCodeCopyButton.addEventListener('click', () => {\n      this.copyDebugCode();\n      this.notyf.success('Debug code copied to clipboard');\n    });\n  }\n\n  copyDebugCode() {\n    this.contactUsDebugCodeField.select();\n    this.contactUsDebugCodeField.setSelectionRange(0, 99999);\n    navigator.clipboard.writeText(this.contactUsDebugCodeField.value);\n  }\n\n  show(element) {\n    element.style.display = 'block';\n  }\n\n  hide(element) {\n    element.style.display = 'none';\n  }\n\n  generateDebugCode(length) {\n    let result = '';\n    for ( let i = 0; i < length; i++ ) {\n      result += this.characters.charAt(Math.floor(Math.random() * this.characters.length));\n    }\n\n    return 'wpstg-' + result + '-' + this.currentDate.getHours() + this.currentDate.getMinutes() + this.currentDate.getSeconds();\n  }\n\n  sendDebugInfo() {\n    this.show(this.contactUsLoader);\n    this.contactUsReportIssueBtn.disabled = true;\n    const debugCode = this.generateDebugCode(8);\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg_send_debug_log_report',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        debugCode: debugCode,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.contactUsReportIssueBtn.disabled = false;\n      if (response.ok) {\n        return response.json();\n      }\n    }).then((data) => {\n      if (data.response && data.response.sent === true) {\n        this.contactUsDebugCodeField.value = debugCode;\n        this.show(this.contactUsSuccessPopup);\n      } else {\n        this.contactUsDebugCodeField.value = debugCode;\n        this.show(this.contactUsSuccessPopup);\n      }\n\n      this.hide(this.contactUsLoader);\n    }).catch((error) => {\n      this.hide(this.contactUsLoader);\n      this.show(this.contactUsSupport);\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\nimport WpstgSidebarMenu from './wpstg-sidebar-menu.js';\nimport WpstgContactUs from './wpstg-contact-us';\n\n/**\n * Enable/Disable cloning for staging site\n */\nexport default class WpstgCloneStaging {\n  constructor(\n      pageWrapperId = '#wpstg-clonepage-wrapper',\n      wpstgObject = wpstg,\n  ) {\n    this.pageWrapper = dom.qs(pageWrapperId);\n    this.wpstgObject = wpstgObject;\n    this.enableButtonId = '#wpstg-enable-staging-cloning';\n    this.enableAction = 'wpstg_enable_staging_cloning';\n\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    if (this.pageWrapper === null) {\n      return;\n    }\n\n    dom.addEvent(this.pageWrapper, 'click', this.enableButtonId, () => {\n      this.sendRequest(this.enableAction);\n    });\n    new WpstgSidebarMenu();\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  sendRequest(action) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        location.reload();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\nimport wpstg from '../wpstg.js';\n\n/**\n * Fetch directory direct child directories\n */\nexport default class WpstgDirectoryNavigation {\n  constructor(\n      directoryListingSelector = '#wpstg-directories-listing',\n      wpstgObject = wpstg,\n      notyf = null,\n  ) {\n    this.directoryListingContainer = dom.qs(directoryListingSelector);\n    this.wpstgObject = wpstgObject;\n    this.dirCheckboxSelector = '.wpstg-check-dir';\n    this.dirExpandSelector = '.wpstg-expand-dirs';\n    this.unselectAllDirsSelector = '.wpstg-unselect-dirs';\n    this.selectDefaultDirsSelector = '.wpstg-select-dirs-default';\n    this.fetchChildrenAction = 'wpstg_fetch_dir_children';\n    this.currentCheckboxElement = null;\n    this.currentParentDiv = null;\n    this.currentLoader = null;\n    this.existingExcludes = [];\n    this.excludedDirectories = [];\n    this.isDefaultSelected = false;\n    this.notyf = notyf;\n\n    this.init();\n  }\n\n  addEvents() {\n    if (this.directoryListingContainer === null) {\n      console.log('Error: Unable to add directory navigation events.');\n      return;\n    }\n\n    dom.addEvent(this.directoryListingContainer, 'change', this.dirCheckboxSelector, (element, event) => {\n      event.preventDefault();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.dirExpandSelector, (element, event) => {\n      event.preventDefault();\n      if (this.toggleDirExpand(element)) {\n        this.sendRequest(this.fetchChildrenAction, element);\n      }\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.unselectAllDirsSelector, () => {\n      this.unselectAll();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.selectDefaultDirsSelector, () => {\n      this.selectDefault();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', '.wpstg-expand-dirs', (target, event) => {\n      event.preventDefault();\n      this.toggleDirectoryNavigation(target);\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'change', 'input.wpstg-check-dir', (target) => {\n      this.updateDirectorySelection(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n    this.parseExcludes();\n  }\n\n  /**\n   * Toggle Dir Expand,\n   * Return true if children aren't fetched\n   * @param {HTMLElement} element\n   * @return {boolean}\n   */\n  toggleDirExpand(element) {\n    this.currentParentDiv = element.parentElement;\n    this.currentCheckboxElement = dom.getPreviousSibling(element, 'input');\n    this.currentLoader = this.currentParentDiv.querySelector('.wpstg-is-dir-loading');\n    if (this.currentCheckboxElement.getAttribute('wpstg-data-navigateable', 'false') === 'false') {\n      return false;\n    }\n\n    if (this.currentCheckboxElement.getAttribute('wpstg-data-scanned', 'false') === 'false') {\n      return true;\n    }\n\n    return false;\n  }\n\n  sendRequest(action) {\n    if (this.currentLoader !== null) {\n      this.currentLoader.style.display = 'inline-block';\n    }\n\n    const changed = this.currentCheckboxElement.getAttribute('wpstg-data-changed');\n    const path = this.currentCheckboxElement.getAttribute('wpstg-data-path');\n    const prefix = this.currentCheckboxElement.getAttribute('wpstg-data-prefix');\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        dirPath: path,\n        prefix: prefix,\n        isChecked: this.currentCheckboxElement.checked,\n        forceDefault: changed === 'true',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.currentCheckboxElement.setAttribute('wpstg-data-scanned', true);\n        const dirContainer = document.createElement('div');\n        dirContainer.classList.add('wpstg-dir');\n        dirContainer.classList.add('wpstg-subdir');\n        dirContainer.innerHTML = JSON.parse(data.directoryListing);\n        this.currentParentDiv.appendChild(dirContainer);\n        if (this.currentLoader !== null) {\n          this.currentLoader.style.display = 'none';\n        }\n\n        dom.slideDown(dirContainer);\n\n        return;\n      }\n\n      if (this.notyf !== null) {\n        this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n      } else {\n        alert('Error: ' + this.wpstgObject.i18n['somethingWentWrong']);\n      }\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getExcludedDirectories() {\n    this.excludedDirectories = [];\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input:not(:checked)').forEach((element) => {\n      if (!this.isParentExcluded(element.value)) {\n        this.excludedDirectories.push(element.value);\n      }\n    });\n\n    if (!this.existingExcludes) {\n      this.existingExcludes = [];\n    }\n\n    this.existingExcludes.forEach((exclude) => {\n      if (!this.isParentExcluded(exclude) && !this.isScanned(exclude)) {\n        this.excludedDirectories.push(exclude);\n      }\n    });\n\n    return this.excludedDirectories.join(this.wpstgObject.settings?.directorySeparator);\n  }\n\n  /**\n   * @param {string} path\n   * @return {bool}\n   */\n  isParentExcluded(path) {\n    let isParentAlreadyExcluded = false;\n    this.excludedDirectories.forEach((dir) => {\n      if (path.startsWith(dir + '/')) {\n        isParentAlreadyExcluded = true;\n      }\n    });\n\n    return isParentAlreadyExcluded;\n  }\n\n  getExtraDirectoriesRootOnly() {\n    this.getExcludedDirectories();\n    const extraDirectories = [];\n    this.directoryListingContainer.querySelectorAll(':not(.wpstg-subdir)>.wpstg-dir>input.wpstg-wp-non-core-dir:checked').forEach((element) => {\n      extraDirectories.push(element.value);\n    });\n\n    // Check if extra directories text area exists\n    // TODO: remove extraCustomDirectories code if no one require extraCustomDirectories...\n    const extraDirectoriesTextArea = dom.qs('#wpstg_extraDirectories');\n    if (extraDirectoriesTextArea === null || extraDirectoriesTextArea.value === '') {\n      return extraDirectories.join(this.wpstgObject.settings?.directorySeparator);\n    }\n\n    const extraCustomDirectories = extraDirectoriesTextArea.value.split(/\\r?\\n/);\n\n    return extraDirectories.concat(extraCustomDirectories).join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  unselectAll() {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      element.checked = false;\n    });\n\n    this.countSelectedFiles();\n  }\n\n  selectDefault() {\n    // unselect all checkboxes\n    this.unselectAll();\n\n    // only select those checkboxes whose class is wpstg-wp-core-dir\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input.wpstg-wp-core-dir').forEach((element) => {\n      element.checked = true;\n    });\n\n    // then unselect those checkboxes whose parent has wpstg extra checkbox\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir > .wpstg-wp-non-core-dir').forEach((element) => {\n      element.parentElement.querySelectorAll('input.wpstg-wp-core-dir').forEach((element) => {\n        element.checked = false;\n      });\n    });\n\n    this.isDefaultSelected = true;\n\n    this.countSelectedFiles();\n  }\n\n  parseExcludes() {\n    this.existingExcludes = this.directoryListingContainer.getAttribute('wpstg-data-existing-excludes', []);\n\n    if (typeof this.existingExcludes === 'undefined' || !this.existingExcludes) {\n      this.existingExcludes = [];\n      return;\n    }\n\n    if (this.existingExcludes.length === 0) {\n      this.existingExcludes = [];\n      return;\n    }\n\n    const existingExcludes = this.existingExcludes.split(',');\n    this.existingExcludes = existingExcludes.map((exclude) => {\n      if (exclude.substr(0, 1) === '/') {\n        return exclude.slice(1);\n      }\n\n      return exclude;\n    });\n  }\n\n  isScanned(exclude) {\n    let scanned = false;\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir>input').forEach((element) => {\n      if (element.value === exclude) {\n        scanned = true;\n      }\n    });\n\n    return scanned;\n  }\n\n  toggleDirectoryNavigation(element) {\n    const cbElement = dom.getPreviousSibling(element, 'input');\n    if (cbElement.getAttribute('wpstg-data-navigateable', 'false') === 'false') {\n      return;\n    }\n\n    if (cbElement.getAttribute('wpstg-data-scanned', 'false') === 'false') {\n      return;\n    }\n\n    const subDirectories = dom.getNextSibling(element, '.wpstg-subdir');\n\n    if (subDirectories.style.display === 'none') {\n      dom.slideDown(subDirectories);\n    } else {\n      dom.slideUp(subDirectories);\n    }\n  }\n\n  updateDirectorySelection(element) {\n    const parent = element.parentElement;\n    element.setAttribute('wpstg-data-changed', 'true');\n    if (element.checked) {\n      dom.getParents(parent, '.wpstg-dir').forEach((parElem) => {\n        for (let i = 0; i < parElem.children.length; i++) {\n          if (parElem.children[i].matches('.wpstg-check-dir')) {\n            parElem.children[i].checked = true;\n          }\n        }\n      });\n      parent.querySelectorAll('.wpstg-expand-dirs').forEach((x) => {\n        if (x.textContent === 'wp-admin' || x.textContent === 'wp-includes') {\n          return;\n        }\n        x.classList.remove('disabled');\n      });\n      parent.querySelectorAll('.wpstg-subdir .wpstg-check-dir').forEach((x) => {\n        x.checked = true;\n      });\n    } else {\n      parent.querySelectorAll('.wpstg-expand-dirs, .wpstg-check-subdirs').forEach((x) => {\n        x.classList.add('disabled');\n      });\n      parent.querySelectorAll('.wpstg-dir .wpstg-check-dir').forEach((x) => {\n        x.checked = false;\n      });\n    }\n\n    this.countSelectedFiles();\n  }\n\n  countSelectedFiles() {\n    const themesCount = this.directoryListingContainer.querySelectorAll('[wpstg-data-dir-type=\"theme\"]:checked').length;\n    const pluginsCount = this.directoryListingContainer.querySelectorAll('[wpstg-data-dir-type=\"plugin\"]:checked').length;\n    const filesCountElement = dom.qs('#wpstg-files-count');\n    if (themesCount === 0 && pluginsCount === 0) {\n      filesCountElement.classList.add('danger');\n      filesCountElement.innerHTML = this.wpstgObject.i18n['noFileSelected'];\n    } else {\n      filesCountElement.classList.remove('danger');\n      filesCountElement.innerHTML = this.wpstgObject.i18n['filesSelected'].replace('{t}', themesCount).replace('{p}', pluginsCount);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Database tables selection\n */\nexport default class WpstgTableSelection {\n  constructor(\n      databaseTableSectionSelector = '#wpstg-scanning-db',\n      workflowSelector = '#wpstg-workflow',\n      networkCloneSelector = '#wpstg_network_clone',\n      inputSelector = '#wpstg_select_tables_cloning',\n      wpstgObject = wpstg,\n  ) {\n    this.databaseTableSection = dom.qs(databaseTableSectionSelector);\n    this.workflow = dom.qs(workflowSelector);\n    this.networkCloneSelector = networkCloneSelector;\n    this.networkCloneCheckbox = dom.qs(networkCloneSelector);\n    this.wpstgObject = wpstgObject;\n    this.isAllTablesChecked = true;\n    this.isMultisite = this.wpstgObject.isMultisite === '1';\n    this.isNetworkClone = false;\n    this.inputSelector = inputSelector;\n    this.input = dom.qs(this.inputSelector);\n\n    this.init();\n  }\n\n  setNetworkClone(isNetworkClone) {\n    this.isNetworkClone = isNetworkClone;\n  }\n\n  addEvents() {\n    if (this.workflow === null) {\n      console.log('Error: database table section is null. Cannot register events');\n      return;\n    }\n\n    dom.addEvent(this.workflow, 'change', this.networkCloneSelector, () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(this.workflow, 'change', this.inputSelector, () => {\n      this.countSelectedTables();\n    });\n\n    dom.addEvent(this.workflow, 'click', '.wpstg-button-select', (target, event) => {\n      event.preventDefault();\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(this.workflow, 'click', '.wpstg-button-unselect', (target, event) => {\n      event.preventDefault();\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(this.workflow, 'click', '.wpstg-button-unselect-wpstg', (target, event) => {\n      event.preventDefault();\n      this.unselectWPSTGTables();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  getRegexPattern() {\n    let pattern = '^' + this.wpstgObject.tblprefix;\n    let isNetwork = false;\n    if (this.networkCloneCheckbox !== undefined && this.networkCloneCheckbox !== null) {\n      isNetwork = this.networkCloneCheckbox.checked;\n    }\n\n    // Force network clone true if set explicitly\n    if (this.isNetworkClone) {\n      isNetwork = true;\n    }\n\n    if (this.isMultisite && !isNetwork) {\n      pattern += '([^0-9])_*';\n    }\n\n    return pattern;\n  }\n\n  selectDefaultTables() {\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        option.selected = true;\n      } else {\n        option.selected = false;\n      }\n    });\n\n    this.countSelectedTables();\n  }\n\n  toggleTableSelection() {\n    if (false === this.isAllTablesChecked) {\n      this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.selected = true;\n      });\n      this.databaseTableSection.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n      this.isAllTablesChecked = true;\n    } else {\n      this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.selected = false;\n      });\n      this.databaseTableSection.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n      this.isAllTablesChecked = false;\n    }\n\n    this.countSelectedTables();\n  }\n\n  unselectWPSTGTables() {\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const regexPattern = 'wpstg';\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern) && !name.match(this.wpstgObject.tblprefix +'wpstg_queue')) {\n        option.selected = false;\n      }\n    });\n\n    this.countSelectedTables();\n  }\n\n  getSelectedTablesWithoutPrefix() {\n    const selectedTablesWithoutPrefix = [];\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning option:checked');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (!name.match(regexPattern)) {\n        selectedTablesWithoutPrefix.push(option.value);\n      }\n    });\n\n    return selectedTablesWithoutPrefix.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getIncludedTables() {\n    const includedTables = [];\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning option:checked');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        includedTables.push(option.value);\n      }\n    });\n\n    return includedTables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getExcludedTables() {\n    const excludedTables = [];\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning option:not(:checked)');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        excludedTables.push(option.value);\n      }\n    });\n\n    return excludedTables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  countSelectedTables() {\n    const tablesCount = this.input.querySelectorAll('option:checked').length;\n    const tablesCountElement = dom.qs('#wpstg-tables-count');\n    if (tablesCount === 0) {\n      tablesCountElement.classList.add('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['noTableSelected'];\n    } else {\n      tablesCountElement.classList.remove('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['tablesSelected'].replace('{d}', tablesCount);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Rich Exclude Filter Module\n */\nexport default class WpstgExcludeFilters {\n  constructor(\n      excludeFilterContainerSelector = '#wpstg-exclude-filters-container',\n      wpstgObject = wpstg,\n  ) {\n    this.excludeContainer = dom.qs(excludeFilterContainerSelector);\n    this.excludeTableBody = dom.qs(`${excludeFilterContainerSelector} tbody`);\n    this.wpstgObject = wpstgObject;\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-size-rule', () => {\n      this.addFileSizeExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-ext-rule', () => {\n      this.addFileExtExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-name-rule', () => {\n      this.addFileNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-dir-name-rule', () => {\n      this.addDirNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-clear-all-rules', () => {\n      this.clearExcludes();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-remove-exclude-rule', (target) => {\n      this.removeExclude(target);\n    });\n  }\n\n  init() {\n    if (this.excludeContainer === null) {\n      console.log('Error: Given table selector not found!');\n      return;\n    }\n\n    this.addEvents();\n  }\n\n  addFileSizeExclude() {\n    this.addExcludeRuleRow('#wpstg-file-size-exclude-filter-template');\n  }\n\n  addFileExtExclude() {\n    this.addExcludeRuleRow('#wpstg-file-ext-exclude-filter-template');\n  }\n\n  addFileNameExclude() {\n    this.addExcludeRuleRow('#wpstg-file-name-exclude-filter-template');\n  }\n\n  addDirNameExclude() {\n    this.addExcludeRuleRow('#wpstg-dir-name-exclude-filter-template');\n  }\n\n  addExcludeRuleRow(templateName) {\n    const excludeRowTemplate = dom.qs(templateName);\n    if (excludeRowTemplate !== null) {\n      const clone = excludeRowTemplate.content.cloneNode(true);\n      const excludeRow = clone.querySelector('tr');\n\n      this.excludeTableBody.appendChild(excludeRow);\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'inherit';\n      });\n    }\n  }\n\n  clearExcludes() {\n    this.excludeTableBody.innerHTML = '';\n    dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n      e.style.display = 'none';\n    });\n  }\n\n  removeExclude(target) {\n    if (target.parentElement !== null && target.parentElement.parentElement !== null) {\n      this.excludeTableBody.removeChild(target.parentElement.parentElement);\n    }\n\n    if (this.excludeTableBody.innerHTML.trim() === '') {\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'none';\n      });\n    }\n  }\n\n  /**\n   * Converts all the exclude filters arrays into one single string to keep size of post request small\n   * @return {string}\n   */\n  getExcludeFilters() {\n    const globExcludes = [];\n    const sizeExcludes = [];\n\n    const sizeCompares = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleCompare[]\"]');\n    const sizeSizes = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileSizeExcludeRuleSize[]\"]');\n    const sizeByte = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleByte[]\"]');\n    for (const [key, sizeInput] of Object.entries(sizeSizes)) {\n      if (sizeInput.value !== '') {\n        sizeExcludes.push(sizeCompares[key].value + ' ' + sizeInput.value + sizeByte[key].value);\n      }\n    }\n\n    const extensionInputs = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileExtExcludeRule[]\"]');\n    extensionInputs.forEach((x) => {\n      const ext = this.cleanStringForGlob(x.value);\n      if (ext !== '') {\n        globExcludes.push('ext:' + ext.trim());\n      }\n    });\n\n    const fileNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileNameExcludeRulePos[]\"]');\n    const fileNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileNameExcludeRulePath[]\"]');\n    for (const [key, fileInput] of Object.entries(fileNames)) {\n      const fileName = this.cleanStringForGlob(fileInput.value);\n      if (fileName !== '') {\n        globExcludes.push('file:' + fileNamesPos[key].value + ' ' + fileName.trim());\n      }\n    }\n\n    const dirNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgDirNameExcludeRulePos[]\"]');\n    const dirNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgDirNameExcludeRulePath[]\"]');\n    for (const [key, dirInput] of Object.entries(dirNames)) {\n      const dirName = this.cleanStringForGlob(dirInput.value);\n      if (dirName !== '') {\n        globExcludes.push('dir:' + dirNamesPos[key].value + ' ' + dirName.trim());\n      }\n    }\n\n    return {\n      'sizes': sizeExcludes.filter(this.onlyUnique).join(','),\n      // return set of unique rules\n      'globs': globExcludes.filter(this.onlyUnique).join(','),\n    };\n  }\n\n  onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n\n  /**\n   * Remove most of the comment glob characters from the string\n   * @param {String} value\n   * @return {String}\n   */\n  cleanStringForGlob(value) {\n    // will replace character like * ^ / \\ ! ? [ from the string\n    return value.replace(/[*^//!\\[?]/g, '');\n  }\n}\n","/**\n * Basic WP Staging Modal implemented with help of Sweetalerts\n */\nexport default class WpstgModal {\n  constructor(\n      confirmAction,\n      wpstgObject = wpstg,\n  ) {\n    this.confirmAction = confirmAction;\n    this.wpstgObject = wpstgObject;\n  }\n\n  show(swalOptions, additionalParams = {}, callback = null) {\n    wpstgSwal.fire(swalOptions).then((result) => {\n      if (result.value && this.error !== null) {\n        this.triggerConfirmAction(additionalParams, callback);\n      }\n    });\n  }\n\n  triggerConfirmAction(additionalParams = {}, callback = null) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams(Object.assign({\n        action: this.confirmAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }, additionalParams)),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((response) => {\n      if (callback !== null) {\n        callback(response);\n      }\n    }).catch((error) => {\n      console.log(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","\nimport * as dom from './wpstg-dom-utils.js';\nimport WpstgDirectoryNavigation from './wpstg-directory-navigation.js';\nimport WpstgTableSelection from './wpstg-table-selection';\nimport WpstgExcludeFilters from './wpstg-exclude-filters.js';\nimport WpstgModal from './wpstg-modal.js';\nimport WPStagingCommon from './../wpstg.js';\n\n/**\n * Manage RESET MODAL\n */\nexport default class WpstgResetModal {\n  constructor(\n      cloneID,\n      workflowSelector = '#wpstg-workflow',\n      fetchExcludeSettingsAction = 'wpstg_clone_excludes_settings',\n      modalErrorAction = 'wpstg_modal_error',\n      wpstgObject = wpstg,\n  ) {\n    this.cloneID = cloneID;\n    this.workflow = dom.qs(workflowSelector);\n    this.wpstgObject = wpstgObject;\n    this.fetchExcludeSettingsAction = fetchExcludeSettingsAction;\n    this.modalErrorAction = modalErrorAction;\n    this.resetButtonClass = 'wpstg-confirm-reset-clone';\n    this.resetModalContainerClass = 'wpstg-reset-confirmation';\n    this.resetTabSelector = '.wpstg-reset-exclude-tab';\n    this.directoryNavigator = null;\n    this.excludeFilters = null;\n    this.tableSelector = null;\n    this.isNetworkClone = false;\n  }\n\n  addEvents() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (resetModalContainer === null) {\n      console.log('Exit');\n      return;\n    }\n\n    dom.addEvent(resetModalContainer, 'click', this.resetTabSelector, (target) => {\n      this.toggleContent(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  setNetworkClone(isNetworkClone) {\n    this.isNetworkClone = isNetworkClone;\n  }\n\n  toggleContent(target) {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const contentId = target.getAttribute('data-id');\n    const tabTriangle = target.querySelector('.wpstg-tab-triangle');\n    const isCollapsed = target.getAttribute('data-collapsed', 'true');\n    const content = dom.qs(contentId);\n    if (isCollapsed === 'true') {\n      if (resetModalContainer.classList.contains('has-collapsible-open')) {\n        resetModalContainer.classList.add('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.add('has-collapsible-open');\n      }\n\n      dom.slideDown(content);\n      tabTriangle.style.transform = 'rotate(90deg)';\n      target.setAttribute('data-collapsed', 'false');\n    } else {\n      if (resetModalContainer.classList.contains('has-collapsible-open-2')) {\n        resetModalContainer.classList.remove('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.remove('has-collapsible-open');\n      }\n\n      dom.slideUp(content);\n      tabTriangle.style.removeProperty('transform');\n      target.setAttribute('data-collapsed', 'true');\n    }\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    this.init();\n    this.fetchCloneExcludes();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return WPStagingCommon.getSwalModal(false, {\n      confirmButton: this.resetButtonClass + ' wpstg-confirm-reset-clone wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n      container: this.resetModalContainerClass + ' wpstg-swal2-container wpstg-swal2-loading',\n    }).fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '400px',\n      focusConfirm: false,\n      confirmButtonText: this.wpstgObject.i18n.resetClone,\n      showCancelButton: true,\n    });\n  }\n\n  fetchCloneExcludes() {\n    this.error = null;\n    // send ajax request and fetch preserved exclude settings\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.fetchExcludeSettingsAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        job: 'resetting',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if (!data.success) {\n        const errorModal = new WpstgModal(this.modalErrorAction, this.wpstgObject);\n        errorModal.show(Object.assign({\n          title: 'Error',\n          icon: 'error',\n          html: this.wpstgObject.i18n['somethingWentWrong'],\n          width: '500px',\n          confirmButtonText: 'Ok',\n          showCancelButton: false,\n          customClass: {\n            confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n            cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n            actions: 'wpstg--modal--actions',\n            popup: 'wpstg-swal-popup wpstg-centered-modal',\n          },\n          buttonsStyling: false,\n          reverseButtons: true,\n        }, data.swalOptions), {\n          type: data.type,\n        });\n\n        return;\n      }\n\n      const modal = dom.qs('.wpstg-reset-confirmation');\n      modal.classList.remove('wpstg-swal2-loading');\n      modal.querySelector('.wpstg--swal2-popup').style.width = '540px';\n      modal.querySelector('.wpstg--swal2-content').innerHTML = data.html;\n      this.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, null);\n      this.directoryNavigator.countSelectedFiles();\n      this.excludeFilters = new WpstgExcludeFilters();\n      this.tableSelector = new WpstgTableSelection('#wpstg-reset-excluded-tables', '.' + this.resetModalContainerClass);\n      this.tableSelector.setNetworkClone(this.isNetworkClone);\n      this.tableSelector.countSelectedTables();\n    }).catch((error) => {\n      this.renderError({\n        'html': this.wpstgObject.i18n['somethingWentWrong'] + ' ' + error,\n      });\n    });\n  }\n\n  getDirectoryNavigator() {\n    return this.directoryNavigator;\n  }\n\n  getExcludeFilters() {\n    return this.excludeFilters;\n  }\n\n  getTableSelector() {\n    return this.tableSelector;\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Handle toggle of advance settings checkboxes\n */\nexport default class WpstgCloningAdvanceSettings {\n  constructor(\n      baseContainerSelector = '#wpstg-clonepage-wrapper',\n  ) {\n    this.baseContainer = dom.qs(baseContainerSelector);\n    this.checkBoxSettingTogglerSelector = '.wpstg-toggle-advance-settings-section';\n    this.init();\n  }\n\n  /**\n   * Add events\n   * @return {void}\n   */\n  addEvents() {\n    if (this.baseContainer === null) {\n      return;\n    }\n\n    dom.addEvent(this.baseContainer, 'change', this.checkBoxSettingTogglerSelector, (element) => {\n      this.toggleSettings(element);\n    });\n  }\n\n  /**\n   * @return {void}\n   */\n  init() {\n    this.addEvents();\n  }\n\n  /**\n   * Expand/Collapse checkbox content on change\n   * @return {void}\n   */\n  toggleSettings(element) {\n    const target = dom.qs('#' + element.getAttribute('data-id'));\n    if (element.checked) {\n      dom.slideDown(target);\n    } else {\n      dom.slideUp(target);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\nexport default class WpstgMainMenu {\n  constructor() {\n    this.activeTabClass = 'wpstg--tab--active';\n    this.mainMenu();\n  }\n\n  mainMenu() {\n    const tabHeader = dom.qs('.wpstg--tab--header');\n    // Early bail if tab header is not available\n    if (tabHeader === null) {\n      return;\n    }\n\n    dom.addEvent(dom.qs('.wpstg--tab--header'), 'click', '.wpstg-button', (element) => {\n      const $this = element;\n      const target = $this.getAttribute('data-target');\n      if (target === '') {\n        return;\n      }\n      const targetElements = dom.all(target);\n      const menuItems = dom.all('.wpstg--tab--header a[data-target]');\n      const contents = dom.all('.wpstg--tab--contents > .wpstg--tab--content');\n\n      contents.forEach((content) => {\n        // active tab class is without the css dot class prefix\n        if (content.matches('.' + this.activeTabClass + ':not(' + target + ')')) {\n          content.classList.remove(this.activeTabClass);\n        }\n      });\n\n      menuItems.forEach((menuItem) => {\n        if (menuItem !== $this) {\n          menuItem.classList.remove(this.activeTabClass);\n        }\n      });\n\n      $this.classList.add(this.activeTabClass);\n\n      targetElements.forEach((targetElement) => {\n        targetElement.classList.add(this.activeTabClass);\n      });\n\n      if ('#wpstg--tab--backup' === target) {\n        window.dispatchEvent(new Event('backups-tab'));\n      }\n    });\n  };\n}\n","import WPStagingCommon from './../wpstg.js';\nimport * as dom from './wpstg-dom-utils.js';\n\n/**\n * Represents a class for managing and displaying process and success modals in WPStaging.\n * This class provides methods to start, open, initialize, update, and stop process modals.\n *\n * @class\n */\nexport default class WpstgProcessModal {\n  constructor(wpstgObject = wpstg) {\n    this.wpstgObject = wpstgObject;\n    this.action = '';\n    this.isProcessCancelled = false;\n    this.isProcessFinished = false;\n    this.processTime = 0;\n    this.processInterval = '';\n    this.modal = null;\n    this.disableCancelButton = false;\n    this.title = '';\n    this.showCancelButton = false;\n    this.percentage = 0;\n    this.cloneId = '';\n    this.successModal = '';\n    this.showProcessLogs = true;\n    this.stagingSiteUrl = '';\n  }\n\n  /**\n   * Starts the process, initializes intervals, and modifies UI elements as needed.\n   *\n   * @return {void}\n   */\n  start() {\n    this.showCancelButton = true;\n    this.processInterval = setInterval(() => {\n      this.processTime++;\n      this.updateElapsedTime();\n    }, 1000);\n    if (this.action === 'wpstg_delete_clone') {\n      dom.hide('.wpstg--modal--process--logs--tail');\n      this.showCancelButton = false;\n      const container = WPStagingCommon.getSwalContainer();\n      const processPercentageElement = container.querySelector('.wpstg--modal--process--percent');\n      processPercentageElement.textContent = 100;\n    }\n    dom.hide('.wpstg-prev-step-link, #wpstg-start-updating, .wpstg-loader, #wpstg-cancel-cloning, .wpstg-log-details, .wpstg-progress-bar, #wpstg-processing-header');\n    dom.hide('.wpstg-processing-timer, #wpstg-cancel-pushing, .wpstg-progress-bar-wrapper, #wpstg-cancel-cloning-update, #wpstg-removing-clone');\n  }\n\n  /**\n   * Stops the ongoing process, resets values, and clears intervals.\n   *\n   * @return {void}\n   */\n  stop() {\n    this.processTime = 0;\n    this.modal = null;\n    this.percentage = '';\n    setTimeout(()=> {\n      this.isProcessCancelled = false;\n      WPStaging.isCancelled = false;\n    }, 2000);\n\n    clearInterval(this.processInterval);\n    WPStagingCommon.closeSwalModal();\n    dom.hide('#wpstg-try-again, #wpstg-home-link, #wpstg-show-log-button, .wpstg-loader');\n  }\n\n  /**\n   * Cancels the ongoing process if confirmed by the user.\n   *\n   * @return {void}\n   */\n  cancelProcess() {\n    if (confirm('Are you sure you want to cancel cloning process?')) {\n      WPStaging.isCancelled = true;\n      this.isProcessCancelled = true;\n      if (this.action === 'wpstg_push_processing') {\n        const container = WPStagingCommon.getSwalContainer();\n        const processTitleElement = container.querySelector('.wpstg--modal--process--title');\n        processTitleElement.textContent = 'Canceling Please wait....';\n        this.stop();\n        dom.show('#wpstg-workflow');\n        WPStaging.messages = [];\n      } else {\n        this.cancelCloneAction();\n      }\n    }\n  }\n\n  /**\n   * Sets the title and cancellation status based on the response job or status.\n   *\n   * @param {Object} response - The response object containing information about the process job and status.\n   * @return {void}\n   */\n  setTitle(response) {\n    this.title = response.job;\n    if (response.job === 'database' || response.job === 'jobCopyDatabaseTmp') {\n      this.title = 'Copying Database';\n      this.disableCancelButton = false;\n    } else if (response.job === 'SearchReplace') {\n      this.title = 'Processing Data';\n      this.disableCancelButton = false;\n    } else if (response.job === 'directories' || response.job === 'jobFileScanning') {\n      this.title = 'Scanning Files';\n      this.disableCancelButton = false;\n    } else if (response.job === 'files' || response.job === 'data' || response.job === 'jobCopy' || response.job === 'jobSearchReplace') {\n      this.title = 'Copying Files';\n      this.disableCancelButton = false;\n    } else if (response.job === 'Backup') {\n      this.title = 'Backup Files Scanning';\n      this.disableCancelButton = false;\n    } else if (response.job === 'finish' || response.status === 'finished') {\n      this.title = 'Process Finished';\n      this.disableCancelButton = false;\n    } else if (response.job === 'jobDatabaseRename') {\n      this.title = 'Renaming Database';\n      this.disableCancelButton = true;\n    } else if (response.job === 'jobData') {\n      this.title = 'Updating Database Data';\n      this.disableCancelButton = true;\n    }\n  }\n\n  /**\n   * Sets the stored percentage value if the provided parameter is not null.\n   *\n   * @param {Object} params - Parameters containing the percentage value.\n   * @return {void}\n   */\n  setPercentage(params) {\n    if (params.percentage !== null) {\n      this.percentage = params.percentage;\n    }\n  }\n\n  /**\n   * Initializes the process modal with specific behavior and appearance configurations.\n   *\n   * @return {void}\n   */\n  initializeProcessModal() {\n    const modal = document.querySelector('#wpstg--modal--backup--process');\n    const html = modal.innerHTML;\n    modal.parentNode.removeChild(modal);\n    this.modal = {\n      html: null,\n      cancelBtnTxt: null,\n      processTime: 0,\n      instance: WPStagingCommon.getSwalModal(true, {\n        content: 'wpstg--process--content',\n      }).fire({\n        html: html,\n        cancelButtonText: 'Cancel',\n        showCancelButton: this.showCancelButton,\n        showConfirmButton: false,\n        showCloseButton: false,\n        showLoaderOnConfirm: false,\n        allowEscapeKey: false,\n        allowOutsideClick: false,\n        onRender: () => {\n          const cancelButton = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n          const btnCancel = cancelButton.cloneNode(true);\n          cancelButton.parentNode.replaceChild(btnCancel, cancelButton);\n          btnCancel.addEventListener('click', () => {\n            this.cancelProcess();\n          });\n        },\n      }),\n    };\n    this.start();\n  }\n\n  /**\n   * Sets the content of the process modal based on the stored title, percentage, and cancellation status.\n   *\n   * @return {void}\n   */\n  setProcessModal() {\n    const container = WPStagingCommon.getSwalContainer();\n    const cancelButton = container.getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n    const processTitleElement = container.querySelector('.wpstg--modal--process--title');\n    const processPercentageElement = container.querySelector('.wpstg--modal--process--percent');\n    processTitleElement.textContent = this.title;\n    processPercentageElement.textContent = this.percentage;\n    cancelButton.disabled = this.disableCancelButton;\n  }\n\n  /**\n   * Opens and initializes a process modal with the provided data and parameters.\n   *\n   * @param {Object|undefined} data - Data related to the process.\n   * @param {Object} params - Parameters for configuring the process modal.\n   * @param {boolean} [showLogs=false] - Whether to display logs in the modal.\n   * @param {boolean} [showCancelButton=true] - Whether to show the cancel button in the modal.\n   * @return {void}\n   */\n  openProcessModal(data, params, showLogs = false, showCancelButton = true) {\n    if (!this.isProcessCancelled && !WPStaging.isCancelled) {\n      if (data !== undefined) {\n        this.action = data.action;\n        this.cloneId = data.cloneID;\n      }\n      this.showCancelButton = showCancelButton;\n      this.showLogs = showLogs;\n      if (!this.modal) {\n        this.initializeProcessModal();\n      } else {\n        if (params.job) {\n          this.setTitle(params);\n          this.setPercentage(params);\n          this.setProcessModal();\n          if (params.job === 'finish') {\n            this.stop();\n          }\n        } else {\n          if (params.status === 'finished') {\n            this.stop();\n          }\n        }\n      }\n    }\n  };\n\n  /**\n   * Formats the given time duration (in seconds) into a string representation (HH:mm:ss).\n   *\n   * @return {string} The formatted time duration string.\n   */\n  formatTimeDuration() {\n    return new Date(this.processTime * 1000).toISOString().slice(11, 19) + 's';\n  }\n\n  /**\n   * Updates the displayed elapsed time in the modal if a process interval is set.\n   *\n   * @return {void}\n   */\n  updateElapsedTime() {\n    if (this.processInterval !== null) {\n      const container = WPStagingCommon.getSwalContainer();\n      const elapsedTimeElement = container.querySelector('.wpstg--modal--process--elapsed-time');\n      elapsedTimeElement.textContent = this.formatTimeDuration();\n    }\n  };\n\n  /**\n   * Determines the corresponding cancellation action name based on the current action.\n   *\n   * @return {string|undefined} The cancellation action name or undefined if no match is found.\n   */\n  getCancelCloneAction() {\n    const actions = [\n      {\n        name: 'wpstg_cloning',\n        cancel: 'wpstg_cancel_clone',\n      },\n      {\n        name: 'wpstg_reset',\n        cancel: 'wpstg_cancel_update',\n      },\n      {\n        name: 'wpstg_update',\n        cancel: 'wpstg_cancel_update',\n      },\n      {\n        name: 'wpstg_push_processing',\n        cancel: 'wpstg_cancel_push_processing',\n      },\n    ];\n    if (this.action !== '') {\n      const result = actions.find((action) => action.name === this.action);\n      return result.cancel;\n    }\n  }\n\n  /**\n   * Cancels the ongoing clone action if there is one, using a fetch request.\n   * If the cancellation is successful, it stops the action and optionally reloads the page.\n   * If there are further actions or the cancellation is not successful, it retries the cancellation process recursively.\n   *\n   * @return {void}\n   */\n  cancelCloneAction() {\n    if (this.action) {\n      fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: this.getCancelCloneAction(),\n          accessToken: this.wpstgObject.accessToken,\n          nonce: this.wpstgObject.nonce,\n          clone: this.cloneId,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      }).then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n        return Promise.reject(response);\n      }).then((response) => {\n        if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished' || response === true) {\n          this.stop();\n          WPStaging.loadOverview();\n          WPStaging.messages = [];\n        }\n        if (response !== true) {\n          this.cancelCloneAction();\n        }\n      }).catch((error) => {\n        console.log(this.wpstgObject.i18n['somethingWentWrong'], error);\n      });\n    }\n  }\n\n  /**\n   * Initializes the success modal with the provided parameters and displays it.\n   *\n   * @param {Object} params - The parameters for configuring the success modal content.\n   * @return {void}\n   */\n  initializeSuccessModal(params) {\n    this.successModal = this.setSuccessModalContent(params);\n    WPStagingCommon.getSwalModal(true, {\n      confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n    }).fire({\n      'icon': 'success',\n      'html': this.successModal.innerHTML,\n      'confirmButtonText': 'Close',\n      'showCancelButton': false,\n      'showConfirmButton': true,\n      'allowOutsideClick': false,\n    }).then((result)=> {\n      if (result.value) {\n        this.action = '';\n        WPStagingCommon.closeSwalModal();\n        dom.hide('.wpstg-loader');\n        WPStaging.messages = [];\n        if (this.action !== 'wpstg_delete_clone') {\n          location.reload();\n        }\n      }\n    });\n    if (this.showProcessLogs) {\n      dom.show('.wpstg--modal--download--logs--wrapper');\n    }\n    dom.hide('.wpstg-loader');\n    if (this.action !== 'wpstg_delete_clone') {\n      WPStaging.loadOverview();\n    }\n  }\n\n  /**\n   * Sets the content of the success modal based on the provided parameters.\n   *\n   * @param {Object} params - The parameters for configuring the modal content.\n   * @param {string|null} params.title - The title to be displayed in the modal.\n   * @param {string|null|undefined} params.body - The body content of the modal.\n   * @returns {HTMLElement} The modified modal element.\n   */\n\n  setSuccessModalContent(params) {\n    const modal = document.getElementById('wpstg--modal--backup--download');\n    if (params.title !== null) {\n      modal.innerHTML = modal.innerHTML.replace('{title}', params.title);\n    }\n    if (this.showProcessLogs) {\n      modal.innerHTML = modal.innerHTML.replace('{btnTxtLog}', '<span style=\"text-decoration: underline\">Show Logs</span>');\n    }\n    if (params.body !== null && typeof params.body !== 'undefined') {\n      let messageBody = params.body;\n      if (this.stagingSiteUrl !== null) {\n        messageBody += '<br><strong><a href=\"'+this.stagingSiteUrl+'\" target=\"_blank\" id=\"wpstg-clone-url\">'+this.stagingSiteUrl+'</a></strong>';\n      }\n      modal.innerHTML = modal.innerHTML.replace('{text}', messageBody);\n    } else {\n      modal.innerHTML = modal.innerHTML.replace('{text}', '');\n    }\n    return modal;\n  }\n\n  /**\n   * Opens a success modal after successfully cloning process.\n   *\n   * @param {Object} params - The parameters for initializing the success modal.\n   * @param {boolean} [showLogs=false] - Whether to display process logs in the modal.\n   * @param {string|null} [siteUrl=null] - The URL of the staging site, if applicable.\n   * @return {void}\n   */\n  openSuccessModal(params, showLogs = false, siteUrl = null) {\n    this.stagingSiteUrl = siteUrl;\n    this.showProcessLogs = showLogs;\n    this.initializeSuccessModal(params);\n  }\n}\n","import WpstgCloneStaging from './modules/wpstg-clone-staging.js';\nimport WpstgDirectoryNavigation from './modules/wpstg-directory-navigation.js';\nimport WpstgTableSelection from './modules/wpstg-table-selection.js';\nimport WpstgExcludeFilters from './modules/wpstg-exclude-filters.js';\nimport WpstgResetModal from './modules/wpstg-reset-modal.js';\nimport WpstgModal from './modules/wpstg-modal.js';\nimport WpstgCloningAdvanceSettings from './modules/wpstg-cloning-advance-settings.js';\nimport WpstgMainMenu from './modules/wpstg-main-menu.js';\nimport WPStagingCommon from './wpstg.js';\nimport {handleDisplayDependencies, handleToggleElement, handleCopyPaste, handleCopyToClipboard} from './modules/wpstg-dom-utils.js';\nimport WpstgProcessModal from './modules/wpstg-process-modal.js';\nimport WpstgContactUs from './modules/wpstg-contact-us';\nimport * as dom from './modules/wpstg-dom-utils';\n\nvar WPStaging = (function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    time: 1,\n    executionTime: false,\n    progressBar: 0,\n    cloneExcludeFilters: null,\n    directoryNavigator: null,\n    tableSelector: null,\n    notyf: null,\n    areAllTablesChecked: true,\n    handleDisplayDependencies: handleDisplayDependencies,\n    handleToggleElement: handleToggleElement,\n    handleCopyPaste: handleCopyPaste,\n    handleCopyToClipboard: handleCopyToClipboard,\n    messages: [],\n    modal: {\n      instance: '',\n      processTime: 0,\n      processInterval: '',\n      currentJob: '',\n    },\n\n  };\n  that.wpstgProcessModal = new WpstgProcessModal();\n  const cache = {elements: []};\n  let timeout; let ajaxSpinner;\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n  /**\n     * Show and Log Error Message\n     * @param {String} message\n     */\n  const showError = function(message) {\n    cache.get('#wpstg-try-again').css('display', 'inline-block');\n    cache.get('#wpstg-cancel-cloning').text('Reset');\n    cache.get('#wpstg-resume-cloning').show();\n    cache.get('#wpstg-error-wrapper').show();\n    cache.get('#wpstg-error-details').show().html(message);\n    cache.get('#wpstg-removing-clone').removeClass('wpstg-loading');\n    cache.get('.wpstg-loader').hide();\n    $('.wpstg--modal--process--generic-problem').show().html(message);\n\n    // Error event information for Staging\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'wpstg_staging_job_error',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'error_message': message,\n      },\n    });\n  };\n\n  /**\n   * Show warning during cloning or push process when closing tab or browser, or changing page\n   * @param {beforeunload} event\n   * @return {null}\n   */\n  that.warnIfClosingDuringProcess = function(event) {\n    // Only some browsers show the message below, most say something like \"Changes you made may not be saved\" (Chrome) or \"You have unsaved changes. Exit?\"\n    event.returnValue = 'You MUST leave this window open while cloning/pushing. Please wait...';\n    return null;\n  };\n\n  /**\n     *\n     * @param response the error object\n     * @param prependMessage Overwrite default error message at beginning\n     * @param appendMessage Overwrite default error message at end\n     * @returns void\n     */\n\n  const showAjaxFatalError = function(response, prependMessage, appendMessage) {\n    prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n    appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n    if (response === false) {\n      showError(prependMessage + ' Error: No response.' + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n\n    if (typeof response.error !== 'undefined' && response.error) {\n      console.error(response.message);\n      showError(prependMessage + ' Error: ' + response.message + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n  };\n\n  /**\n     *\n     * @param response\n     * @return {{ok}|*}\n     */\n  const handleFetchErrors = function(response) {\n    if (!response.ok) {\n      showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n    }\n    return response;\n  };\n\n  /** Hide and reset previous thrown visible errors */\n  const resetErrors = function() {\n    cache.get('#wpstg-error-details').hide().html('');\n  };\n\n  /**\n     * Common Elements\n     */\n  const elements = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    let urlSpinner = ajaxurl.replace('/admin-ajax.php', '') + '/images/spinner';\n    let timer;\n\n    if (2 < window.devicePixelRatio) {\n      urlSpinner += '-2x';\n    }\n\n    urlSpinner += '.gif';\n\n    ajaxSpinner = '<img src=\\'\\'' + urlSpinner + '\\' alt=\\'\\' class=\\'ajax-spinner general-spinner\\' />';\n\n    const getBaseValues = function() {\n      const path = $('#wpstg-use-target-dir').data('base-path');\n      const uri = $('#wpstg-use-target-hostname').data('base-uri');\n      return {\n        path,\n      };\n    };\n\n    $workFlow\n    /**\n        .on('change', '#wpstg_network_clone', function(e) {\n          e.preventDefault();\n          $('.wpstg-button-select').trigger('click');\n        })\n      */\n    // Check / Un-check All Database Tables New\n        .on('click', '.wpstg-button-unselect', function(e) {\n          e.preventDefault();\n\n          if (false === that.areAllTablesChecked) {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', 'selected');\n            cache.get('.wpstg-button-unselect').text('Unselect All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n            that.areAllTablesChecked = true;\n          } else {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', false);\n            cache.get('.wpstg-button-unselect').text('Select All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n            that.areAllTablesChecked = false;\n          }\n        })\n\n    /**\n             * Select tables with certain tbl prefix | NEW\n             * @param obj e\n             * @returns {undefined}\n             */\n    /**\n        .on('click', '.wpstg-button-select', function(e) {\n          e.preventDefault();\n          $('#wpstg_select_tables_cloning .wpstg-db-table').each(function() {\n            let regex = '^' + wpstg.tblprefix;\n            if (wpstg.isMultisite === '1' && !$('#wpstg_network_clone').is(':checked')) {\n              regex += '([^0-9])_*';\n            }\n\n            if ($(this).attr('name').match(regex)) {\n              $(this).prop('selected', 'selected');\n            } else {\n              $(this).prop('selected', false);\n            }\n          });\n        })\n\n    // Expand Directories\n        .on('click', '.wpstg-expand-dirs', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          $this.siblings('.wpstg-subdir').slideToggle();\n        })\n    // When a directory checkbox is Selected\n        .on('change', 'input.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // When a directory name is Selected\n        .on('change', 'href.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n        */\n    // Check the max length of the clone name and if the clone name already exists\n        .on('keyup', '#wpstg-new-clone-id', function() {\n          // Hide previous errors\n          document.getElementById('wpstg-error-details').style.display = 'none';\n\n          // This request was already sent, clear it up!\n          if ('number' === typeof (timer)) {\n            clearInterval(timer);\n          }\n\n          // Early bail if site name is empty\n          if (this.value === undefined || this.value === '') {\n            cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n            cache.get('#wpstg-start-cloning').removeAttr('disabled');\n            cache.get('#wpstg-clone-id-error').text('').hide();\n            return;\n          }\n\n          // Convert the site name to directory name (slugify the site name to create directory name)\n          const cloneDirectoryName = WPStagingCommon.slugify(this.value);\n\n          timer = setTimeout(\n              function() {\n                ajax(\n                    {\n                      action: 'wpstg_check_clone',\n                      accessToken: wpstg.accessToken,\n                      nonce: wpstg.nonce,\n                      directoryName: cloneDirectoryName,\n                    },\n                    function(response) {\n                      if (response.status === 'success') {\n                        cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').removeAttr('disabled');\n                        cache.get('#wpstg-clone-id-error').text('').hide();\n                      } else {\n                        cache.get('#wpstg-new-clone-id').addClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').prop('disabled', true);\n                        cache.get('#wpstg-clone-id-error').text(response.message).show();\n                      }\n                    },\n                );\n              },\n              500,\n          );\n        })\n    // Restart cloning process\n        .on('click', '#wpstg-start-cloning', function() {\n          resetErrors();\n          that.isCancelled = false;\n          that.getLogs = false;\n          that.progressBar = 0;\n        })\n        .on('input', '#wpstg-new-clone-id', function() {\n          if ($('#wpstg-clone-directory').length < 1) {\n            return;\n          }\n\n          const slug = WPStagingCommon.slugify(this.value).substring(0, 16);\n          const $targetDir = $('#wpstg-use-target-dir');\n          const $targetUri = $('#wpstg-use-target-hostname');\n          let path = $targetDir.data('base-path');\n          let uri = $targetUri.data('base-uri');\n\n          if (path) {\n            path = path.replace(/\\/+$/g, '') + '/' + slug + '/';\n          }\n\n          if (uri) {\n            uri = uri.replace(/\\/+$/g, '') + '/' + slug;\n          }\n\n\n          $('.wpstg-use-target-dir--value').text(path);\n          $('.wpstg-use-target-hostname--value').text(uri);\n\n          $targetDir.attr('data-path', path);\n          $targetUri.attr('data-uri', uri);\n          $('#wpstg_clone_dir').attr('placeholder', path);\n          $('#wpstg_clone_hostname').attr('placeholder', uri);\n        })\n        .on('input', '#wpstg_clone_hostname', function() {\n          if ($(this).val() === '' || validateTargetHost()) {\n            $('#wpstg_clone_hostname_error').remove();\n            return;\n          }\n          if (!validateTargetHost() && !$('#wpstg_clone_hostname_error').length) {\n            $('#wpstg-clone-directory tr:last-of-type').after('<tr><td>&nbsp;</td><td><p id=\"wpstg_clone_hostname_error\" style=\"color: red;\">&nbsp;Invalid host name. Please provide it in a format like http://example.com</p></td></tr>');\n          }\n        })\n    ;\n\n    cloneActions();\n  };\n\n  /* @returns {boolean} */\n  var validateTargetHost = function() {\n    const the_domain = $('#wpstg_clone_hostname').val();\n\n    if (the_domain === '') {\n      return true;\n    }\n\n    const reg = /^http(s)?:\\/\\/.*$/;\n    if (reg.test(the_domain) === false) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n     * Clone actions\n     */\n  var cloneActions = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Cancel cloning\n        .on('click', '#wpstg-cancel-cloning', function() {\n          if (!confirm('Are you sure you want to cancel cloning process?')) {\n            return false;\n          }\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n          that.progressBar = 0;\n\n          $('#wpstg-processing-status').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloning();\n        })\n    // Resume cloning\n        .on('click', '#wpstg-resume-cloning', function() {\n          resetErrors();\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n\n          that.isCancelled = false;\n\n          $('#wpstg-processing-status').text('Try to resume cloning process...');\n          $('#wpstg-error-details').hide();\n          $('.wpstg-loader').show();\n\n          $this.parent().append(ajaxSpinner);\n\n          that.startCloning();\n        })\n    // Cancel update cloning\n        .on('click', '#wpstg-cancel-cloning-update', function() {\n          resetErrors();\n\n          const $this = $(this);\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloningUpdate();\n        })\n    // Restart cloning\n        .on('click', '#wpstg-restart-cloning', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          restart();\n        })\n    // Delete clone - confirmation\n        .on('click', '.wpstg-remove-clone[data-clone]', function(e) {\n          resetErrors();\n          e.preventDefault();\n          $workFlow.removeClass('active');\n\n          cache.get('.wpstg-loader').show();\n          const cloneData = $(this).data('clone');\n          const stagingSiteName = $(this).data('name');\n\n          ajax(\n              {\n                action: 'wpstg_confirm_delete_clone',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                clone: $(this).data('clone'),\n              },\n              function(response) {\n                WPStagingCommon.getSwalModal(true, {\n                  popup: 'wpstg-swal-popup wpstg-centered-modal wpstg-delete-staging-site-modal',\n                  content: 'wpstg--process--content',\n                }).fire({\n                  title: 'Do you want to delete staging site \"' + stagingSiteName + '\"?',\n                  icon: 'error',\n                  html: response,\n                  width: '100%',\n                  focusConfirm: false,\n                  confirmButtonText: 'Delete',\n                  confirmButtonColor: '#e01e5a',\n                  showCancelButton: true,\n                  onRender: () => {\n                    const wpstgUnselectAllTables = document.getElementById('wpstg-unselect-all-tables');\n                    const wpstgUnselectAllTablesId = document.getElementById('wpstg-unselect-all-tables-id');\n\n                    if (wpstgUnselectAllTables !== null) {\n                      wpstgUnselectAllTables.addEventListener('click', function(e) {\n                        if (that.areAllTablesChecked === false) {\n                          cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', 'selected');\n                          cache.get('#wpstgUnselectAllTablesId').text('Unselect All');\n                          wpstgUnselectAllTablesId.textContent = 'Unselect All';\n                          cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n                          that.areAllTablesChecked = true;\n                        } else {\n                          cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', false);\n                          cache.get('#wpstgUnselectAllTablesId').text('Select All');\n                          wpstgUnselectAllTablesId.textContent = 'Select All';\n                          cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n                          that.areAllTablesChecked = false;\n                        }\n                      });\n                    }\n\n                    const swalContainer = document.querySelector('.wpstg--swal2-html-container');\n                    swalContainer.classList.remove('wpstg--swal2-html-container');\n                    const _deleteButton = document.querySelector('.wpstg--swal2-confirm');\n                    _deleteButton.style.background = '#e01e5a';\n                    document.querySelector('.wpstg--swal2-x-mark-line-left').style.background = '#e01e5a';\n                    document.querySelector('.wpstg--swal2-x-mark-line-right').style.background = '#e01e5a';\n                    document.querySelector('.wpstg--swal2-icon.wpstg--swal2-error').style.borderColor = '#e01e5a';\n\n                    const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n                    const btnCancel = _btnCancel.cloneNode(true);\n                    _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n                    btnCancel.addEventListener('click', function(e) {\n                      WPStagingCommon.closeSwalModal();\n                      that.modal.instance = null;\n                      cache.get('.wpstg-loader').removeClass('wpstg-finished');\n                      cache.get('.wpstg-loader').hide();\n                    });\n                  },\n                }).then(function(result) {\n                  if (result.value) {\n                    const deleteDirectory = document.querySelector('#deleteDirectory:checked');\n                    let deleteDir = '';\n                    const excludedTables = [];\n                    if (deleteDirectory !== null) {\n                      deleteDir = deleteDirectory.getAttribute('data-deletepath');\n                    }\n                    $('.wpstg-db-table input:not(:checked)').each(function() {\n                      excludedTables.push(this.name);\n                    });\n\n                    // WPStagingCommon.closeSwalModal();\n                    that.modal.instance = null;\n                    const params = {\n                      'job': 'delete',\n                    };\n                    that.wpstgProcessModal.openProcessModal({'action': 'wpstg_delete_clone', 'cloneID': cloneData}, params, false, false);\n                    deleteClone(cloneData, deleteDir, excludedTables);\n                  }\n                });\n              },\n              'HTML',\n          );\n        })\n    // Delete clone - confirmed\n        .on('click', '#wpstg-remove-clone', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          cache.get('#wpstg-removing-clone').addClass('wpstg-loading');\n\n          cache.get('.wpstg-loader').show();\n\n          deleteClone($(this).data('clone'));\n        })\n    // Cancel deleting clone\n        .on('click', '#wpstg-cancel-removing', function(e) {\n          e.preventDefault();\n          $('.wpstg-clone').removeClass('active');\n          cache.get('#wpstg-removing-clone').html('');\n        })\n    // Update\n        .on('click', '.wpstg-execute-clone', function(e) {\n          e.preventDefault();\n\n          const clone = $(this).data('clone');\n\n          $workFlow.addClass('wpstg-loading');\n\n          that.cloneExcludeFilters = null;\n          ajax(\n              {\n                action: 'wpstg_scanning',\n                clone: clone,\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n              },\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! Error: No response.  Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n                  );\n                }\n\n                const jsonResponse = tryParseJson(response);\n                if (jsonResponse !== false && jsonResponse.success === false) {\n                  $workFlow.removeClass('wpstg-loading');\n                  showErrorModal(jsonResponse);\n\n                  return;\n                }\n\n                $workFlow.removeClass('wpstg-loading').html(response);\n                // register check disk space function for clone update process.\n                checkDiskSpace();\n                that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n                that.directoryNavigator.countSelectedFiles();\n                that.tableSelector = new WpstgTableSelection('#wpstg-scanning-db', '#wpstg-workflow', '#wpstg_network_clone', '#wpstg_select_tables_cloning', wpstg, that.notyf);\n                that.tableSelector.countSelectedTables();\n                that.cloneExcludeFilters = new WpstgExcludeFilters();\n                that.switchStep(2);\n              },\n              'HTML',\n          );\n        })\n        .on('click', '#wpstg-update-cloning-site-button', function(e) {\n          window.open(that.data.cloneHostname, '_blank');\n        })\n    // Reset Clone\n        .on('click', '.wpstg-reset-clone', function(e) {\n          e.preventDefault();\n          const clone = $(this).data('clone');\n          const resetModal = new WpstgResetModal(clone);\n          resetModal.setNetworkClone($(this).data('network') === 'yes');\n          const promise = resetModal.showModal();\n          that.areAllTablesChecked = true;\n\n          promise.then((result) => {\n            if (result.value) {\n              const dirNavigator = resetModal.getDirectoryNavigator();\n              const tableSelector = resetModal.getTableSelector();\n              const exclFilters = resetModal.getExcludeFilters().getExcludeFilters();\n\n              let includedTables = '';\n              let excludedTables = '';\n              let selectedTablesWithoutPrefix = '';\n              let allTablesExcluded = false;\n\n              if (tableSelector !== null) {\n                includedTables = tableSelector.getIncludedTables();\n                excludedTables = tableSelector.getExcludedTables();\n                selectedTablesWithoutPrefix = tableSelector.getSelectedTablesWithoutPrefix();\n              }\n\n              if (includedTables.length > excludedTables.length) {\n                includedTables = '';\n              } else if (excludedTables.length > includedTables.length) {\n                excludedTables = '';\n                allTablesExcluded = includedTables === '';\n              }\n\n              resetClone(clone, {\n                includedTables: includedTables,\n                excludedTables: excludedTables,\n                allTablesExcluded: allTablesExcluded,\n                selectedTablesWithoutPrefix: selectedTablesWithoutPrefix,\n                excludeSizeRules: encodeURIComponent(exclFilters.sizes),\n                excludeGlobRules: encodeURIComponent(exclFilters.globs),\n                excludedDirectories: dirNavigator.getExcludedDirectories(),\n                extraDirectories: dirNavigator.getExtraDirectoriesRootOnly(),\n              });\n            }\n          });\n\n          return;\n        });\n  };\n\n  /**\n   * Ajax Requests\n   * @param Object data\n   * @param Function callback\n   * @param string dataType\n   * @param bool showErrors\n   * @param int tryCount\n   * @param float incrementRatio\n   */\n  var ajax = function(data, callback, dataType, showErrors, tryCount, incrementRatio = null) {\n    if ('undefined' === typeof (dataType)) {\n      dataType = 'json';\n    }\n\n    if (false !== showErrors) {\n      showErrors = true;\n    }\n\n    tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n    const retryLimit = 5;\n\n    let retryTimeout = 10000 * tryCount;\n\n    incrementRatio = parseInt(incrementRatio);\n    if (!isNaN(incrementRatio)) {\n      retryTimeout *= incrementRatio;\n    }\n\n    const errorMsgFooter = 'Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP STAGING Small Server Settings</a> or submit an error report and contact us. <br/><br/><strong>Tip:</strong> If you get this error while pushing, you can also use the <strong>BACKUP & MIGRATION</strong> feature to move your staging site to live. <a href=\\'https://wp-staging.com/docs/how-to-migrate-your-wordpress-site-to-a-new-host/\\' target=\\'_blank\\'>Read more.</a>';\n\n    $.ajax({\n      url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n      type: 'POST',\n      dataType: dataType,\n      cache: false,\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        // try again after 10 seconds\n        tryCount++;\n        if (tryCount <= retryLimit) {\n          console.log('RETRYING ' + tryCount + '/' + retryLimit);\n          setTimeout(function() {\n            ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n            return;\n          }, retryTimeout);\n        } else {\n          console.log('RETRYING LIMIT');\n          const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n          showError(\n              'Fatal Error:  ' + errorCode + ' ' + errorMsgFooter,\n          );\n        }\n      },\n      success: function(data) {\n        if ('function' === typeof (callback)) {\n          callback(data);\n        }\n      },\n      statusCode: {\n        404: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 404 - Can\\'t find ajax request URL! ' + errorMsgFooter);\n          }\n        },\n        500: function() {\n          if (tryCount >= retryLimit) {\n            showError('Fatal Error 500 - Internal server error while processing the request! ' + errorMsgFooter);\n          }\n        },\n        504: function() {\n          if (tryCount > retryLimit) {\n            showError('Error 504 - It seems your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        502: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 502 - It seems your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        503: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 503 - It seem your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        429: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 429 - It seems your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        403: function() {\n          if (tryCount >= retryLimit) {\n            showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n          }\n        },\n      },\n    });\n  };\n\n  /**\n   * Next / Previous Step Clicks to Navigate Through Staging Job\n   */\n  const stepButtons = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Next Button\n        .on('click', '.wpstg-next-step-link', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n          const isScan = false;\n\n          if ($('#wpstg_clone_hostname').length && !validateTargetHost()) {\n            $('#wpstg_clone_hostname').focus();\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_update' || $this.data('action') === 'wpstg_reset') {\n          // Update / Reset Clone - confirmed\n            if ($this.data('action') === 'wpstg_update') {\n              const selectedSite = $this;\n              const selectedSiteWorkFlow = $workFlow;\n              const selectedAction = $this.data('action');\n\n              WPStagingCommon.getSwalModal(true, {\n                popup: 'wpstg-swal-popup wpstg-db-comparison-modal wpstg-centered-modal',\n                content: 'wpstg--process--content',\n              }).fire({\n                title: 'Do you want to update the staging site?',\n                icon: 'warning',\n                html: '<div class=\"wpstg-confirm-text-line-height wpstg-mt-10px\">This overwrites the staging site with all the selected data from the live site.<br>Use this only if you want to clone the live site again.<br><br> ' +\n                    'Uncheck all tables and folders that you do not want to overwrite.<br>Do not cancel the update process! This could break the staging site.<br>' +\n                    'If you are unsure, create a backup of the staging site before proceeding.<br>' +\n                    'There is no automatic merging of database data!</div>',\n                width: '650px',\n                focusConfirm: false,\n                confirmButtonText: 'Update',\n                showCancelButton: true,\n                onRender: () => {\n                  const swalContainer = document.querySelector('.wpstg--swal2-html-container');\n                  swalContainer.classList.remove('wpstg--swal2-html-container');\n                  const _btnCancel = WPStagingCommon.getSwalContainer().getElementsByClassName('wpstg--swal2-cancel wpstg--btn--cancel')[0];\n                  const btnCancel = _btnCancel.cloneNode(true);\n                  _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n                  btnCancel.addEventListener('click', function(e) {\n                    WPStagingCommon.closeSwalModal();\n                  });\n                },\n              }).then(function(result) {\n                if (result.value) {\n                  const selectedSiteDbCheck = document.querySelector('#wpstg-ext-db');\n                  if (selectedAction === 'wpstg_cloning') {\n                    if (selectedSiteDbCheck.checked) {\n                      verifyExternalDatabase(selectedSite, selectedSiteWorkFlow);\n                      return;\n                    }\n                  }\n                  WPStagingCommon.closeSwalModal();\n                  proceedCloning(selectedSite, selectedSiteWorkFlow);\n                }\n              });\n              return false;\n            }\n          }\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_cloning') {\n            // Verify External Database If Checked and Not Skipped\n            if ($('#wpstg-ext-db').is(':checked')) {\n              verifyExternalDatabase($this, $workFlow);\n              return;\n            }\n          }\n\n          proceedCloning($this, $workFlow);\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          cache.get('.wpstg-loader').removeClass('wpstg-finished');\n          cache.get('.wpstg-loader').hide();\n          loadOverview();\n        });\n  };\n\n  /**\n   * Get Included (Checked) Database Tables\n   * @return {Array}\n   */\n  const getIncludedTables = function() {\n    const includedTables = [];\n\n    $('#wpstg_select_tables_cloning option:selected').each(function() {\n      includedTables.push(this.value);\n    });\n\n    return includedTables;\n  };\n\n  /**\n   * Check if clone destination dir is writable\n   */\n  const isWritableCloneDestinationDir = function() {\n    return new Promise(function(resolve) {\n      ajax(\n          {\n            action: 'wpstg_is_writable_clone_destination_dir',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            cloneDir: $('#wpstg_clone_dir').val(),\n          },\n          function(response) {\n            if (response.success) {\n              cache.get('.wpstg-loader').hide();\n              resolve(true);\n            } else {\n              showError(\n                  'Something went wrong! Error: ' + response.data?.message,\n              );\n              cache.get('.wpstg-loader').hide();\n              document.getElementById('wpstg-error-wrapper').scrollIntoView();\n              resolve(false);\n            }\n          },\n          'json',\n          false,\n      );\n    });\n  };\n\n  /**\n   * Get Excluded (Unchecked) Database Tables\n   * Not used anymore!\n   * @return {Array}\n   */\n  const getExcludedTables = function() {\n    const excludedTables = [];\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n  /**\n   * Verify External Database for Cloning\n   */\n  var verifyExternalDatabase = function($this, workflow) {\n    cache.get('.wpstg-loader').show();\n    ajax(\n        {\n          action: 'wpstg_database_verification',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          databaseUser: cache.get('#wpstg_db_username').val(),\n          databasePassword: cache.get('#wpstg_db_password').val(),\n          databaseServer: cache.get('#wpstg_db_server').val(),\n          databaseDatabase: cache.get('#wpstg_db_database').val(),\n          databaseSsl: cache.get('#wpstg_db_ssl').is(':checked'),\n        },\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' === typeof (response.success)) {\n            showError(\n                'Something went wrong! Error: Invalid response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          if (response.success) {\n            cache.get('.wpstg-loader').hide();\n            proceedCloning($this, workflow);\n            return;\n          }\n\n          if (response.error_type === 'comparison') {\n            cache.get('.wpstg-loader').hide();\n            let render = '<table class=\"wpstg-db-comparison-table\"><thead><tr><th>Property</th><th>Production DB</th><th>Staging DB</th><th>Status</th></tr></thead><tbody>';\n            response.checks.forEach((x) => {\n              let icon = '<span class=\"wpstg-css-tick\"></span>';\n              if (x.production !== x.staging) {\n                icon = '<span class=\"wpstg-css-cross\"></span>';\n              }\n              render += '<tr><td>' + x.name + '</td><td>' + x.production + '</td><td>' + x.staging + '</td><td>' + icon + '</td></tr>';\n            });\n            render += '</tbody></table><p>Note: Some MySQL/MariaDB properties do not match. You may proceed but the staging site may not work as expected.</p>';\n            WPStagingCommon.getSwalModal(true, {\n              popup: 'wpstg-swal-popup wpstg-db-comparison-modal wpstg-centered-modal',\n            }).fire({\n              title: 'Different Database Properties',\n              icon: 'warning',\n              html: render,\n              width: '650px',\n              focusConfirm: false,\n              confirmButtonText: 'Proceed',\n              showCancelButton: true,\n            }).then(function(result) {\n              if (result.value) {\n                proceedCloning($this, workflow);\n              }\n            });\n            return;\n          }\n\n          WPStagingCommon.getSwalModal(true).fire({\n            title: 'Different Database Properties',\n            icon: 'error',\n            html: response.message,\n            focusConfirm: true,\n            confirmButtonText: 'Ok',\n            showCancelButton: false,\n          });\n          cache.get('.wpstg-loader').hide();\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n   * Get Cloning Step Data\n   */\n  const getCloningData = function() {\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.data.cloneID = new Date().getTime().toString();\n    if ('wpstg_update' === that.data.action) {\n      that.data.cloneID = $('#wpstg-new-clone-id').data('clone');\n    }\n\n    that.data.cloneName = $('#wpstg-new-clone-id').val() || that.data.cloneID;\n\n    if (that.directoryNavigator !== null) {\n      that.data.excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      that.data.extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n    }\n\n    that.data.excludeGlobRules = '';\n    that.data.excludeSizeRules = '';\n    if (that.cloneExcludeFilters instanceof WpstgExcludeFilters) {\n      const rules = that.cloneExcludeFilters.getExcludeFilters();\n      that.data.excludeGlobRules = encodeURIComponent(rules.globs);\n      that.data.excludeSizeRules = encodeURIComponent(rules.sizes);\n    }\n\n    that.data.includedTables = '';\n    that.data.excludedTables = '';\n    that.data.allTablesExcluded = false;\n\n    if (that.tableSelector !== null) {\n      that.data.includedTables = that.tableSelector.getIncludedTables();\n      that.data.excludedTables = that.tableSelector.getExcludedTables();\n      that.data.selectedTablesWithoutPrefix = that.tableSelector.getSelectedTablesWithoutPrefix();\n    }\n\n    if (that.data.includedTables.length > that.data.excludedTables.length) {\n      that.data.includedTables = '';\n    } else if (that.data.excludedTables.length > that.data.includedTables.length) {\n      that.data.excludedTables = '';\n      that.data.allTablesExcluded = that.data.includedTables === '';\n    }\n\n    that.data.databaseServer = $('#wpstg_db_server').val();\n    that.data.databaseUser = $('#wpstg_db_username').val();\n    that.data.databasePassword = $('#wpstg_db_password').val();\n    that.data.databaseDatabase = $('#wpstg_db_database').val();\n    that.data.databasePrefix = $('#wpstg_db_prefix').val();\n    that.data.databaseSsl = $('#wpstg_db_ssl').is(':checked');\n    const cloneDir = $('#wpstg_clone_dir').val();\n    that.data.cloneDir = encodeURIComponent($.trim(cloneDir));\n    that.data.cloneHostname = $('#wpstg_clone_hostname').val();\n    that.data.cronDisabled = $('#wpstg_disable_cron').is(':checked');\n    that.data.emailsAllowed = $('#wpstg_allow_emails').is(':checked');\n    that.data.networkClone = $('#wpstg_network_clone').is(':checked');\n    that.data.uploadsSymlinked = $('#wpstg_symlink_upload').is(':checked');\n    that.data.cleanPluginsThemes = $('#wpstg-clean-plugins-themes').is(':checked');\n    that.data.cleanUploadsDir = $('#wpstg-clean-uploads').is(':checked');\n  };\n\n  var proceedCloning = function($this, workflow) {\n    if ($this.data('action') === 'wpstg_cloning') {\n      isWritableCloneDestinationDir().then(function(result) {\n        if (!result) {\n          return;\n        }\n        runCloningSteps($this, workflow);\n      });\n    } else {\n      runCloningSteps($this, workflow);\n    }\n  };\n\n  const runCloningSteps = function($this, workflow) {\n    // Add loading overlay\n    workflow.addClass('wpstg-loading');\n\n    // Prepare data\n    that.data = {\n      action: $this.data('action'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    // Cloning data\n    getCloningData();\n\n    sendCloningAjax(workflow);\n  };\n\n  var sendCloningAjax = function(workflow) {\n    // Send ajax request\n    ajax(\n        that.data,\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong!<br/><br/> Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n          const jsonResponse = tryParseJson(response);\n          if (jsonResponse !== false && jsonResponse.success === false) {\n            workflow.removeClass('wpstg-loading');\n            showErrorModal(jsonResponse);\n\n            return;\n          }\n\n          // Styling of elements\n          workflow.removeClass('wpstg-loading').html(response);\n          that.cloneExcludeFilters = null;\n          if (that.data.action === 'wpstg_scanning') {\n            that.areAllTablesChecked = true;\n            that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n            that.tableSelector = new WpstgTableSelection('#wpstg-scanning-db', '#wpstg-workflow', '#wpstg_network_clone', '#wpstg_select_tables_cloning', wpstg);\n            that.switchStep(2);\n            that.cloneExcludeFilters = new WpstgExcludeFilters();\n            that.directoryNavigator.countSelectedFiles();\n            that.tableSelector.countSelectedTables();\n          } else if (that.data.action === 'wpstg_cloning' || that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n            that.switchStep(3);\n          }\n\n          // Start cloning\n          that.startCloning();\n        },\n        'HTML',\n    );\n  };\n\n  var showErrorModal = function(response) {\n    const errorModal = new WpstgModal('wpstg_modal_error', wpstg);\n    errorModal.show(Object.assign({\n      title: 'Error',\n      icon: 'error',\n      html: wpstg.i18n['somethingWentWrong'] + (response.message !== undefined ? ('<br/>' + response.message) : ''),\n      width: '500px',\n      confirmButtonText: 'Ok',\n      showCancelButton: false,\n      customClass: {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n        actions: 'wpstg--modal--actions',\n        popup: 'wpstg-swal-popup wpstg-centered-modal',\n      },\n      buttonsStyling: false,\n      reverseButtons: true,\n    }, response.swalOptions), {\n      type: response.type,\n    });\n  };\n\n  const tryParseJson = function(json) {\n    // early bail if not string\n    if (!json) {\n      return false;\n    }\n\n    try {\n      const object = JSON.parse(json);\n      if (object && typeof object === 'object') {\n        return object;\n      }\n    } catch (e) {\n      // do nothing on catch\n    }\n\n    return false;\n  };\n\n  var resetClone = function(clone, excludeOptions) {\n    that.data = {\n      action: 'wpstg_reset',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n      cloneID: clone,\n    };\n\n    that.data = {...that.data, ...excludeOptions};\n\n    const $workFlow = cache.get('#wpstg-workflow');\n    sendCloningAjax($workFlow);\n  };\n\n  /**\n   * Loads Overview (first step) of Staging Job\n   */\n  var loadOverview = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    $workFlow.addClass('wpstg-loading');\n\n    ajax(\n        {\n          action: 'wpstg_overview',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response. Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report.',\n            );\n          }\n\n          const $currentStep = cache.get('.wpstg-current-step');\n\n          // Styling of elements\n          $workFlow.removeClass('wpstg-loading').html(response);\n        },\n        'HTML',\n    );\n\n    that.switchStep(1);\n    cache.get('.wpstg-step3-cloning').show();\n    cache.get('.wpstg-step3-pushing').hide();\n  };\n\n  /**\n   * Load Tabs\n   */\n  const tabs = function() {\n    cache.get('#wpstg-workflow').on('click', '.wpstg-tab-header', function(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const $section = cache.get($this.data('id'));\n\n      $this.toggleClass('expand');\n\n      $section.slideToggle();\n\n      const tabTriangle = $this.find('.wpstg-tab-triangle');\n\n      if ($this.hasClass('expand')) {\n        tabTriangle.removeClass('wpstg-no-icon');\n        tabTriangle.text('');\n        tabTriangle.addClass('wpstg-rotate-90');\n      } else {\n        tabTriangle.removeClass('wpstg-rotate-90');\n      }\n    });\n  };\n\n  /**\n   * Delete Clone\n   * @param {String} clone\n   * @param {String} deleteDir\n   * @param {array} excludedTables\n   */\n  var deleteClone = function(clone, deleteDir, excludedTables) {\n    ajax(\n        {\n          action: 'wpstg_delete_clone',\n          clone: clone,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          excludedTables: excludedTables,\n          deleteDir: deleteDir,\n        },\n        function(response) {\n          if (response) {\n            showAjaxFatalError(response);\n\n            // Finished\n            if ('undefined' !== typeof response.delete && (response.delete === 'finished' || response.delete === 'unfinished')) {\n              cache.get('#wpstg-removing-clone').removeClass('wpstg-loading').html('');\n\n              if (response.delete === 'finished' && response.error === undefined) {\n                $('.wpstg-clone[data-clone-id=\"' + clone + '\"]').remove();\n              }\n\n              // No staging site message is also of type/class .wpstg-class but hidden\n              // We have just excluded that from search when counting no of clones\n              if ($('#wpstg-existing-clones .wpstg-clone').length < 1) {\n                cache.get('#wpstg-existing-clones').find('h3').text('');\n                cache.get('#wpstg-no-staging-site-results').show();\n              }\n\n              cache.get('.wpstg-loader').hide();\n              // finish modal popup\n              if (wpstg.i18n.wpstg_delete_clone !== null && response.delete === 'finished') {\n                const params = {\n                  'status': 'finished',\n                };\n                that.wpstgProcessModal.openProcessModal({'action': 'wpstg_delete_clone', 'cloneID': clone}, params, false, false);\n                WPStagingCommon.getSwalModal(true, {\n                  confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n                }).fire({\n                  'icon': 'success',\n                  'html': '<div style=\"display:block\"><h2 style=\"color: #565656;\">' + wpstg.i18n.wpstg_delete_clone.title + '</h2></div>',\n                  'confirmButtonText': 'Close',\n                  'showCancelButton': false,\n                  'showConfirmButton': true,\n                }).then(function(result) {\n                  if (result.value) {\n                    WPStagingCommon.closeSwalModal();\n                  }\n                },\n                );\n              }\n              return;\n            }\n          }\n          // continue\n          if (true !== response) {\n            deleteClone(clone, deleteDir, excludedTables);\n            return;\n          }\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloning = function() {\n    that.timer('stop');\n\n\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_clone',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n            cache.get('.wpstg-loader').hide();\n            // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloning();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloningUpdate = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_update',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var restart = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_restart',\n          // clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Scroll the window log to bottom\n   * @return void\n   */\n  const logscroll = function() {\n    const $div = cache.get('.wpstg-log-details');\n    if ('undefined' !== typeof ($div[0])) {\n      $div.scrollTop($div[0].scrollHeight);\n    }\n  };\n\n  /**\n   * Append the log to the logging window\n   * @param string log\n   * @return void\n   */\n  const getLogs = function(log) {\n    if (Array.isArray(log)) {\n      log.forEach((logMessage) => {\n        if (logMessage !== null) {\n          if (!that.messages.find(({message}) => message === logMessage.message)) {\n            that.messages.push(logMessage);\n            const $logsContainer = $('.wpstg--modal--process--logs');\n            const msgClass = `wpstg--modal--process--msg--${logMessage.type.toLowerCase() || 'info'}`;\n            $logsContainer.append(`<p class=\"${msgClass}\">[${logMessage.type || 'info'}] - [${logMessage.date}] - ${logMessage.message}</p>`);\n          }\n        }\n      });\n    } else {\n      if (!that.messages.find(({message}) => message === log.message)) {\n        that.messages.push(log);\n        const $logsContainer = $('.wpstg--modal--process--logs');\n        const msgClass = `wpstg--modal--process--msg--${log.type.toLowerCase() || 'info'}`;\n        $logsContainer.append(`<p class=\"${msgClass}\">[${log.type || 'info'}] - [${log.date}] - ${log.message}</p>`);\n      }\n    }\n    document.querySelectorAll('.wpstg--modal--process--logs').forEach((element) => {\n      element.scrollTop = element.scrollHeight;\n    });\n  };\n\n\n  /**\n   * Check disk space\n   * @return string json\n   */\n  var checkDiskSpace = function() {\n    cache.get('#wpstg-check-space').on('click', function(e) {\n      cache.get('.wpstg-loader').show();\n      const excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      const extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n\n      ajax(\n          {\n            action: 'wpstg_check_disk_space',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedDirectories: excludedDirectories,\n            extraDirectories: extraDirectories,\n          },\n          function(response) {\n            if (false === response) {\n              cache.get('#wpstg-clone-id-error').text('Can not detect required disk space').show();\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n\n            // Show required disk space\n            cache.get('#wpstg-clone-id-error').html(\n                '<strong>Estimated necessary disk space: ' + response.requiredSpace + '</strong>' +\n              (response.errorMessage !== null ? ('<br>' + response.errorMessage) : '') +\n              '<br> <span style=\"color:#444;\">Before you proceed ensure your account has enough free disk space to hold the entire instance of the production site. You can check the available space from your hosting account (e.g. cPanel).</span>').show();\n            cache.get('.wpstg-loader').hide();\n          },\n          'json',\n          false,\n      );\n    });\n  };\n\n  /**\n   * Show or hide animated loading icon\n   * @param isLoading bool\n   */\n  const isLoading = function(isLoading) {\n    if (!isLoading || isLoading === false) {\n      cache.get('.wpstg-loader').hide();\n    } else {\n      cache.get('.wpstg-loader').show();\n    }\n  };\n\n  /**\n   * Count up processing execution time\n   * @param string status\n   * @return html\n   */\n  that.timer = function(status) {\n    if (status === 'stop') {\n      const time = that.time;\n      that.time = 1;\n      clearInterval(that.executionTime);\n      return that.convertSeconds(time);\n    }\n\n\n    that.executionTime = setInterval(function() {\n      if (null !== document.getElementById('wpstg-processing-timer')) {\n        document.getElementById('wpstg-processing-timer').innerHTML = 'Elapsed Time: ' + that.convertSeconds(that.time);\n      }\n      that.time++;\n      if (status === 'stop') {\n        that.time = 1;\n        clearInterval(that.executionTime);\n      }\n    }, 1000);\n  };\n\n  /**\n   * Convert seconds to hourly format\n   * @param int seconds\n   * @return string\n   */\n  that.convertSeconds = function(seconds) {\n    const date = new Date(null);\n    date.setSeconds(seconds); // specify value for SECONDS here\n    return date.toISOString().substr(11, 8);\n  };\n\n  /**\n   * Start Cloning Process\n   * @type {Function}\n   */\n  that.startCloning = (function() {\n    resetErrors();\n\n    // Register function for checking disk space\n    checkDiskSpace();\n\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.isCancelled = false;\n\n    // Start the process\n    start();\n\n    // Functions\n    // Start\n    function start() {\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-cancel-cloning').text('Cancel');\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-error-details').hide();\n\n\n      // Clone Database\n      setTimeout(function() {\n        // cloneDatabase();\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        processing();\n      }, wpstg.delayReq);\n    }\n\n\n    /**\n     * Start ajax processing\n     * @return string\n     */\n    var processing = function() {\n      if (true === that.isCancelled) {\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return false;\n      }\n\n      isLoading(true);\n\n      let excludedDirectories = '';\n      let extraDirectories = '';\n      if (that.directoryNavigator !== null) {\n        excludedDirectories = that.directoryNavigator.getExcludedDirectories();\n        extraDirectories = that.directoryNavigator.getExtraDirectoriesRootOnly();\n      }\n\n      // Show logging window\n\n      WPStaging.ajax(\n          {\n            action: 'wpstg_processing',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedTables: getExcludedTables(),\n            excludedDirectories: encodeURIComponent(excludedDirectories),\n            extraDirectories: encodeURIComponent(extraDirectories),\n          },\n          function(response) {\n            showAjaxFatalError(response);\n\n            // Add Log messages\n            if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n              getLogs(response.last_msg);\n            }\n            // Continue processing\n            if (false === response.status) {\n              progressBar(response);\n\n              setTimeout(function() {\n                // cache.get('.wpstg-loader').show();\n                processing();\n              }, wpstg.delayReq);\n            } else if (true === response.status && 'finished' !== response.status) {\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-error-wrapper').hide();\n              progressBar(response, true);\n              processing();\n            } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n              window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n              finish(response);\n            }\n            ;\n          },\n          'json',\n          false,\n      );\n    };\n\n    // Finish\n    function finish(response) {\n      if (true === that.getLogs) {\n        getLogs();\n      }\n\n      progressBar(response);\n\n      // Add Log\n      if ('undefined' !== typeof (response.last_msg)) {\n        getLogs(response.last_msg);\n      }\n      if (wpstg.i18n[that.data.action] !== null) {\n        that.wpstgProcessModal.openSuccessModal(wpstg.i18n[that.data.action], true, response.url);\n      }\n    }\n\n    /**\n     * Add percentage progress bar\n     * @param object response\n     * @return {Boolean}\n     */\n    var progressBar = function(response, restart) {\n      if (response !== null) {\n        that.wpstgProcessModal.openProcessModal(that.data, response, true);\n      }\n    };\n  });\n\n  that.switchStep = function(step) {\n    cache.get('.wpstg-current-step')\n        .removeClass('wpstg-current-step');\n    cache.get('.wpstg-step' + step)\n        .addClass('wpstg-current-step');\n  };\n\n  that.checkUserDbPermissions = function checkUserDbPermissions(operationType) {\n    return new Promise(function(resolve) {\n      WPStaging.ajax({\n        action: 'wpstg_check_user_permissions',\n        accessToken: wpstg.accessToken,\n        nonce: wpstg.nonce,\n        type: operationType,\n      }, function(response) {\n        if (response.success) {\n          resolve(true);\n        } else {\n          WPStagingCommon.getSwalModal(true, {\n            container: 'wpstg-swal-push-container',\n          }).fire({\n            title: '',\n            icon: 'warning',\n            html: response.data.message,\n            width: '750px',\n            focusConfirm: false,\n            confirmButtonText: 'Proceed',\n            showCancelButton: true,\n          }).then(function(result) {\n            if (result.isConfirmed) {\n              resolve(true);\n            }\n          });\n\n          $('#wpstg-db-permission-show-full-message').click(function() {\n            $('#wpstg-permission-info-output').html($('#wpstg-permission-info-data').html());\n          });\n        }\n      }, 'json', false);\n    });\n  };\n\n  /**\n   * Initiation\n   * @type {Function}\n   */\n  that.init = (function() {\n    loadOverview();\n    elements();\n    stepButtons();\n    tabs();\n    WPStagingCommon.listenTooltip();\n    new WpstgMainMenu();\n    new WpstgCloneStaging();\n    new WpstgCloningAdvanceSettings();\n    new WpstgProcessModal();\n    that.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n  });\n  /**\n   * Ajax call\n   * @type {ajax}\n   */\n  that.ajax = ajax;\n  that.showError = showError;\n  that.getLogs = getLogs;\n  that.loadOverview = loadOverview;\n\n  return that;\n})(jQuery);\n\njQuery(document).ready(function() {\n  WPStaging.init();\n  // This is necessary to make WPStaging var accessible in WP Staging PRO js script\n  window.WPStaging = WPStaging;\n});\n\n/**\n * Report Issue modal\n */\njQuery(document).ready(function($) {\n  $('body').on('click', '.wpstg-report-issue-button', function(e) {\n    const contactUsModal = document.querySelector('#wpstg-contact-us-modal');\n    if (contactUsModal != null && typeof contactUsModal !== 'undefined') {\n      dom.show('#wpstg-contact-us-modal');\n      new WpstgContactUs();\n    }\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '.wpstg-backups-report-issue-button', function(e) {\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-report-cancel', function(e) {\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-report-submit', function(e) {\n    const self = $(this);\n    sendIssueReport(self, 'false');\n    e.preventDefault();\n  });\n  $('body').on('click', '.wpstg--modal--process--logs--tail', function(e) {\n    showProcessLogs();\n    const logBtn = $(this);\n    e.preventDefault();\n    const container = WPStagingCommon.getSwalContainer();\n    const $logs = $(container).find('.wpstg--modal--process--logs');\n    $logs.toggle();\n    if ($logs.is(':visible')) {\n      logBtn.text(wpstg.i18n.hideLogs);\n      container.childNodes[0].style.width = '97%';\n      container.style['z-index'] = 9999;\n    } else {\n      logBtn.text(wpstg.i18n.showLogs);\n      container.childNodes[0].style.width = '600px';\n    }\n  });\n  /*\n   * Close Success Modal\n   */\n  $('body').on('click', '#wpstg-success-button', function(e) {\n    e.preventDefault();\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n  });\n\n  function sendIssueReport(button, forceSend = 'false') {\n    const spinner = button.next();\n    const email = $('.wpstg--tab--header .wpstg-report-email').val();\n    const hosting_provider = $('.wpstg--tab--header .wpstg-report-hosting-provider').val();\n    const message = $('.wpstg--tab--header .wpstg-report-description').val();\n    const syslog = $('.wpstg--tab--header .wpstg-report-syslog').is(':checked');\n    const terms = $('.wpstg--tab--header .wpstg-report-terms').is(':checked');\n\n    button.attr('disabled', true);\n    spinner.css('visibility', 'visible');\n\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      async: true,\n      data: {\n        'action': 'wpstg_send_report',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'wpstg_email': email,\n        'wpstg_provider': hosting_provider,\n        'wpstg_message': message,\n        'wpstg_syslog': +syslog,\n        'wpstg_terms': +terms,\n        'wpstg_force_send': forceSend,\n      },\n    }).done(function(data) {\n      button.attr('disabled', false);\n      spinner.css('visibility', 'hidden');\n\n      if (data.errors.length > 0) {\n        $('.wpstg-report-issue-form .wpstg-message').remove();\n\n        let errorMessage = $('<div />').addClass('wpstg-message wpstg-error-message');\n        $.each(data.errors, function(key, value) {\n          if (value.status === 'already_submitted') {\n            errorMessage = '';\n            // TODO: remove default custom classes\n            WPStagingCommon.getSwalModal(true, {\n              container: 'wpstg-issue-resubmit-confirmation',\n            }).fire({\n              title: '',\n              icon: 'warning',\n              html: value.message,\n              showCancelButton: true,\n              focusConfirm: false,\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n            }).then((result) => {\n              if (result.isConfirmed) {\n                sendIssueReport(button, 'true');\n              }\n            });\n          } else {\n            errorMessage.append('<p>' + value + '</p>');\n          }\n        });\n\n        $('.wpstg-report-issue-form').prepend(errorMessage);\n      } else {\n        const successMessage = $('<div />').addClass('wpstg-message wpstg-success-message');\n        successMessage.append('<p>Thanks for submitting your request! You should receive an auto reply mail with your ticket ID immediately for confirmation!<br><br>If you do not get that mail please contact us directly at <strong>support@wp-staging.com</strong></p>');\n\n        $('.wpstg--tab--header .wpstg-report-issue-form').html(successMessage);\n        if (document.getElementById('wpstg-modal-close') === null || document.getElementById('wpstg-modal-close') === undefined) {\n          $('.wpstg--tab--header .wpstg-success-message').append('<div class=\"wpstg-mt-10px wpstg-float-right\"><a id=\"wpstg-success-button\" href=\"#\" class=\"wpstg--red\"><span class=\"wpstg-ml-8px\">Close</span></a></div>');\n        }\n\n        // Hide message\n        setTimeout(function() {\n          $('.wpstg--tab--header .wpstg-report-issue-form').removeClass('wpstg-report-active');\n        }, 2000);\n      }\n    });\n  }\n\n  // Open/close actions drop down menu\n  $(document).on('click', '.wpstg-dropdown>.wpstg-dropdown-toggler', function(e) {\n    e.preventDefault();\n    $(e.target).next('.wpstg-dropdown-menu').toggleClass('shown');\n\n    $(e.target).find('.wpstg-caret').toggleClass('wpstg-caret-up');\n  });\n\n  $(document).on('click', '.wpstg-caret', function(e) {\n    e.preventDefault();\n\n    const toggler = $(e.target).closest('.wpstg-dropdown-toggler');\n\n    if (toggler) {\n      toggler.trigger('click');\n    }\n  });\n\n  // Close action drop down menu if clicked anywhere outside\n  document.addEventListener('click', function(event) {\n    const isClickInside = event.target.closest('.wpstg-dropdown-toggler');\n    if (!isClickInside) {\n      const dropDown = document.getElementsByClassName('wpstg-dropdown-menu');\n      for (let i = 0; i < dropDown.length; i++) {\n        dropDown[i].classList.remove('shown');\n      }\n      $('.wpstg-caret').removeClass('wpstg-caret-up');\n    }\n  });\n\n  // \"Event info\" for backup errors\n  window.addEventListener('finishedProcessWithError', function(customEvent) {\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'wpstg_job_error',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'error_message': customEvent.detail.error,\n        'job_id': WPStagingCommon.getJobId(),\n      },\n    });\n  });\n\n  /**\n   * Display logs in a modal.\n   * and avoid mixing of different processes logs\n   * @return {void}\n   */\n  function showProcessLogs() {\n    if (window.WPStaging.messages.length !== 0) {\n      const container = WPStagingCommon.getSwalContainer();\n      const logsContainer = container.querySelector('.wpstg--modal--process--logs');\n      logsContainer.innerHTML = '';\n      window.WPStaging.messages.forEach(function(message) {\n        const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n        const pElement = document.createElement('p');\n        pElement.className = msgClass;\n        pElement.textContent = `[${message.type}] - [${message.date}] - ${message.message}`;\n        logsContainer.appendChild(pElement);\n      });\n    }\n  }\n});\n"],"names":["closest","Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","s","el","this","call","parentElement","parentNode","nodeType","element","selector","wpstgHoverIntent","parent","onOver","onOut","x","y","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","e","clientX","clientY","compare","clearTimeout","Math","abs","undefined","setTimeout","dispatchOver","removeEventListener","addEventListener","onMouseOver","event","target","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","Object","assign","remove","WPStagingCommon","$","continueErrorHandle","retry","currentDelay","count","max","retryOnErrors","performingRequest","incrementRetry","incrementRatio","canRetry","reset","memoryExhaustArticleLink","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","listenTooltip","document","querySelector","style","visibility","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","icon","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","response","Error","hasOwnProperty","success","data","Array","length","shift","isLoading","show","hide","slugify","url","toString","toLowerCase","normalize","replace","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","error","message","handleFetchErrors","ok","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","type","xhr","textStatus","errorThrown","console","log","errorCode","statusCode","jQuery","qs","all","querySelectorAll","addEvent","evt","handler","slideDown","duration","display","overflow","height","offsetHeight","transitionProperty","transitionDuration","removeProperty","slideUp","getPreviousSibling","sibling","previousElementSibling","handleDisplayDependencies","id","hiddenClass","getAttribute","container","showIfChecked","showIfUnchecked","checked","_step","_iterator","_createForOfIteratorHelperLoose","done","value","classList","add","_step2","_iterator2","handleToggleElement","_step4","_iterator4","toggle","handleCopyPaste","navigator","clipboard","writeText","_step5","_iterator5","handleCopyToClipboard","forEach","WpstgSidebarMenu","init","_proto","wpstdStagingTab","wpstdBackupTab","wpstdSidebarMenu","addEvents","_this","setPageUrl","setSidebarMenu","page","history","pushState","location","pathname","wpstgSidebarMenuElements","i","WpstgContactUs","wpstgObject","wpstg","characters","currentDate","contactUsModal","contactUsButton","contactUsButtonBackupTab","reportIssueButton","askInTheForumForm","successForm","contactUsReportIssueBtn","contactUsCloseButton","contactUsSuccessPopup","contactUsSuccessPopupClose","debugCodeCopyButton","contactUsLoader","contactUsResponse","contactUsDebugCodeField","contactUsSupport","isDebugWindowOpened","notyf","Notyf","position","dismissible","types","background","key","sendDebugInfo","copyDebugCode","select","setSelectionRange","generateDebugCode","result","charAt","floor","random","getHours","getMinutes","getSeconds","_this2","disabled","debugCode","fetch","ajaxUrl","method","credentials","body","URLSearchParams","action","accessToken","nonce","headers","then","json","sent","warn","i18n","WpstgCloneStaging","pageWrapperId","pageWrapper","dom","enableButtonId","enableAction","sendRequest","Promise","reject","reload","WpstgDirectoryNavigation","directoryListingSelector","directoryListingContainer","dirCheckboxSelector","dirExpandSelector","unselectAllDirsSelector","selectDefaultDirsSelector","fetchChildrenAction","currentCheckboxElement","currentParentDiv","currentLoader","existingExcludes","excludedDirectories","isDefaultSelected","preventDefault","toggleDirExpand","unselectAll","selectDefault","toggleDirectoryNavigation","updateDirectorySelection","parseExcludes","changed","path","prefix","dirPath","isChecked","forceDefault","setAttribute","dirContainer","createElement","innerHTML","JSON","parse","directoryListing","appendChild","alert","getExcludedDirectories","_this$wpstgObject$set","_this3","isParentExcluded","push","exclude","isScanned","join","settings","directorySeparator","isParentAlreadyExcluded","dir","startsWith","getExtraDirectoriesRootOnly","extraDirectories","_this$wpstgObject$set2","extraDirectoriesTextArea","extraCustomDirectories","split","concat","countSelectedFiles","map","substr","slice","scanned","cbElement","subDirectories","nextElementSibling","parElem","children","textContent","themesCount","pluginsCount","filesCountElement","WpstgTableSelection","databaseTableSectionSelector","workflowSelector","networkCloneSelector","inputSelector","databaseTableSection","workflow","networkCloneCheckbox","isAllTablesChecked","isMultisite","isNetworkClone","input","setNetworkClone","selectDefaultTables","countSelectedTables","toggleTableSelection","unselectWPSTGTables","getRegexPattern","pattern","tblprefix","isNetwork","regexPattern","option","match","selected","name","getSelectedTablesWithoutPrefix","selectedTablesWithoutPrefix","getIncludedTables","includedTables","getExcludedTables","excludedTables","tablesCount","tablesCountElement","WpstgExcludeFilters","excludeFilterContainerSelector","excludeContainer","excludeTableBody","addFileSizeExclude","addFileExtExclude","addFileNameExclude","addDirNameExclude","clearExcludes","removeExclude","addExcludeRuleRow","templateName","excludeRowTemplate","excludeRow","content","cloneNode","removeChild","trim","getExcludeFilters","globExcludes","sizeExcludes","sizeCompares","sizeSizes","sizeByte","_i","_Object$entries","entries","_Object$entries$_i","sizeInput","ext","cleanStringForGlob","fileNamesPos","fileNames","_i2","_Object$entries2","_Object$entries2$_i","fileInput","fileName","dirNamesPos","dirNames","_i3","_Object$entries3","_Object$entries3$_i","dirInput","dirName","sizes","filter","onlyUnique","globs","index","self","indexOf","WpstgModal","confirmAction","swalOptions","additionalParams","triggerConfirmAction","WpstgResetModal","cloneID","fetchExcludeSettingsAction","modalErrorAction","resetButtonClass","resetModalContainerClass","resetTabSelector","directoryNavigator","excludeFilters","tableSelector","resetModalContainer","toggleContent","contentId","tabTriangle","isCollapsed","contains","transform","showModal","swalPromise","loadModal","fetchCloneExcludes","getAjaxLoader","width","focusConfirm","confirmButtonText","resetClone","clone","job","modal","renderError","getDirectoryNavigator","getTableSelector","wpstgIcon","WpstgCloningAdvanceSettings","baseContainerSelector","baseContainer","checkBoxSettingTogglerSelector","toggleSettings","WpstgMainMenu","activeTabClass","mainMenu","$this","targetElements","menuItems","menuItem","targetElement","dispatchEvent","Event","WpstgProcessModal","isProcessCancelled","isProcessFinished","processTime","processInterval","disableCancelButton","percentage","cloneId","successModal","showProcessLogs","stagingSiteUrl","start","setInterval","updateElapsedTime","stop","isCancelled","clearInterval","cancelProcess","confirm","messages","cancelCloneAction","setTitle","setPercentage","params","initializeProcessModal","cancelBtnTxt","instance","showCloseButton","showLoaderOnConfirm","allowEscapeKey","allowOutsideClick","onRender","getElementsByClassName","btnCancel","replaceChild","setProcessModal","processTitleElement","processPercentageElement","openProcessModal","showLogs","formatTimeDuration","toISOString","getCancelCloneAction","_this4","cancel","find","_this5","loadOverview","initializeSuccessModal","_this6","setSuccessModalContent","getElementById","messageBody","openSuccessModal","siteUrl","that","isFinished","getLogs","time","executionTime","progressBar","cloneExcludeFilters","areAllTablesChecked","currentJob","wpstgProcessModal","ajaxSpinner","error_message","returnValue","validateTargetHost","the_domain","val","test","cloneActions","$workFlow","on","prop","append","cancelCloning","startCloning","cancelCloningUpdate","restart","cloneData","stagingSiteName","confirmButtonColor","wpstgUnselectAllTables","wpstgUnselectAllTablesId","borderColor","_btnCancel","deleteDirectory","deleteDir","each","deleteClone","addClass","jsonResponse","tryParseJson","checkDiskSpace","switchStep","open","cloneHostname","resetModal","promise","dirNavigator","exclFilters","allTablesExcluded","excludeSizeRules","encodeURIComponent","excludeGlobRules","errorMsgFooter","verifyExternalDatabase","databaseUser","databasePassword","databaseServer","databaseDatabase","databaseSsl","is","proceedCloning","error_type","render","checks","production","staging","resolve","cloneDir","_response$data","scrollIntoView","runCloningSteps","getTime","cloneName","rules","databasePrefix","cronDisabled","emailsAllowed","networkClone","uploadsSymlinked","cleanPluginsThemes","cleanUploadsDir","getCloningData","sendCloningAjax","object","excludeOptions","_extends","wpstg_delete_clone","isArray","logMessage","_ref","$logsContainer","msgClass","date","_ref2","scrollTop","scrollHeight","requiredSpace","errorMessage","convertSeconds","seconds","setSeconds","processing","delayReq","last_msg","job_done","finish","step","checkUserDbPermissions","operationType","isConfirmed","click","urlSpinner","devicePixelRatio","removeAttr","cloneDirectoryName","directoryName","slug","substring","$targetDir","$targetUri","uri","attr","after","focus","selectedSite","selectedSiteWorkFlow","selectedAction","selectedSiteDbCheck","stepButtons","$section","toggleClass","slideToggle","hasClass","ready","sendIssueReport","button","forceSend","spinner","next","email","hosting_provider","syslog","terms","async","wpstg_email","wpstg_provider","wpstg_message","wpstg_syslog","wpstg_terms","wpstg_force_send","errors","prepend","successMessage","logsContainer","pElement","className","logBtn","$logs","hideLogs","childNodes","toggler","trigger","dropDown","customEvent","detail","job_id"],"mappings":"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"}