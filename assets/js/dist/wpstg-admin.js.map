{"version":3,"file":"wpstg-admin.js","sources":["../src/modules/wpstg-polyfill.js","../src/modules/wpstg-hover-intent.js","../src/wpstg.js","../src/modules/wpstg-dom-utils.js","../src/modules/wpstg-clone-staging.js","../src/modules/wpstg-directory-navigation.js","../src/modules/wpstg-table-selection.js","../src/modules/wpstg-exclude-filters.js","../src/modules/wpstg-modal.js","../src/modules/wpstg-reset-modal.js","../src/modules/wpstg-cloning-advance-settings.js","../src/modules/wpstg-main-menu.js","../src/wpstg-admin.js"],"sourcesContent":["/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    retry: {\n      currentDelay: 0,\n      count: 0,\n      max: 10,\n      retryOnErrors: [401, 403, 404, 429, 502, 503, 504],\n      performingRequest: false,\n      incrementRetry: function(incrementRatio = 1.25) {\n        WPStagingCommon.retry.performingRequest = true;\n        if (WPStagingCommon.retry.currentDelay === 0) {\n          // start with a delay of 1sec\n          WPStagingCommon.retry.currentDelay = 1000;\n          WPStagingCommon.retry.count = 1;\n        }\n\n        WPStagingCommon.retry.currentDelay += (500 * WPStagingCommon.retry.count * incrementRatio);\n        WPStagingCommon.retry.count++;\n      },\n      canRetry: function() {\n        return WPStagingCommon.retry.count < WPStagingCommon.retry.max;\n      },\n      reset: function() {\n        WPStagingCommon.retry.currentDelay = 0;\n        WPStagingCommon.retry.count = 0;\n        WPStagingCommon.retry.performingRequest = false;\n      },\n    },\n    memoryExhaustArticleLink: 'https://wp-staging.com/docs/php-fatal-error-allowed-memory-size-of-134217728-bytes-exhausted/',\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      // If retry request no need to show Error;\n      if (WPStagingCommon.retry.performingRequest) {\n        return;\n      }\n\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","import {closest} from './wpstg-polyfill';\nimport WPStagingCommon from '../wpstg.js';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n\n/**\n * Toggle target element set in data-wpstg-target of the given element\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleToggleElement(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.classList.toggle(hiddenClass);\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-copy to element(s) in data-wpstg-target\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyPaste(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target') || !element.getAttribute('data-wpstg-copy')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  navigator.clipboard.writeText(element.getAttribute('data-wpstg-copy'));\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.value = element.getAttribute('data-wpstg-copy', '');\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-source to clipboard\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyToClipboard(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-source')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const el = container.querySelector(element.getAttribute('data-wpstg-source'));\n\n  if (el) {\n    navigator.clipboard.writeText(el.value);\n  }\n}\n\n/**\n * A confirmation modal\n *\n * @param title\n * @param html\n * @param confirmText\n * @param confirmButtonClass\n * @return Promise\n */\nexport function confirmModal(title, html, confirmText, confirmButtonClass) {\n  return WPStagingCommon.getSwalModal(false, {\n    container: 'wpstg-swal-push-container',\n    confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n  }).fire({\n    title: title,\n    icon: 'warning',\n    html: html,\n    width: '750px',\n    focusConfirm: false,\n    confirmButtonText: confirmText,\n    showCancelButton: true,\n  });\n};\n\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Enable/Disable cloning for staging site\n */\nexport default class WpstgCloneStaging {\n  constructor(\n      pageWrapperId = '#wpstg-clonepage-wrapper',\n      wpstgObject = wpstg,\n  ) {\n    this.pageWrapper = dom.qs(pageWrapperId);\n    this.wpstgObject = wpstgObject;\n    this.enableButtonId = '#wpstg-enable-staging-cloning';\n    this.enableAction = 'wpstg_enable_staging_cloning';\n\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    if (this.pageWrapper === null) {\n      return;\n    }\n\n    dom.addEvent(this.pageWrapper, 'click', this.enableButtonId, () => {\n      this.sendRequest(this.enableAction);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  sendRequest(action) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        location.reload();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n\nwindow.onload = function() {\n  document.getElementById('wpstg--tab--toggle--staging').addEventListener('click', function() {\n    window.history.pushState(null, null, window.location.pathname + '?page=wpstg_clone');\n    const adminMenu= document.getElementById('toplevel_page_wpstg_clone');\n    const adminMenuElements = adminMenu.querySelector('ul').querySelectorAll('li');\n    if (adminMenuElements.length > 0) {\n      for (let i = 0; i < adminMenuElements.length; i++) {\n        adminMenuElements[i].classList.remove('current');\n        if (adminMenuElements[i].querySelector('a') !== null) {\n          if (adminMenuElements[i].querySelector('a').getAttribute('href') ==='admin.php?page=wpstg_clone') {\n            adminMenuElements[i].classList.add('current');\n          }\n        }\n      }\n    }\n  });\n};\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Fetch directory direct child directories\n */\nexport default class WpstgDirectoryNavigation {\n  constructor(\n      directoryListingSelector = '#wpstg-directories-listing',\n      workflowSelector = '#wpstg-workflow',\n      wpstgObject = wpstg,\n      notyf = null,\n  ) {\n    this.directoryListingContainer = dom.qs(directoryListingSelector);\n    this.workflow = dom.qs(workflowSelector);\n    this.wpstgObject = wpstgObject;\n    this.dirCheckboxSelector = '.wpstg-check-dir';\n    this.dirExpandSelector = '.wpstg-expand-dirs';\n    this.unselectAllDirsSelector = '.wpstg-unselect-dirs';\n    this.selectDefaultDirsSelector = '.wpstg-select-dirs-default';\n    this.fetchChildrenAction = 'wpstg_fetch_dir_children';\n    this.currentCheckboxElement = null;\n    this.currentParentDiv = null;\n    this.currentLoader = null;\n    this.existingExcludes = [];\n    this.excludedDirectories = [];\n    this.isDefaultSelected = false;\n    this.notyf = notyf;\n\n    this.init();\n  }\n\n  addEvents() {\n    if (this.directoryListingContainer === null) {\n      console.log('Error: directory navigation add events');\n      return;\n    }\n\n    dom.addEvent(this.directoryListingContainer, 'change', this.dirCheckboxSelector, (element, event) => {\n      event.preventDefault();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.dirExpandSelector, (element, event) => {\n      event.preventDefault();\n      if (this.toggleDirExpand(element)) {\n        this.sendRequest(this.fetchChildrenAction, element);\n      }\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.unselectAllDirsSelector, () => {\n      this.unselectAll();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.selectDefaultDirsSelector, () => {\n      this.selectDefault();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', '.wpstg-expand-dirs', (target, event) => {\n      event.preventDefault();\n      this.toggleDirectoryNavigation(target);\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'change', 'input.wpstg-check-dir', (target) => {\n      this.updateDirectorySelection(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n    this.parseExcludes();\n  }\n\n  /**\n   * Toggle Dir Expand,\n   * Return true if children aren't fetched\n   * @param {HTMLElement} element\n   * @return {boolean}\n   */\n  toggleDirExpand(element) {\n    this.currentParentDiv = element.parentElement;\n    this.currentCheckboxElement = element.previousSibling;\n    this.currentLoader = this.currentParentDiv.querySelector('.wpstg-is-dir-loading');\n    if (this.currentCheckboxElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return false;\n    }\n\n    if (this.currentCheckboxElement.getAttribute('data-scanned', 'false') === 'false') {\n      return true;\n    }\n\n    return false;\n  }\n\n  sendRequest(action) {\n    if (this.currentLoader !== null) {\n      this.currentLoader.style.display = 'inline-block';\n    }\n\n    const changed = this.currentCheckboxElement.getAttribute('data-changed');\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        dirPath: this.currentCheckboxElement.value,\n        isChecked: this.currentCheckboxElement.checked,\n        forceDefault: changed === 'true',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.currentCheckboxElement.setAttribute('data-scanned', true);\n        const dirContainer = document.createElement('div');\n        dirContainer.classList.add('wpstg-dir');\n        dirContainer.classList.add('wpstg-subdir');\n        dirContainer.innerHTML = JSON.parse(data.directoryListing);\n        this.currentParentDiv.appendChild(dirContainer);\n        if (this.currentLoader !== null) {\n          this.currentLoader.style.display = 'none';\n        }\n\n        dom.slideDown(dirContainer);\n\n        return;\n      }\n\n      if (this.notyf !== null) {\n        this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n      } else {\n        alert('Error: ' + this.wpstgObject.i18n['somethingWentWrong']);\n      }\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getExcludedDirectories() {\n    this.excludedDirectories = [];\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input:not(:checked)').forEach((element) => {\n      if (!this.isParentExcluded(element.value)) {\n        this.excludedDirectories.push(element.value);\n      }\n    });\n\n    if (!this.existingExcludes) {\n      this.existingExcludes = [];\n    }\n\n    this.existingExcludes.forEach((exclude) => {\n      if (!this.isParentExcluded(exclude) && !this.isScanned(exclude)) {\n        this.excludedDirectories.push(exclude);\n      }\n    });\n\n    return this.excludedDirectories.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  /**\n   * @param {string} path\n   * @return {bool}\n   */\n  isParentExcluded(path) {\n    let isParentAlreadyExcluded = false;\n    this.excludedDirectories.forEach((dir) => {\n      if (path.startsWith(dir + '/')) {\n        isParentAlreadyExcluded = true;\n      }\n    });\n\n    return isParentAlreadyExcluded;\n  }\n\n  getExtraDirectoriesRootOnly() {\n    this.getExcludedDirectories();\n    const extraDirectories = [];\n    this.directoryListingContainer.querySelectorAll(':not(.wpstg-subdir)>.wpstg-dir>input.wpstg-wp-non-core-dir:checked').forEach((element) => {\n      extraDirectories.push(element.value);\n    });\n\n    // Check if extra directories text area exists\n    // TODO: remove extraCustomDirectories code if no one require extraCustomDirectories...\n    const extraDirectoriesTextArea = dom.qs('#wpstg_extraDirectories');\n    if (extraDirectoriesTextArea === null || extraDirectoriesTextArea.value === '') {\n      return extraDirectories.join(this.wpstgObject.settings.directorySeparator);\n    }\n\n    const extraCustomDirectories = extraDirectoriesTextArea.value.split(/\\r?\\n/);\n\n    return extraDirectories.concat(extraCustomDirectories).join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  unselectAll() {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      element.checked = false;\n    });\n\n    this.countSelectedFiles();\n  }\n\n  selectDefault() {\n    // unselect all checkboxes\n    this.unselectAll();\n\n    // only select those checkboxes whose class is wpstg-wp-core-dir\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input.wpstg-wp-core-dir').forEach((element) => {\n      element.checked = true;\n    });\n\n    // then unselect those checkboxes whose parent has wpstg extra checkbox\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir > .wpstg-wp-non-core-dir').forEach((element) => {\n      element.parentElement.querySelectorAll('input.wpstg-wp-core-dir').forEach((element) => {\n        element.checked = false;\n      });\n    });\n\n    this.isDefaultSelected = true;\n\n    this.countSelectedFiles();\n  }\n\n  parseExcludes() {\n    this.existingExcludes = this.directoryListingContainer.getAttribute('data-existing-excludes', []);\n\n    if (typeof this.existingExcludes === 'undefined' || !this.existingExcludes) {\n      this.existingExcludes = [];\n      return;\n    }\n\n    if (this.existingExcludes.length === 0) {\n      this.existingExcludes = [];\n      return;\n    }\n\n    const existingExcludes = this.existingExcludes.split(',');\n    this.existingExcludes = existingExcludes.map((exclude) => {\n      if (exclude.substr(0, 1) === '/') {\n        return exclude.slice(1);\n      }\n\n      return exclude;\n    });\n  }\n\n  isScanned(exclude) {\n    let scanned = false;\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir>input').forEach((element) => {\n      if (element.value == exclude) {\n        scanned = true;\n      }\n    });\n\n    return scanned;\n  }\n\n  toggleDirectoryNavigation(element) {\n    const cbElement = element.previousSibling;\n    if (cbElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return;\n    }\n\n    if (cbElement.getAttribute('data-scanned', 'false') === 'false') {\n      return;\n    }\n\n    const subDirectories = dom.getNextSibling(element, '.wpstg-subdir');\n\n    if (subDirectories.style.display === 'none') {\n      dom.slideDown(subDirectories);\n    } else {\n      dom.slideUp(subDirectories);\n    }\n  }\n\n  updateDirectorySelection(element) {\n    const parent = element.parentElement;\n    element.setAttribute('data-changed', 'true');\n    if (element.checked) {\n      dom.getParents(parent, '.wpstg-dir').forEach((parElem) => {\n        for (let i = 0; i < parElem.children.length; i++) {\n          if (parElem.children[i].matches('.wpstg-check-dir')) {\n            parElem.children[i].checked = true;\n          }\n        }\n      });\n      parent.querySelectorAll('.wpstg-expand-dirs').forEach((x) => {\n        if (x.textContent === 'wp-admin' || x.textContent === 'wp-includes') {\n          return;\n        }\n        x.classList.remove('disabled');\n      });\n      parent.querySelectorAll('.wpstg-subdir .wpstg-check-dir').forEach((x) => {\n        x.checked = true;\n      });\n    } else {\n      parent.querySelectorAll('.wpstg-expand-dirs, .wpstg-check-subdirs').forEach((x) => {\n        x.classList.add('disabled');\n      });\n      parent.querySelectorAll('.wpstg-dir .wpstg-check-dir').forEach((x) => {\n        x.checked = false;\n      });\n    }\n\n    this.countSelectedFiles();\n  }\n\n  countSelectedFiles() {\n    const themesCount = this.directoryListingContainer.querySelectorAll('[data-content-type=\"theme\"]:checked').length;\n    const pluginsCount = this.directoryListingContainer.querySelectorAll('[data-content-type=\"plugin\"]:checked').length;\n    const filesCountElement = dom.qs('#wpstg-files-count');\n    if (themesCount === 0 && pluginsCount === 0) {\n      filesCountElement.classList.add('danger');\n      filesCountElement.innerHTML = this.wpstgObject.i18n['noFileSelected'];\n    } else {\n      filesCountElement.classList.remove('danger');\n      filesCountElement.innerHTML = this.wpstgObject.i18n['filesSelected'].replace('{t}', themesCount).replace('{p}', pluginsCount);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Database tables selection\n */\nexport default class WpstgTableSelection {\n  constructor(\n      databaseTableSectionSelector = '#wpstg-scanning-db',\n      workflowSelector = '#wpstg-workflow',\n      networkCloneSelector = '#wpstg_network_clone',\n      inputSelector = '#wpstg_select_tables_cloning',\n      wpstgObject = wpstg,\n  ) {\n    this.databaseTableSection = dom.qs(databaseTableSectionSelector);\n    this.workflow = dom.qs(workflowSelector);\n    this.networkCloneSelector = networkCloneSelector;\n    this.networkCloneCheckbox = dom.qs(networkCloneSelector);\n    this.wpstgObject = wpstgObject;\n    this.isAllTablesChecked = true;\n    this.isMultisite = this.wpstgObject.isMultisite === '1';\n    this.isNetworkClone = false;\n    this.inputSelector = inputSelector;\n    this.input = dom.qs(this.inputSelector);\n\n    this.init();\n  }\n\n  setNetworkClone(isNetworkClone) {\n    this.isNetworkClone = isNetworkClone;\n  }\n\n  addEvents() {\n    if (this.workflow === null) {\n      console.log('Error: database table section is null. Cannot register events');\n      return;\n    }\n\n    dom.addEvent(this.workflow, 'change', this.networkCloneSelector, () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(this.workflow, 'change', this.inputSelector, () => {\n      this.countSelectedTables();\n    });\n\n    dom.addEvent(this.workflow, 'click', '.wpstg-button-select', (target, event) => {\n      event.preventDefault();\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(this.workflow, 'click', '.wpstg-button-unselect', (target, event) => {\n      event.preventDefault();\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(this.workflow, 'click', '.wpstg-button-unselect-wpstg', (target, event) => {\n      event.preventDefault();\n      this.unselectWPSTGTables();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  getRegexPattern() {\n    let pattern = '^' + this.wpstgObject.tblprefix;\n    let isNetwork = false;\n    if (this.networkCloneCheckbox !== undefined && this.networkCloneCheckbox !== null) {\n      isNetwork = this.networkCloneCheckbox.checked;\n    }\n\n    // Force network clone true if set explicitly\n    if (this.isNetworkClone) {\n      isNetwork = true;\n    }\n\n    if (this.isMultisite && !isNetwork) {\n      pattern += '([^0-9])_*';\n    }\n\n    return pattern;\n  }\n\n  selectDefaultTables() {\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        option.selected = true;\n      } else {\n        option.selected = false;\n      }\n    });\n\n    this.countSelectedTables();\n  }\n\n  toggleTableSelection() {\n    if (false === this.isAllTablesChecked) {\n      this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.selected = true;\n      });\n      this.databaseTableSection.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n      this.isAllTablesChecked = true;\n    } else {\n      this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.selected = false;\n      });\n      this.databaseTableSection.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n      this.isAllTablesChecked = false;\n    }\n\n    this.countSelectedTables();\n  }\n\n  unselectWPSTGTables() {\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const regexPattern = 'wpstg';\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern) && !name.match(this.wpstgObject.tblprefix +'wpstg_queue')) {\n        option.selected = false;\n      }\n    });\n\n    this.countSelectedTables();\n  }\n\n  getSelectedTablesWithoutPrefix() {\n    const selectedTablesWithoutPrefix = [];\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning option:checked');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (!name.match(regexPattern)) {\n        selectedTablesWithoutPrefix.push(option.value);\n      }\n    });\n\n    return selectedTablesWithoutPrefix.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getIncludedTables() {\n    const includedTables = [];\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning option:checked');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        includedTables.push(option.value);\n      }\n    });\n\n    return includedTables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getExcludedTables() {\n    const excludedTables = [];\n    const options = this.databaseTableSection.querySelectorAll('#wpstg_select_tables_cloning option:not(:checked)');\n    const regexPattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        excludedTables.push(option.value);\n      }\n    });\n\n    return excludedTables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  countSelectedTables() {\n    const tablesCount = this.input.querySelectorAll('option:checked').length;\n    const tablesCountElement = dom.qs('#wpstg-tables-count');\n    if (tablesCount === 0) {\n      tablesCountElement.classList.add('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['noTableSelected'];\n    } else {\n      tablesCountElement.classList.remove('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['tablesSelected'].replace('{d}', tablesCount);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Rich Exclude Filter Module\n */\nexport default class WpstgExcludeFilters {\n  constructor(\n      excludeFilterContainerSelector = '#wpstg-exclude-filters-container',\n      wpstgObject = wpstg,\n  ) {\n    this.excludeContainer = dom.qs(excludeFilterContainerSelector);\n    this.excludeTableBody = dom.qs(`${excludeFilterContainerSelector} tbody`);\n    this.wpstgObject = wpstgObject;\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-size-rule', () => {\n      this.addFileSizeExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-ext-rule', () => {\n      this.addFileExtExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-name-rule', () => {\n      this.addFileNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-dir-name-rule', () => {\n      this.addDirNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-clear-all-rules', () => {\n      this.clearExcludes();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-remove-exclude-rule', (target) => {\n      this.removeExclude(target);\n    });\n  }\n\n  init() {\n    if (this.excludeContainer === null) {\n      console.log('Error: Given table selector not found!');\n      return;\n    }\n\n    this.addEvents();\n  }\n\n  addFileSizeExclude() {\n    this.addExcludeRuleRow('#wpstg-file-size-exclude-filter-template');\n  }\n\n  addFileExtExclude() {\n    this.addExcludeRuleRow('#wpstg-file-ext-exclude-filter-template');\n  }\n\n  addFileNameExclude() {\n    this.addExcludeRuleRow('#wpstg-file-name-exclude-filter-template');\n  }\n\n  addDirNameExclude() {\n    this.addExcludeRuleRow('#wpstg-dir-name-exclude-filter-template');\n  }\n\n  addExcludeRuleRow(templateName) {\n    const excludeRowTemplate = dom.qs(templateName);\n    if (excludeRowTemplate !== null) {\n      const clone = excludeRowTemplate.content.cloneNode(true);\n      const excludeRow = clone.querySelector('tr');\n\n      this.excludeTableBody.appendChild(excludeRow);\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'inherit';\n      });\n    }\n  }\n\n  clearExcludes() {\n    this.excludeTableBody.innerHTML = '';\n    dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n      e.style.display = 'none';\n    });\n  }\n\n  removeExclude(target) {\n    if (target.parentElement !== null && target.parentElement.parentElement !== null) {\n      this.excludeTableBody.removeChild(target.parentElement.parentElement);\n    }\n\n    if (this.excludeTableBody.innerHTML.trim() === '') {\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'none';\n      });\n    }\n  }\n\n  /**\n   * Converts all the exclude filters arrays into one single string to keep size of post request small\n   * @return {string}\n   */\n  getExcludeFilters() {\n    const globExcludes = [];\n    const sizeExcludes = [];\n\n    const sizeCompares = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleCompare[]\"]');\n    const sizeSizes = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileSizeExcludeRuleSize[]\"]');\n    const sizeByte = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleByte[]\"]');\n    for (const [key, sizeInput] of Object.entries(sizeSizes)) {\n      if (sizeInput.value !== '') {\n        sizeExcludes.push(sizeCompares[key].value + ' ' + sizeInput.value + sizeByte[key].value);\n      }\n    }\n\n    const extensionInputs = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileExtExcludeRule[]\"]');\n    extensionInputs.forEach((x) => {\n      const ext = this.cleanStringForGlob(x.value);\n      if (ext !== '') {\n        globExcludes.push('ext:' + ext.trim());\n      }\n    });\n\n    const fileNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileNameExcludeRulePos[]\"]');\n    const fileNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileNameExcludeRulePath[]\"]');\n    for (const [key, fileInput] of Object.entries(fileNames)) {\n      const fileName = this.cleanStringForGlob(fileInput.value);\n      if (fileName !== '') {\n        globExcludes.push('file:' + fileNamesPos[key].value + ' ' + fileName.trim());\n      }\n    }\n\n    const dirNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgDirNameExcludeRulePos[]\"]');\n    const dirNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgDirNameExcludeRulePath[]\"]');\n    for (const [key, dirInput] of Object.entries(dirNames)) {\n      const dirName = this.cleanStringForGlob(dirInput.value);\n      if (dirName !== '') {\n        globExcludes.push('dir:' + dirNamesPos[key].value + ' ' + dirName.trim());\n      }\n    }\n\n    return {\n      'sizes': sizeExcludes.filter(this.onlyUnique).join(','),\n      // return set of unique rules\n      'globs': globExcludes.filter(this.onlyUnique).join(','),\n    };\n  }\n\n  onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n\n  /**\n   * Remove most of the comment glob characters from the string\n   * @param {String} value\n   * @return {String}\n   */\n  cleanStringForGlob(value) {\n    // will replace character like * ^ / \\ ! ? [ from the string\n    return value.replace(/[*^//!\\[?]/g, '');\n  }\n}\n","/**\n * Basic WP Staging Modal implemented with help of Sweetalerts\n */\nexport default class WpstgModal {\n  constructor(\n      confirmAction,\n      wpstgObject = wpstg,\n  ) {\n    this.confirmAction = confirmAction;\n    this.wpstgObject = wpstgObject;\n  }\n\n  show(swalOptions, additionalParams = {}, callback = null) {\n    wpstgSwal.fire(swalOptions).then((result) => {\n      if (result.value && this.error !== null) {\n        this.triggerConfirmAction(additionalParams, callback);\n      }\n    });\n  }\n\n  triggerConfirmAction(additionalParams = {}, callback = null) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams(Object.assign({\n        action: this.confirmAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }, additionalParams)),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((response) => {\n      if (callback !== null) {\n        callback(response);\n      }\n    }).catch((error) => {\n      console.log(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","\nimport * as dom from './wpstg-dom-utils.js';\nimport WpstgDirectoryNavigation from './wpstg-directory-navigation.js';\nimport WpstgTableSelection from './wpstg-table-selection';\nimport WpstgExcludeFilters from './wpstg-exclude-filters.js';\nimport WpstgModal from './wpstg-modal.js';\nimport WPStagingCommon from './../wpstg.js';\n\n/**\n * Manage RESET MODAL\n */\nexport default class WpstgResetModal {\n  constructor(\n      cloneID,\n      workflowSelector = '#wpstg-workflow',\n      fetchExcludeSettingsAction = 'wpstg_clone_excludes_settings',\n      modalErrorAction = 'wpstg_modal_error',\n      wpstgObject = wpstg,\n  ) {\n    this.cloneID = cloneID;\n    this.workflow = dom.qs(workflowSelector);\n    this.wpstgObject = wpstgObject;\n    this.fetchExcludeSettingsAction = fetchExcludeSettingsAction;\n    this.modalErrorAction = modalErrorAction;\n    this.resetButtonClass = 'wpstg-confirm-reset-clone';\n    this.resetModalContainerClass = 'wpstg-reset-confirmation';\n    this.resetTabSelector = '.wpstg-reset-exclude-tab';\n    this.directoryNavigator = null;\n    this.excludeFilters = null;\n    this.tableSelector = null;\n    this.isNetworkClone = false;\n  }\n\n  addEvents() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (resetModalContainer === null) {\n      console.log('Exit');\n      return;\n    }\n\n    dom.addEvent(resetModalContainer, 'click', this.resetTabSelector, (target) => {\n      this.toggleContent(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  setNetworkClone(isNetworkClone) {\n    this.isNetworkClone = isNetworkClone;\n  }\n\n  toggleContent(target) {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const contentId = target.getAttribute('data-id');\n    const tabTriangle = target.querySelector('.wpstg-tab-triangle');\n    const isCollapsed = target.getAttribute('data-collapsed', 'true');\n    const content = dom.qs(contentId);\n    if (isCollapsed === 'true') {\n      if (resetModalContainer.classList.contains('has-collapsible-open')) {\n        resetModalContainer.classList.add('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.add('has-collapsible-open');\n      }\n\n      dom.slideDown(content);\n      tabTriangle.style.transform = 'rotate(90deg)';\n      target.setAttribute('data-collapsed', 'false');\n    } else {\n      if (resetModalContainer.classList.contains('has-collapsible-open-2')) {\n        resetModalContainer.classList.remove('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.remove('has-collapsible-open');\n      }\n\n      dom.slideUp(content);\n      tabTriangle.style.removeProperty('transform');\n      target.setAttribute('data-collapsed', 'true');\n    }\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    this.init();\n    this.fetchCloneExcludes();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return WPStagingCommon.getSwalModal(false, {\n      confirmButton: this.resetButtonClass + ' wpstg-confirm-reset-clone wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n      container: this.resetModalContainerClass + ' wpstg-swal2-container wpstg-swal2-loading',\n    }).fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '400px',\n      focusConfirm: false,\n      confirmButtonText: this.wpstgObject.i18n.resetClone,\n      showCancelButton: true,\n    });\n  }\n\n  fetchCloneExcludes() {\n    this.error = null;\n    // send ajax request and fetch preserved exclude settings\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.fetchExcludeSettingsAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        job: 'resetting',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if (!data.success) {\n        const errorModal = new WpstgModal(this.modalErrorAction, this.wpstgObject);\n        errorModal.show(Object.assign({\n          title: 'Error',\n          icon: 'error',\n          html: this.wpstgObject.i18n['somethingWentWrong'],\n          width: '500px',\n          confirmButtonText: 'Ok',\n          showCancelButton: false,\n          customClass: {\n            confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n            cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n            actions: 'wpstg--modal--actions',\n            popup: 'wpstg-swal-popup centered-modal',\n          },\n          buttonsStyling: false,\n          reverseButtons: true,\n        }, data.swalOptions), {\n          type: data.type,\n        });\n\n        return;\n      }\n\n      const modal = dom.qs('.wpstg-reset-confirmation');\n      modal.classList.remove('wpstg-swal2-loading');\n      modal.querySelector('.wpstg--swal2-popup').style.width = '540px';\n      modal.querySelector('.wpstg--swal2-content').innerHTML = data.html;\n      this.directoryNavigator = new WpstgDirectoryNavigation();\n      this.directoryNavigator.countSelectedFiles();\n      this.excludeFilters = new WpstgExcludeFilters();\n      this.tableSelector = new WpstgTableSelection('#wpstg-reset-excluded-tables', '.' + this.resetModalContainerClass);\n      this.tableSelector.setNetworkClone(this.isNetworkClone);\n      this.tableSelector.countSelectedTables();\n    }).catch((error) => {\n      this.renderError({\n        'html': this.wpstgObject.i18n['somethingWentWrong'] + ' ' + error,\n      });\n    });\n  }\n\n  getDirectoryNavigator() {\n    return this.directoryNavigator;\n  }\n\n  getExcludeFilters() {\n    return this.excludeFilters;\n  }\n\n  getTableSelector() {\n    return this.tableSelector;\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Handle toggle of advance settings checkboxes\n */\nexport default class WpstgCloningAdvanceSettings {\n  constructor(\n      baseContainerSelector = '#wpstg-clonepage-wrapper',\n  ) {\n    this.baseContainer = dom.qs(baseContainerSelector);\n    this.checkBoxSettingTogglerSelector = '.wpstg-toggle-advance-settings-section';\n    this.init();\n  }\n\n  /**\n   * Add events\n   * @return {void}\n   */\n  addEvents() {\n    if (this.baseContainer === null) {\n      return;\n    }\n\n    dom.addEvent(this.baseContainer, 'change', this.checkBoxSettingTogglerSelector, (element) => {\n      this.toggleSettings(element);\n    });\n  }\n\n  /**\n   * @return {void}\n   */\n  init() {\n    this.addEvents();\n  }\n\n  /**\n   * Expand/Collapse checkbox content on change\n   * @return {void}\n   */\n  toggleSettings(element) {\n    const target = dom.qs('#' + element.getAttribute('data-id'));\n    if (element.checked) {\n      dom.slideDown(target);\n    } else {\n      dom.slideUp(target);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\nexport default class WpstgMainMenu {\n  constructor() {\n    this.activeTabClass = 'wpstg--tab--active';\n    this.mainMenu();\n  }\n\n  mainMenu() {\n    const tabHeader = dom.qs('.wpstg--tab--header');\n    // Early bail if tab header is not available\n    if (tabHeader === null) {\n      return;\n    }\n\n    dom.addEvent(dom.qs('.wpstg--tab--header'), 'click', '.wpstg-button', (element) => {\n      const $this = element;\n      const target = $this.getAttribute('data-target');\n      const targetElements = dom.all(target);\n      const menuItems = dom.all('.wpstg--tab--header a[data-target]');\n      const contents = dom.all('.wpstg--tab--contents > .wpstg--tab--content');\n\n      contents.forEach((content) => {\n        // active tab class is without the css dot class prefix\n        if (content.matches('.' + this.activeTabClass + ':not(' + target + ')')) {\n          content.classList.remove(this.activeTabClass);\n        }\n      });\n\n      menuItems.forEach((menuItem) => {\n        if (menuItem !== $this) {\n          menuItem.classList.remove(this.activeTabClass);\n        }\n      });\n\n      $this.classList.add(this.activeTabClass);\n\n      targetElements.forEach((targetElement) => {\n        targetElement.classList.add(this.activeTabClass);\n      });\n\n      if ('#wpstg--tab--backup' === target) {\n        window.dispatchEvent(new Event('backups-tab'));\n      }\n    });\n  };\n}\n","import WpstgCloneStaging from './modules/wpstg-clone-staging.js';\nimport WpstgDirectoryNavigation from './modules/wpstg-directory-navigation.js';\nimport WpstgTableSelection from './modules/wpstg-table-selection.js';\nimport WpstgExcludeFilters from './modules/wpstg-exclude-filters.js';\nimport WpstgResetModal from './modules/wpstg-reset-modal.js';\nimport WpstgModal from './modules/wpstg-modal.js';\nimport WpstgCloningAdvanceSettings from './modules/wpstg-cloning-advance-settings.js';\nimport WpstgMainMenu from './modules/wpstg-main-menu.js';\nimport WPStagingCommon from './wpstg.js';\nimport {handleDisplayDependencies, handleToggleElement, handleCopyPaste, handleCopyToClipboard} from './modules/wpstg-dom-utils.js';\n\nvar WPStaging = (function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    time: 1,\n    executionTime: false,\n    progressBar: 0,\n    cloneExcludeFilters: null,\n    directoryNavigator: null,\n    tableSelector: null,\n    notyf: null,\n    areAllTablesChecked: true,\n    handleDisplayDependencies: handleDisplayDependencies,\n    handleToggleElement: handleToggleElement,\n    handleCopyPaste: handleCopyPaste,\n    handleCopyToClipboard: handleCopyToClipboard,\n  };\n  const cache = {elements: []};\n  let timeout; let ajaxSpinner;\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n  /**\n     * Show and Log Error Message\n     * @param {String} message\n     */\n  const showError = function(message) {\n    cache.get('#wpstg-try-again').css('display', 'inline-block');\n    cache.get('#wpstg-cancel-cloning').text('Reset');\n    cache.get('#wpstg-resume-cloning').show();\n    cache.get('#wpstg-error-wrapper').show();\n    cache.get('#wpstg-error-details').show().html(message);\n    cache.get('#wpstg-removing-clone').removeClass('wpstg-loading');\n    cache.get('.wpstg-loader').hide();\n    $('.wpstg--modal--process--generic-problem').show().html(message);\n\n    // Error event information for Staging\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'wpstg_staging_job_error',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'error_message': message,\n      },\n    });\n  };\n\n  /**\n   * Show warning during cloning or push process when closing tab or browser, or changing page\n   * @param {beforeunload} event\n   * @return {null}\n   */\n  that.warnIfClosingDuringProcess = function(event) {\n    // Only some browsers show the message below, most say something like \"Changes you made may not be saved\" (Chrome) or \"You have unsaved changes. Exit?\"\n    event.returnValue = 'You MUST leave this window open while cloning/pushing. Please wait...';\n    return null;\n  };\n\n  /**\n     *\n     * @param response the error object\n     * @param prependMessage Overwrite default error message at beginning\n     * @param appendMessage Overwrite default error message at end\n     * @returns void\n     */\n\n  const showAjaxFatalError = function(response, prependMessage, appendMessage) {\n    prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n    appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n    if (response === false) {\n      showError(prependMessage + ' Error: No response.' + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n\n    if (typeof response.error !== 'undefined' && response.error) {\n      console.error(response.message);\n      showError(prependMessage + ' Error: ' + response.message + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n  };\n\n  /**\n     *\n     * @param response\n     * @return {{ok}|*}\n     */\n  const handleFetchErrors = function(response) {\n    if (!response.ok) {\n      showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n    }\n    return response;\n  };\n\n  /** Hide and reset previous thrown visible errors */\n  const resetErrors = function() {\n    cache.get('#wpstg-error-details').hide().html('');\n  };\n\n  /**\n     * Common Elements\n     */\n  const elements = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    let urlSpinner = ajaxurl.replace('/admin-ajax.php', '') + '/images/spinner';\n    let timer;\n\n    if (2 < window.devicePixelRatio) {\n      urlSpinner += '-2x';\n    }\n\n    urlSpinner += '.gif';\n\n    ajaxSpinner = '<img src=\\'\\'' + urlSpinner + '\\' alt=\\'\\' class=\\'ajax-spinner general-spinner\\' />';\n\n    const getBaseValues = function() {\n      const path = $('#wpstg-use-target-dir').data('base-path');\n      const uri = $('#wpstg-use-target-hostname').data('base-uri');\n      return {\n        path,\n      };\n    };\n\n    $workFlow\n    /**\n        .on('change', '#wpstg_network_clone', function(e) {\n          e.preventDefault();\n          $('.wpstg-button-select').trigger('click');\n        })\n      */\n    // Check / Un-check All Database Tables New\n        .on('click', '.wpstg-button-unselect', function(e) {\n          e.preventDefault();\n\n          if (false === that.areAllTablesChecked) {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', 'selected');\n            cache.get('.wpstg-button-unselect').text('Unselect All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n            that.areAllTablesChecked = true;\n          } else {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', false);\n            cache.get('.wpstg-button-unselect').text('Select All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n            that.areAllTablesChecked = false;\n          }\n        })\n\n    /**\n             * Select tables with certain tbl prefix | NEW\n             * @param obj e\n             * @returns {undefined}\n             */\n    /**\n        .on('click', '.wpstg-button-select', function(e) {\n          e.preventDefault();\n          $('#wpstg_select_tables_cloning .wpstg-db-table').each(function() {\n            let regex = '^' + wpstg.tblprefix;\n            if (wpstg.isMultisite === '1' && !$('#wpstg_network_clone').is(':checked')) {\n              regex += '([^0-9])_*';\n            }\n\n            if ($(this).attr('name').match(regex)) {\n              $(this).prop('selected', 'selected');\n            } else {\n              $(this).prop('selected', false);\n            }\n          });\n        })\n\n    // Expand Directories\n        .on('click', '.wpstg-expand-dirs', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          $this.siblings('.wpstg-subdir').slideToggle();\n        })\n    // When a directory checkbox is Selected\n        .on('change', 'input.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // When a directory name is Selected\n        .on('change', 'href.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n        */\n    // Check the max length of the clone name and if the clone name already exists\n        .on('keyup', '#wpstg-new-clone-id', function() {\n          // Hide previous errors\n          document.getElementById('wpstg-error-details').style.display = 'none';\n\n          // This request was already sent, clear it up!\n          if ('number' === typeof (timer)) {\n            clearInterval(timer);\n          }\n\n          // Early bail if site name is empty\n          if (this.value === undefined || this.value === '') {\n            cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n            cache.get('#wpstg-start-cloning').removeAttr('disabled');\n            cache.get('#wpstg-clone-id-error').text('').hide();\n            return;\n          }\n\n          // Convert the site name to directory name (slugify the site name to create directory name)\n          const cloneDirectoryName = WPStagingCommon.slugify(this.value);\n\n          timer = setTimeout(\n              function() {\n                ajax(\n                    {\n                      action: 'wpstg_check_clone',\n                      accessToken: wpstg.accessToken,\n                      nonce: wpstg.nonce,\n                      directoryName: cloneDirectoryName,\n                    },\n                    function(response) {\n                      if (response.status === 'success') {\n                        cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').removeAttr('disabled');\n                        cache.get('#wpstg-clone-id-error').text('').hide();\n                      } else {\n                        cache.get('#wpstg-new-clone-id').addClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').prop('disabled', true);\n                        cache.get('#wpstg-clone-id-error').text(response.message).show();\n                      }\n                    },\n                );\n              },\n              500,\n          );\n        })\n    // Restart cloning process\n        .on('click', '#wpstg-start-cloning', function() {\n          resetErrors();\n          that.isCancelled = false;\n          that.getLogs = false;\n          that.progressBar = 0;\n        })\n        .on('input', '#wpstg-new-clone-id', function() {\n          if ($('#wpstg-clone-directory').length < 1) {\n            return;\n          }\n\n          const slug = WPStagingCommon.slugify(this.value).substring(0, 16);\n          const $targetDir = $('#wpstg-use-target-dir');\n          const $targetUri = $('#wpstg-use-target-hostname');\n          let path = $targetDir.data('base-path');\n          let uri = $targetUri.data('base-uri');\n\n          if (path) {\n            path = path.replace(/\\/+$/g, '') + '/' + slug + '/';\n          }\n\n          if (uri) {\n            uri = uri.replace(/\\/+$/g, '') + '/' + slug;\n          }\n\n\n          $('.wpstg-use-target-dir--value').text(path);\n          $('.wpstg-use-target-hostname--value').text(uri);\n\n          $targetDir.attr('data-path', path);\n          $targetUri.attr('data-uri', uri);\n          $('#wpstg_clone_dir').attr('placeholder', path);\n          $('#wpstg_clone_hostname').attr('placeholder', uri);\n        })\n        .on('input', '#wpstg_clone_hostname', function() {\n          if ($(this).val() === '' || validateTargetHost()) {\n            $('#wpstg_clone_hostname_error').remove();\n            return;\n          }\n          if (!validateTargetHost() && !$('#wpstg_clone_hostname_error').length) {\n            $('#wpstg-clone-directory tr:last-of-type').after('<tr><td>&nbsp;</td><td><p id=\"wpstg_clone_hostname_error\" style=\"color: red;\">&nbsp;Invalid host name. Please provide it in a format like http://example.com</p></td></tr>');\n          }\n        })\n    ;\n\n    cloneActions();\n  };\n\n  /* @returns {boolean} */\n  var validateTargetHost = function() {\n    const the_domain = $('#wpstg_clone_hostname').val();\n\n    if (the_domain === '') {\n      return true;\n    }\n\n    const reg = /^http(s)?:\\/\\/.*$/;\n    if (reg.test(the_domain) === false) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n     * Clone actions\n     */\n  var cloneActions = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Cancel cloning\n        .on('click', '#wpstg-cancel-cloning', function() {\n          if (!confirm('Are you sure you want to cancel cloning process?')) {\n            return false;\n          }\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n          that.progressBar = 0;\n\n          $('#wpstg-processing-status').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloning();\n        })\n    // Resume cloning\n        .on('click', '#wpstg-resume-cloning', function() {\n          resetErrors();\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n\n          that.isCancelled = false;\n\n          $('#wpstg-processing-status').text('Try to resume cloning process...');\n          $('#wpstg-error-details').hide();\n          $('.wpstg-loader').show();\n\n          $this.parent().append(ajaxSpinner);\n\n          that.startCloning();\n        })\n    // Cancel update cloning\n        .on('click', '#wpstg-cancel-cloning-update', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloningUpdate();\n        })\n    // Restart cloning\n        .on('click', '#wpstg-restart-cloning', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          restart();\n        })\n    // Delete clone - confirmation\n        .on('click', '.wpstg-remove-clone[data-clone]', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          const $existingClones = cache.get('#wpstg-existing-clones');\n\n          $workFlow.removeClass('active');\n\n          cache.get('.wpstg-loader').show();\n\n          ajax(\n              {\n                action: 'wpstg_confirm_delete_clone',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                clone: $(this).data('clone'),\n              },\n              function(response) {\n                cache.get('#wpstg-removing-clone').html(response);\n\n                $existingClones.children('img').remove();\n\n                cache.get('.wpstg-loader').hide();\n\n                $('html, body').animate({\n                  // This logic is meant to be a \"scrollBottom\"\n                  scrollTop: $('#wpstg-remove-clone').offset().top - $(window).height() +\n                                $('#wpstg-remove-clone').height() + 50,\n                }, 100);\n              },\n              'HTML',\n          );\n        })\n    // Delete clone - confirmed\n        .on('click', '#wpstg-remove-clone', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          cache.get('#wpstg-removing-clone').addClass('wpstg-loading');\n\n          cache.get('.wpstg-loader').show();\n\n          deleteClone($(this).data('clone'));\n        })\n    // Cancel deleting clone\n        .on('click', '#wpstg-cancel-removing', function(e) {\n          e.preventDefault();\n          $('.wpstg-clone').removeClass('active');\n          cache.get('#wpstg-removing-clone').html('');\n        })\n    // Update\n        .on('click', '.wpstg-execute-clone', function(e) {\n          e.preventDefault();\n\n          const clone = $(this).data('clone');\n\n          $workFlow.addClass('wpstg-loading');\n\n          that.cloneExcludeFilters = null;\n          ajax(\n              {\n                action: 'wpstg_scanning',\n                clone: clone,\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n              },\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! Error: No response.  Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n                  );\n                }\n\n                const jsonResponse = tryParseJson(response);\n                if (jsonResponse !== false && jsonResponse.success === false) {\n                  $workFlow.removeClass('wpstg-loading');\n                  showErrorModal(jsonResponse);\n\n                  return;\n                }\n\n                $workFlow.removeClass('wpstg-loading').html(response);\n                // register check disk space function for clone update process.\n                checkDiskSpace();\n                that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', '#wpstg-workflow', wpstg, that.notyf);\n                that.directoryNavigator.countSelectedFiles();\n                that.tableSelector = new WpstgTableSelection('#wpstg-scanning-db', '#wpstg-workflow', '#wpstg_network_clone', '#wpstg_select_tables_cloning', wpstg, that.notyf);\n                that.tableSelector.countSelectedTables();\n                that.cloneExcludeFilters = new WpstgExcludeFilters();\n                that.switchStep(2);\n              },\n              'HTML',\n          );\n        })\n        .on('click', '#wpstg-update-cloning-site-button', function(e) {\n          window.open(that.data.cloneHostname, '_blank');\n        })\n    // Reset Clone\n        .on('click', '.wpstg-reset-clone', function(e) {\n          e.preventDefault();\n          const clone = $(this).data('clone');\n          const resetModal = new WpstgResetModal(clone);\n          resetModal.setNetworkClone($(this).data('network') === 'yes');\n          const promise = resetModal.showModal();\n          that.areAllTablesChecked = true;\n\n          promise.then((result) => {\n            if (result.value) {\n              const dirNavigator = resetModal.getDirectoryNavigator();\n              const tableSelector = resetModal.getTableSelector();\n              const exclFilters = resetModal.getExcludeFilters().getExcludeFilters();\n\n              let includedTables = '';\n              let excludedTables = '';\n              let selectedTablesWithoutPrefix = '';\n              let allTablesExcluded = false;\n\n              if (tableSelector !== null) {\n                includedTables = tableSelector.getIncludedTables();\n                excludedTables = tableSelector.getExcludedTables();\n                selectedTablesWithoutPrefix = tableSelector.getSelectedTablesWithoutPrefix();\n              }\n\n              if (includedTables.length > excludedTables.length) {\n                includedTables = '';\n              } else if (excludedTables.length > includedTables.length) {\n                excludedTables = '';\n                allTablesExcluded = includedTables === '';\n              }\n\n              resetClone(clone, {\n                includedTables: includedTables,\n                excludedTables: excludedTables,\n                allTablesExcluded: allTablesExcluded,\n                selectedTablesWithoutPrefix: selectedTablesWithoutPrefix,\n                excludeSizeRules: encodeURIComponent(exclFilters.sizes),\n                excludeGlobRules: encodeURIComponent(exclFilters.globs),\n                excludedDirectories: dirNavigator.getExcludedDirectories(),\n                extraDirectories: dirNavigator.getExtraDirectoriesRootOnly(),\n              });\n            }\n          });\n\n          return;\n        });\n  };\n\n  /**\n   * Ajax Requests\n   * @param Object data\n   * @param Function callback\n   * @param string dataType\n   * @param bool showErrors\n   * @param int tryCount\n   * @param float incrementRatio\n   */\n  var ajax = function(data, callback, dataType, showErrors, tryCount, incrementRatio = null) {\n    if ('undefined' === typeof (dataType)) {\n      dataType = 'json';\n    }\n\n    if (false !== showErrors) {\n      showErrors = true;\n    }\n\n    tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n    const retryLimit = 5;\n\n    let retryTimeout = 10000 * tryCount;\n\n    incrementRatio = parseInt(incrementRatio);\n    if (!isNaN(incrementRatio)) {\n      retryTimeout *= incrementRatio;\n    }\n\n    const errorMsgFooter = 'Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP STAGING Small Server Settings</a> or submit an error report and contact us. <br/><br/><strong>Tip:</strong> If you get this error while pushing, you can also use the <strong>BACKUP & MIGRATION</strong> feature to move your staging site to live. <a href=\\'https://wp-staging.com/docs/how-to-migrate-your-wordpress-site-to-a-new-host/\\' target=\\'_blank\\'>Read more.</a>';\n\n    $.ajax({\n      url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n      type: 'POST',\n      dataType: dataType,\n      cache: false,\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        // try again after 10 seconds\n        tryCount++;\n        if (tryCount <= retryLimit) {\n          console.log('RETRYING ' + tryCount + '/' + retryLimit);\n          setTimeout(function() {\n            ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n            return;\n          }, retryTimeout);\n        } else {\n          console.log('RETRYING LIMIT');\n          const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n          showError(\n              'Fatal Error:  ' + errorCode + ' ' + errorMsgFooter,\n          );\n        }\n      },\n      success: function(data) {\n        if ('function' === typeof (callback)) {\n          callback(data);\n        }\n      },\n      statusCode: {\n        404: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 404 - Can\\'t find ajax request URL! ' + errorMsgFooter);\n          }\n        },\n        500: function() {\n          if (tryCount >= retryLimit) {\n            showError('Fatal Error 500 - Internal server error while processing the request! ' + errorMsgFooter);\n          }\n        },\n        504: function() {\n          if (tryCount > retryLimit) {\n            showError('Error 504 - It seems your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        502: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 502 - It seems your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        503: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 503 - It seem your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        429: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 429 - It seems your server is rate limiting ajax requests. Please try to resume after a minute. ' + errorMsgFooter);\n          }\n        },\n        403: function() {\n          if (tryCount >= retryLimit) {\n            showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n          }\n        },\n      },\n    });\n  };\n\n  /**\n   * Next / Previous Step Clicks to Navigate Through Staging Job\n   */\n  const stepButtons = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Next Button\n        .on('click', '.wpstg-next-step-link', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n          const isScan = false;\n\n          if ($('#wpstg_clone_hostname').length && !validateTargetHost()) {\n            $('#wpstg_clone_hostname').focus();\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_update' || $this.data('action') === 'wpstg_reset') {\n          // Update / Reset Clone - confirmed\n            let onlyUpdateMessage = '';\n            if ($this.data('action') === 'wpstg_update') {\n              onlyUpdateMessage = ' \\n\\nExclude all tables and folders you do not want to overwrite, first! \\n\\nDo not cancel the updating process! This can break your staging site. \\n\\n\\Create a backup of your staging website before you proceed.';\n            }\n\n            if (!confirm('STOP! This will overwrite your staging site with all selected data from the production site! This should be used only if you want to clone again your production site. Are you sure you want to do this?' + onlyUpdateMessage)) {\n              return false;\n            }\n          }\n\n          // Button is disabled\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_cloning') {\n          // Verify External Database If Checked and Not Skipped\n            if ($('#wpstg-ext-db').is(':checked')) {\n              verifyExternalDatabase($this, $workFlow);\n              return;\n            }\n          }\n\n          proceedCloning($this, $workFlow);\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          cache.get('.wpstg-loader').removeClass('wpstg-finished');\n          cache.get('.wpstg-loader').hide();\n          loadOverview();\n        });\n  };\n\n  /**\n   * Get Included (Checked) Database Tables\n   * @return {Array}\n   */\n  const getIncludedTables = function() {\n    const includedTables = [];\n\n    $('#wpstg_select_tables_cloning option:selected').each(function() {\n      includedTables.push(this.value);\n    });\n\n    return includedTables;\n  };\n\n  /**\n   * Get Excluded (Unchecked) Database Tables\n   * Not used anymore!\n   * @return {Array}\n   */\n  const getExcludedTables = function() {\n    const excludedTables = [];\n\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n  /**\n   * Verify External Database for Cloning\n   */\n  var verifyExternalDatabase = function($this, workflow) {\n    cache.get('.wpstg-loader').show();\n    ajax(\n        {\n          action: 'wpstg_database_verification',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          databaseUser: cache.get('#wpstg_db_username').val(),\n          databasePassword: cache.get('#wpstg_db_password').val(),\n          databaseServer: cache.get('#wpstg_db_server').val(),\n          databaseDatabase: cache.get('#wpstg_db_database').val(),\n          databaseSsl: cache.get('#wpstg_db_ssl').is(':checked'),\n        },\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' === typeof (response.success)) {\n            showError(\n                'Something went wrong! Error: Invalid response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          if (response.success) {\n            cache.get('.wpstg-loader').hide();\n            proceedCloning($this, workflow);\n            return;\n          }\n\n          if (response.error_type === 'comparison') {\n            cache.get('.wpstg-loader').hide();\n            let render = '<table class=\"wpstg-db-comparison-table\"><thead><tr><th>Property</th><th>Production DB</th><th>Staging DB</th><th>Status</th></tr></thead><tbody>';\n            response.checks.forEach((x) => {\n              let icon = '<span class=\"wpstg-css-tick\"></span>';\n              if (x.production !== x.staging) {\n                icon = '<span class=\"wpstg-css-cross\"></span>';\n              }\n              render += '<tr><td>' + x.name + '</td><td>' + x.production + '</td><td>' + x.staging + '</td><td>' + icon + '</td></tr>';\n            });\n            render += '</tbody></table><p>Note: Some MySQL/MariaDB properties do not match. You may proceed but the staging site may not work as expected.</p>';\n            WPStagingCommon.getSwalModal(true, {\n              popup: 'wpstg-swal-popup wpstg-db-comparison-modal centered-modal',\n            }).fire({\n              title: 'Different Database Properties',\n              icon: 'warning',\n              html: render,\n              width: '650px',\n              focusConfirm: false,\n              confirmButtonText: 'Proceed',\n              showCancelButton: true,\n            }).then(function(result) {\n              if (result.value) {\n                proceedCloning($this, workflow);\n              }\n            });\n            return;\n          }\n\n          WPStagingCommon.getSwalModal(true).fire({\n            title: 'Different Database Properties',\n            icon: 'error',\n            html: response.message,\n            focusConfirm: true,\n            confirmButtonText: 'Ok',\n            showCancelButton: false,\n          });\n          cache.get('.wpstg-loader').hide();\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n   * Get Cloning Step Data\n   */\n  const getCloningData = function() {\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.data.cloneID = new Date().getTime().toString();\n    if ('wpstg_update' === that.data.action) {\n      that.data.cloneID = $('#wpstg-new-clone-id').data('clone');\n    }\n\n    that.data.cloneName = $('#wpstg-new-clone-id').val() || that.data.cloneID;\n\n    if (that.directoryNavigator !== null) {\n      that.data.excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      that.data.extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n    }\n\n    that.data.excludeGlobRules = '';\n    that.data.excludeSizeRules = '';\n    if (that.cloneExcludeFilters instanceof WpstgExcludeFilters) {\n      const rules = that.cloneExcludeFilters.getExcludeFilters();\n      that.data.excludeGlobRules = encodeURIComponent(rules.globs);\n      that.data.excludeSizeRules = encodeURIComponent(rules.sizes);\n    }\n\n    that.data.includedTables = '';\n    that.data.excludedTables = '';\n    that.data.allTablesExcluded = false;\n\n    if (that.tableSelector !== null) {\n      that.data.includedTables = that.tableSelector.getIncludedTables();\n      that.data.excludedTables = that.tableSelector.getExcludedTables();\n      that.data.selectedTablesWithoutPrefix = that.tableSelector.getSelectedTablesWithoutPrefix();\n    }\n\n    if (that.data.includedTables.length > that.data.excludedTables.length) {\n      that.data.includedTables = '';\n    } else if (that.data.excludedTables.length > that.data.includedTables.length) {\n      that.data.excludedTables = '';\n      that.data.allTablesExcluded = that.data.includedTables === '';\n    }\n\n    that.data.databaseServer = $('#wpstg_db_server').val();\n    that.data.databaseUser = $('#wpstg_db_username').val();\n    that.data.databasePassword = $('#wpstg_db_password').val();\n    that.data.databaseDatabase = $('#wpstg_db_database').val();\n    that.data.databasePrefix = $('#wpstg_db_prefix').val();\n    that.data.databaseSsl = $('#wpstg_db_ssl').is(':checked');\n    const cloneDir = $('#wpstg_clone_dir').val();\n    that.data.cloneDir = encodeURIComponent($.trim(cloneDir));\n    that.data.cloneHostname = $('#wpstg_clone_hostname').val();\n    that.data.cronDisabled = $('#wpstg_disable_cron').is(':checked');\n    that.data.emailsAllowed = $('#wpstg_allow_emails').is(':checked');\n    that.data.networkClone = $('#wpstg_network_clone').is(':checked');\n    that.data.uploadsSymlinked = $('#wpstg_symlink_upload').is(':checked');\n    that.data.cleanPluginsThemes = $('#wpstg-clean-plugins-themes').is(':checked');\n    that.data.cleanUploadsDir = $('#wpstg-clean-uploads').is(':checked');\n  };\n\n  var proceedCloning = function($this, workflow) {\n    // Add loading overlay\n    workflow.addClass('wpstg-loading');\n\n    // Prepare data\n    that.data = {\n      action: $this.data('action'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    // Cloning data\n    getCloningData();\n\n    sendCloningAjax(workflow);\n  };\n\n  var sendCloningAjax = function(workflow) {\n    // Send ajax request\n    ajax(\n        that.data,\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong!<br/><br/> Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n          const jsonResponse = tryParseJson(response);\n          if (jsonResponse !== false && jsonResponse.success === false) {\n            workflow.removeClass('wpstg-loading');\n            showErrorModal(jsonResponse);\n\n            return;\n          }\n\n          // Styling of elements\n          workflow.removeClass('wpstg-loading').html(response);\n          that.cloneExcludeFilters = null;\n          if (that.data.action === 'wpstg_scanning') {\n            that.areAllTablesChecked = true;\n            that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', '#wpstg-workflow', wpstg, that.notyf);\n            that.tableSelector = new WpstgTableSelection('#wpstg-scanning-db', '#wpstg-workflow', '#wpstg_network_clone', '#wpstg_select_tables_cloning', wpstg);\n            that.switchStep(2);\n            that.cloneExcludeFilters = new WpstgExcludeFilters();\n            that.directoryNavigator.countSelectedFiles();\n            that.tableSelector.countSelectedTables();\n          } else if (that.data.action === 'wpstg_cloning' || that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n            that.switchStep(3);\n          }\n\n          // Start cloning\n          that.startCloning();\n        },\n        'HTML',\n    );\n  };\n\n  var showErrorModal = function(response) {\n    const errorModal = new WpstgModal('wpstg_modal_error', wpstg);\n    errorModal.show(Object.assign({\n      title: 'Error',\n      icon: 'error',\n      html: wpstg.i18n['somethingWentWrong'] + (response.message !== undefined ? ('<br/>' + response.message) : ''),\n      width: '500px',\n      confirmButtonText: 'Ok',\n      showCancelButton: false,\n      customClass: {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n        actions: 'wpstg--modal--actions',\n        popup: 'wpstg-swal-popup centered-modal',\n      },\n      buttonsStyling: false,\n      reverseButtons: true,\n    }, response.swalOptions), {\n      type: response.type,\n    });\n  };\n\n  const tryParseJson = function(json) {\n    // early bail if not string\n    if (!json) {\n      return false;\n    }\n\n    try {\n      const object = JSON.parse(json);\n      if (object && typeof object === 'object') {\n        return object;\n      }\n    } catch (e) {\n      // do nothing on catch\n    }\n\n    return false;\n  };\n\n  var resetClone = function(clone, excludeOptions) {\n    that.data = {\n      action: 'wpstg_reset',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n      cloneID: clone,\n    };\n\n    that.data = {...that.data, ...excludeOptions};\n\n    const $workFlow = cache.get('#wpstg-workflow');\n    sendCloningAjax($workFlow);\n  };\n\n  /**\n   * Loads Overview (first step) of Staging Job\n   */\n  var loadOverview = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow.addClass('wpstg-loading');\n\n    ajax(\n        {\n          action: 'wpstg_overview',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response. Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report.',\n            );\n          }\n\n          const $currentStep = cache.get('.wpstg-current-step');\n\n          // Styling of elements\n          $workFlow.removeClass('wpstg-loading').html(response);\n        },\n        'HTML',\n    );\n\n    that.switchStep(1);\n    cache.get('.wpstg-step3-cloning').show();\n    cache.get('.wpstg-step3-pushing').hide();\n  };\n\n  /**\n   * Load Tabs\n   */\n  const tabs = function() {\n    cache.get('#wpstg-workflow').on('click', '.wpstg-tab-header', function(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const $section = cache.get($this.data('id'));\n\n      $this.toggleClass('expand');\n\n      $section.slideToggle();\n\n      const tabTriangle = $this.find('.wpstg-tab-triangle');\n\n      if ($this.hasClass('expand')) {\n        tabTriangle.removeClass('wpstg-no-icon');\n        tabTriangle.text('');\n        tabTriangle.addClass('wpstg-rotate-90');\n      } else {\n        tabTriangle.removeClass('wpstg-rotate-90');\n      }\n    });\n  };\n\n  /**\n   * Delete Clone\n   * @param {String} clone\n   */\n  var deleteClone = function(clone) {\n    const deleteDir = $('#deleteDirectory:checked').data('deletepath');\n\n    ajax(\n        {\n          action: 'wpstg_delete_clone',\n          clone: clone,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          excludedTables: getExcludedTables(),\n          deleteDir: deleteDir,\n        },\n        function(response) {\n          if (response) {\n            showAjaxFatalError(response);\n\n            // Finished\n            if ('undefined' !== typeof response.delete && (response.delete === 'finished' || response.delete === 'unfinished')) {\n              cache.get('#wpstg-removing-clone').removeClass('wpstg-loading').html('');\n\n              if (response.delete === 'finished' && response.error === undefined) {\n                $('.wpstg-clone[data-clone-id=\"' + clone + '\"]').remove();\n              }\n\n              // No staging site message is also of type/class .wpstg-class but hidden\n              // We have just excluded that from search when counting no of clones\n              if ($('#wpstg-existing-clones .wpstg-clone').length < 1) {\n                cache.get('#wpstg-existing-clones').find('h3').text('');\n                cache.get('#wpstg-no-staging-site-results').show();\n              }\n\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n          }\n          // continue\n          if (true !== response) {\n            deleteClone(clone);\n            return;\n          }\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloning = function() {\n    that.timer('stop');\n\n\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_clone',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n            cache.get('.wpstg-loader').hide();\n            // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloning();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloningUpdate = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_update',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var restart = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_restart',\n          // clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Scroll the window log to bottom\n   * @return void\n   */\n  const logscroll = function() {\n    const $div = cache.get('.wpstg-log-details');\n    if ('undefined' !== typeof ($div[0])) {\n      $div.scrollTop($div[0].scrollHeight);\n    }\n  };\n\n  /**\n   * Append the log to the logging window\n   * @param string log\n   * @return void\n   */\n  const getLogs = function(log) {\n    if (log != null && 'undefined' !== typeof (log)) {\n      if (log.constructor === Array) {\n        $.each(log, function(index, value) {\n          if (value === null) {\n            return;\n          }\n          if (value.type === 'ERROR') {\n            cache.get('.wpstg-log-details').append('<span class=\"wpstg--red\">[' + value.type + ']</span>-' + '[' + value.date + '] ' + value.message + '</br>');\n          } else {\n            cache.get('.wpstg-log-details').append('[' + value.type + ']-' + '[' + value.date + '] ' + value.message + '</br>');\n          }\n        });\n      } else {\n        cache.get('.wpstg-log-details').append('[' + log.type + ']-' + '[' + log.date + '] ' + log.message + '</br>');\n      }\n    }\n    logscroll();\n  };\n\n  /**\n   * Check disk space\n   * @return string json\n   */\n  var checkDiskSpace = function() {\n    cache.get('#wpstg-check-space').on('click', function(e) {\n      cache.get('.wpstg-loader').show();\n      const excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      const extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n\n      ajax(\n          {\n            action: 'wpstg_check_disk_space',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedDirectories: excludedDirectories,\n            extraDirectories: extraDirectories,\n          },\n          function(response) {\n            if (false === response) {\n              cache.get('#wpstg-clone-id-error').text('Can not detect required disk space').show();\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n\n            // Show required disk space\n            cache.get('#wpstg-clone-id-error').html(\n                '<strong>Estimated necessary disk space: ' + response.requiredSpace + '</strong>' +\n              (response.errorMessage !== null ? ('<br>' + response.errorMessage) : '') +\n              '<br> <span style=\"color:#444;\">Before you proceed ensure your account has enough free disk space to hold the entire instance of the production site. You can check the available space from your hosting account (e.g. cPanel).</span>').show();\n            cache.get('.wpstg-loader').hide();\n          },\n          'json',\n          false,\n      );\n    });\n  };\n\n  /**\n   * Show or hide animated loading icon\n   * @param isLoading bool\n   */\n  const isLoading = function(isLoading) {\n    if (!isLoading || isLoading === false) {\n      cache.get('.wpstg-loader').hide();\n    } else {\n      cache.get('.wpstg-loader').show();\n    }\n  };\n\n  /**\n   * Count up processing execution time\n   * @param string status\n   * @return html\n   */\n  that.timer = function(status) {\n    if (status === 'stop') {\n      const time = that.time;\n      that.time = 1;\n      clearInterval(that.executionTime);\n      return that.convertSeconds(time);\n    }\n\n\n    that.executionTime = setInterval(function() {\n      if (null !== document.getElementById('wpstg-processing-timer')) {\n        document.getElementById('wpstg-processing-timer').innerHTML = 'Elapsed Time: ' + that.convertSeconds(that.time);\n      }\n      that.time++;\n      if (status === 'stop') {\n        that.time = 1;\n        clearInterval(that.executionTime);\n      }\n    }, 1000);\n  };\n\n  /**\n   * Convert seconds to hourly format\n   * @param int seconds\n   * @return string\n   */\n  that.convertSeconds = function(seconds) {\n    const date = new Date(null);\n    date.setSeconds(seconds); // specify value for SECONDS here\n    return date.toISOString().substr(11, 8);\n  };\n\n  /**\n   * Start Cloning Process\n   * @type {Function}\n   */\n  that.startCloning = (function() {\n    resetErrors();\n\n    // Register function for checking disk space\n    checkDiskSpace();\n\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.isCancelled = false;\n\n    // Start the process\n    start();\n\n    // Functions\n    // Start\n    function start() {\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-cancel-cloning').text('Cancel');\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-error-details').hide();\n\n\n      // Clone Database\n      setTimeout(function() {\n        // cloneDatabase();\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        processing();\n      }, wpstg.delayReq);\n\n      that.timer('start');\n    }\n\n\n    /**\n     * Start ajax processing\n     * @return string\n     */\n    var processing = function() {\n      if (true === that.isCancelled) {\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return false;\n      }\n\n      isLoading(true);\n\n      let excludedDirectories = '';\n      let extraDirectories = '';\n      if (that.directoryNavigator !== null) {\n        excludedDirectories = that.directoryNavigator.getExcludedDirectories();\n        extraDirectories = that.directoryNavigator.getExtraDirectoriesRootOnly();\n      }\n\n      // Show logging window\n      cache.get('.wpstg-log-details').show();\n\n      WPStaging.ajax(\n          {\n            action: 'wpstg_processing',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedTables: getExcludedTables(),\n            excludedDirectories: encodeURIComponent(excludedDirectories),\n            extraDirectories: encodeURIComponent(extraDirectories),\n          },\n          function(response) {\n            showAjaxFatalError(response);\n\n            // Add Log messages\n            if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n              getLogs(response.last_msg);\n            }\n            // Continue processing\n            if (false === response.status) {\n              progressBar(response);\n\n              setTimeout(function() {\n                cache.get('.wpstg-loader').show();\n                processing();\n              }, wpstg.delayReq);\n            } else if (true === response.status && 'finished' !== response.status) {\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-error-wrapper').hide();\n              progressBar(response, true);\n              processing();\n            } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n              window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n              finish(response);\n            }\n            ;\n          },\n          'json',\n          false,\n      );\n    };\n\n    // Finish\n    function finish(response) {\n      if (true === that.getLogs) {\n        getLogs();\n      }\n\n      progressBar(response);\n\n      // Add Log\n      if ('undefined' !== typeof (response.last_msg)) {\n        getLogs(response.last_msg);\n      }\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n      $('#wpstg-processing-status').text('Succesfully finished');\n\n      cache.get('#wpstg_staging_name').html(that.data.cloneID);\n      cache.get('#wpstg-finished-result').show();\n      cache.get('#wpstg-cancel-cloning').hide();\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-cancel-cloning-update').prop('disabled', true);\n\n      const $link1 = cache.get('#wpstg-clone-url-1');\n      const $link = cache.get('#wpstg-clone-url');\n      $link1.attr('href', response.url);\n      $link1.html(response.url);\n      $link.attr('href', response.url);\n\n      cache.get('#wpstg-remove-clone').data('clone', that.data.cloneID);\n\n      // Finished\n      that.isFinished = true;\n      that.timer('stop');\n\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n\n      // show alert\n      let msg = wpstg.i18n.cloneResetComplete;\n      if (that.data.action === 'wpstg_update') {\n        msg = wpstg.i18n.cloneUpdateComplete;\n        cache.get('#wpstg-update-cloning-site-button').show();\n      }\n\n      if (that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n        cache.get('#wpstg-cancel-cloning-update').hide();\n        cache.get('.wpstg-prev-step-link').show();\n\n        WPStagingCommon.getSwalModal(true, {\n          confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n        }).fire({\n          title: '',\n          icon: 'success',\n          html: msg,\n          width: '500px',\n          focusConfirm: true,\n        });\n      }\n\n      return false;\n    }\n\n    /**\n     * Add percentage progress bar\n     * @param object response\n     * @return {Boolean}\n     */\n    var progressBar = function(response, restart) {\n      if ('undefined' === typeof (response.percentage)) {\n        return false;\n      }\n\n      if (response.job === 'database') {\n        cache.get('#wpstg-progress-db').width(response.percentage * 0.2 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Cloning Database Tables...');\n      }\n\n      if (response.job === 'SearchReplace') {\n        cache.get('#wpstg-progress-db').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-db').html('1. Database');\n        // Assumption: All previous steps are done.\n        // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n        cache.get('#wpstg-progress-db').width('20%');\n\n        cache.get('#wpstg-progress-sr').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 2 of 4 Preparing Database Data...');\n      }\n\n      if (response.job === 'directories') {\n        cache.get('#wpstg-progress-sr').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-sr').html('2. Data');\n        cache.get('#wpstg-progress-sr').width('10%');\n\n        cache.get('#wpstg-progress-dirs').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 3 of 4 Getting files...');\n      }\n      if (response.job === 'files') {\n        cache.get('#wpstg-progress-dirs').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-dirs').html('3. Files');\n        cache.get('#wpstg-progress-dirs').width('10%');\n\n        cache.get('#wpstg-progress-files').width(response.percentage * 0.6 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Copy files...');\n      }\n      if (response.job === 'finish') {\n        cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-files').html('4. Copy Files');\n        cache.get('#wpstg-progress-files').width('60%');\n\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Cloning Process Finished');\n      }\n    };\n  });\n\n  that.switchStep = function(step) {\n    cache.get('.wpstg-current-step')\n        .removeClass('wpstg-current-step');\n    cache.get('.wpstg-step' + step)\n        .addClass('wpstg-current-step');\n  };\n\n  that.checkUserDbPermissions = function checkUserDbPermissions(operationType) {\n    return new Promise(function(resolve) {\n      WPStaging.ajax({\n        action: 'wpstg_check_user_permissions',\n        accessToken: wpstg.accessToken,\n        nonce: wpstg.nonce,\n        type: operationType,\n      }, function(response) {\n        if (response.success) {\n          resolve(true);\n        } else {\n          WPStagingCommon.getSwalModal(true, {\n            container: 'wpstg-swal-push-container',\n          }).fire({\n            title: '',\n            icon: 'warning',\n            html: response.data.message,\n            width: '750px',\n            focusConfirm: false,\n            confirmButtonText: 'Proceed',\n            showCancelButton: true,\n          }).then(function(result) {\n            if (result.isConfirmed) {\n              resolve(true);\n            }\n          });\n\n          $('#wpstg-db-permission-show-full-message').click(function() {\n            $('#wpstg-permission-info-output').html($('#wpstg-permission-info-data').html());\n          });\n        }\n      }, 'json', false);\n    });\n  };\n\n  /**\n   * Initiation\n   * @type {Function}\n   */\n  that.init = (function() {\n    loadOverview();\n    elements();\n    stepButtons();\n    tabs();\n    WPStagingCommon.listenTooltip();\n    new WpstgMainMenu();\n    new WpstgCloneStaging();\n    new WpstgCloningAdvanceSettings();\n    that.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n  });\n\n  /**\n   * Ajax call\n   * @type {ajax}\n   */\n  that.ajax = ajax;\n  that.showError = showError;\n  that.getLogs = getLogs;\n  that.loadOverview = loadOverview;\n\n  return that;\n})(jQuery);\n\njQuery(document).ready(function() {\n  WPStaging.init();\n  // This is necessary to make WPStaging var accessibile in WP Staging PRO js script\n  window.WPStaging = WPStaging;\n});\n\n/**\n * Report Issue modal\n */\njQuery(document).ready(function($) {\n  $('body').on('click', '#wpstg-report-issue-button', function(e) {\n    console.log('REPORT ISSUE.');\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-backups-report-issue-button', function(e) {\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-report-cancel', function(e) {\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-report-submit', function(e) {\n    const self = $(this);\n    sendIssueReport(self, 'false');\n    e.preventDefault();\n  });\n\n  /*\n   * Close Success Modal\n   */\n  $('body').on('click', '#wpstg-success-button', function(e) {\n    e.preventDefault();\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n  });\n\n  function sendIssueReport(button, forceSend = 'false') {\n    const spinner = button.next();\n    const email = $('.wpstg--tab--active .wpstg-report-email').val();\n    const hosting_provider = $('.wpstg--tab--active .wpstg-report-hosting-provider').val();\n    const message = $('.wpstg--tab--active .wpstg-report-description').val();\n    const syslog = $('.wpstg--tab--active .wpstg-report-syslog').is(':checked');\n    const terms = $('.wpstg--tab--active .wpstg-report-terms').is(':checked');\n\n    console.log(hosting_provider);\n\n    button.attr('disabled', true);\n    spinner.css('visibility', 'visible');\n\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      async: true,\n      data: {\n        'action': 'wpstg_send_report',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'wpstg_email': email,\n        'wpstg_provider': hosting_provider,\n        'wpstg_message': message,\n        'wpstg_syslog': +syslog,\n        'wpstg_terms': +terms,\n        'wpstg_force_send': forceSend,\n      },\n    }).done(function(data) {\n      button.attr('disabled', false);\n      spinner.css('visibility', 'hidden');\n\n      if (data.errors.length > 0) {\n        $('.wpstg-report-issue-form .wpstg-message').remove();\n\n        let errorMessage = $('<div />').addClass('wpstg-message wpstg-error-message');\n        $.each(data.errors, function(key, value) {\n          if (value.status === 'already_submitted') {\n            errorMessage = '';\n            // TODO: remove default custom classes\n            WPStagingCommon.getSwalModal(true, {\n              container: 'wpstg-issue-resubmit-confirmation',\n            }).fire({\n              title: '',\n              icon: 'warning',\n              html: value.message,\n              showCancelButton: true,\n              focusConfirm: false,\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n            }).then((result) => {\n              if (result.isConfirmed) {\n                sendIssueReport(button, 'true');\n              }\n            });\n          } else {\n            errorMessage.append('<p>' + value + '</p>');\n          }\n        });\n\n        $('.wpstg-report-issue-form').prepend(errorMessage);\n      } else {\n        const successMessage = $('<div />').addClass('wpstg-message wpstg-success-message');\n        successMessage.append('<p>Thanks for submitting your request! You should receive an auto reply mail with your ticket ID immediately for confirmation!<br><br>If you do not get that mail please contact us directly at <strong>support@wp-staging.com</strong></p>');\n\n        $('.wpstg--tab--active .wpstg-report-issue-form').html(successMessage);\n        $('.wpstg--tab--active .wpstg-success-message').append('<div style=\"float:right;margin-top:10px;\"><a id=\"wpstg-success-button\" href=\"#\" class=\"wpstg--red\">[X] CLOSE</a></div>');\n\n        // Hide message\n        setTimeout(function() {\n          $('.wpstg--tab--active .wpstg-report-issue-form').removeClass('wpstg-report-active');\n        }, 2000);\n      }\n    });\n  }\n\n  // Open/close actions drop down menu\n  $(document).on('click', '.wpstg-dropdown>.wpstg-dropdown-toggler', function(e) {\n    e.preventDefault();\n    $(e.target).next('.wpstg-dropdown-menu').toggleClass('shown');\n\n    $(e.target).find('.wpstg-caret').toggleClass('wpstg-caret-up');\n  });\n\n  $(document).on('click', '.wpstg-caret', function(e) {\n    e.preventDefault();\n\n    const toggler = $(e.target).closest('.wpstg-dropdown-toggler');\n\n    if (toggler) {\n      toggler.trigger('click');\n    }\n  });\n\n  // Close action drop down menu if clicked anywhere outside\n  document.addEventListener('click', function(event) {\n    const isClickInside = event.target.closest('.wpstg-dropdown-toggler');\n    if (!isClickInside) {\n      const dropDown = document.getElementsByClassName('wpstg-dropdown-menu');\n      for (let i = 0; i < dropDown.length; i++) {\n        dropDown[i].classList.remove('shown');\n      }\n      $('.wpstg-caret').removeClass('wpstg-caret-up');\n    }\n  });\n\n  // \"Event info\" for backup errors\n  window.addEventListener('finishedProcessWithError', function(customEvent) {\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'wpstg_job_error',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'error_message': customEvent.detail.error,\n        'job_id': WPStagingCommon.getJobId(),\n      },\n    });\n  });\n});\n"],"names":["polyfillClosest","Element","prototype","closest","matches","msMatchesSelector","webkitMatchesSelector","s","el","call","parentElement","parentNode","nodeType","element","selector","parent","onOver","onOut","x","y","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","delay","e","clearTimeout","undefined","tracker","clientX","clientY","compare","Math","abs","setTimeout","opt","focusOptionChanged","Object","assign","addFocus","removeFocus","dispatchOver","removeEventListener","addEventListener","onMouseOver","event","target","dispatchOut","onMouseOut","dispatchFocus","onFocus","dispatchBlur","onBlur","remove","$","WPStagingCommon","continueErrorHandle","retry","currentDelay","count","max","retryOnErrors","performingRequest","incrementRetry","incrementRatio","canRetry","reset","memoryExhaustArticleLink","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","listenTooltip","wpstgHoverIntent","document","querySelector","style","visibility","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","icon","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","response","Error","hasOwnProperty","success","data","Array","length","shift","isLoading","hide","show","slugify","url","toString","toLowerCase","normalize","replace","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","error","message","handleFetchErrors","ok","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","type","xhr","textStatus","errorThrown","console","log","errorCode","statusCode","jQuery","qs","all","querySelectorAll","addEvent","evt","handler","slideDown","duration","display","overflow","height","offsetHeight","transitionProperty","transitionDuration","removeProperty","slideUp","getNextSibling","sibling","nextElementSibling","getParents","result","push","handleDisplayDependencies","id","containerSelector","hiddenClass","elementType","getAttribute","container","showIfChecked","showIfUnchecked","checked","classList","add","handleToggleElement","toggle","handleCopyPaste","navigator","clipboard","writeText","value","handleCopyToClipboard","WpstgCloneStaging","pageWrapperId","wpstgObject","wpstg","pageWrapper","dom","enableButtonId","enableAction","notyf","Notyf","position","dismissible","types","background","init","addEvents","sendRequest","action","fetch","ajaxUrl","method","credentials","body","URLSearchParams","accessToken","nonce","headers","then","json","Promise","reject","location","reload","i18n","warn","onload","getElementById","history","pushState","pathname","adminMenu","adminMenuElements","i","WpstgDirectoryNavigation","directoryListingSelector","workflowSelector","directoryListingContainer","workflow","dirCheckboxSelector","dirExpandSelector","unselectAllDirsSelector","selectDefaultDirsSelector","fetchChildrenAction","currentCheckboxElement","currentParentDiv","currentLoader","existingExcludes","excludedDirectories","isDefaultSelected","preventDefault","toggleDirExpand","unselectAll","selectDefault","toggleDirectoryNavigation","updateDirectorySelection","parseExcludes","previousSibling","changed","dirPath","isChecked","forceDefault","setAttribute","dirContainer","createElement","innerHTML","JSON","parse","directoryListing","appendChild","alert","getExcludedDirectories","forEach","isParentExcluded","exclude","isScanned","join","settings","directorySeparator","path","isParentAlreadyExcluded","dir","startsWith","getExtraDirectoriesRootOnly","extraDirectories","extraDirectoriesTextArea","extraCustomDirectories","split","concat","countSelectedFiles","map","substr","slice","scanned","cbElement","subDirectories","parElem","children","textContent","themesCount","pluginsCount","filesCountElement","WpstgTableSelection","databaseTableSectionSelector","networkCloneSelector","inputSelector","databaseTableSection","networkCloneCheckbox","isAllTablesChecked","isMultisite","isNetworkClone","input","setNetworkClone","selectDefaultTables","countSelectedTables","toggleTableSelection","unselectWPSTGTables","getRegexPattern","pattern","tblprefix","isNetwork","regexPattern","option","name","match","selected","getSelectedTablesWithoutPrefix","selectedTablesWithoutPrefix","getIncludedTables","includedTables","getExcludedTables","excludedTables","tablesCount","tablesCountElement","WpstgExcludeFilters","excludeFilterContainerSelector","excludeContainer","excludeTableBody","addFileSizeExclude","addFileExtExclude","addFileNameExclude","addDirNameExclude","clearExcludes","removeExclude","addExcludeRuleRow","templateName","excludeRowTemplate","clone","content","cloneNode","excludeRow","removeChild","trim","getExcludeFilters","globExcludes","sizeExcludes","sizeCompares","sizeSizes","sizeByte","entries","key","sizeInput","extensionInputs","ext","cleanStringForGlob","fileNamesPos","fileNames","fileInput","fileName","dirNamesPos","dirNames","dirInput","dirName","filter","onlyUnique","index","self","indexOf","WpstgModal","confirmAction","swalOptions","additionalParams","triggerConfirmAction","WpstgResetModal","cloneID","fetchExcludeSettingsAction","modalErrorAction","resetButtonClass","resetModalContainerClass","resetTabSelector","directoryNavigator","excludeFilters","tableSelector","resetModalContainer","toggleContent","contentId","tabTriangle","isCollapsed","contains","transform","showModal","swalPromise","loadModal","fetchCloneExcludes","getAjaxLoader","width","focusConfirm","confirmButtonText","resetClone","job","errorModal","modal","renderError","getDirectoryNavigator","getTableSelector","wpstgIcon","WpstgCloningAdvanceSettings","baseContainerSelector","baseContainer","checkBoxSettingTogglerSelector","toggleSettings","WpstgMainMenu","activeTabClass","mainMenu","tabHeader","$this","targetElements","menuItems","contents","menuItem","targetElement","dispatchEvent","Event","that","isCancelled","isFinished","getLogs","time","executionTime","progressBar","cloneExcludeFilters","areAllTablesChecked","ajaxSpinner","returnValue","$workFlow","urlSpinner","devicePixelRatio","on","prop","clearInterval","removeAttr","cloneDirectoryName","directoryName","addClass","slug","substring","$targetDir","$targetUri","uri","attr","val","validateTargetHost","after","cloneActions","the_domain","reg","test","confirm","append","cancelCloning","startCloning","cancelCloningUpdate","restart","$existingClones","animate","scrollTop","offset","top","deleteClone","jsonResponse","tryParseJson","checkDiskSpace","switchStep","open","cloneHostname","resetModal","promise","dirNavigator","exclFilters","allTablesExcluded","excludeSizeRules","encodeURIComponent","sizes","excludeGlobRules","globs","errorMsgFooter","stepButtons","focus","onlyUpdateMessage","is","verifyExternalDatabase","proceedCloning","loadOverview","each","databaseUser","databasePassword","databaseServer","databaseDatabase","databaseSsl","error_type","render","checks","production","staging","getCloningData","getTime","cloneName","rules","databasePrefix","cloneDir","cronDisabled","emailsAllowed","networkClone","uploadsSymlinked","cleanPluginsThemes","cleanUploadsDir","sendCloningAjax","object","excludeOptions","tabs","$section","toggleClass","slideToggle","find","hasClass","deleteDir","logscroll","$div","scrollHeight","constructor","date","requiredSpace","errorMessage","convertSeconds","setInterval","seconds","setSeconds","toISOString","start","processing","delayReq","last_msg","job_done","finish","$link1","$link","msg","cloneResetComplete","cloneUpdateComplete","percentage","toFixed","step","checkUserDbPermissions","operationType","resolve","isConfirmed","click","ready","sendIssueReport","button","forceSend","spinner","next","email","hosting_provider","syslog","terms","async","done","errors","prepend","successMessage","toggler","trigger","isClickInside","dropDown","getElementsByClassName","customEvent","detail"],"mappings":"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"}