{"version":3,"file":"wpstg-admin.js","sources":["../src/modules/wpstg-dom-utils.js","../src/modules/wpstg-clone-staging.js","../src/modules/wpstg-directory-navigation.js","../src/modules/wpstg-exclude-filters.js","../src/modules/wpstg-modal.js","../src/modules/wpstg-reset-modal.js","../src/wpstg-admin.js"],"sourcesContent":["/**\n * WP Staging basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Enable/Disable cloning for staging site\n */\nexport default class WpstgCloneStaging {\n  constructor(\n      pageWrapperId = '#wpstg-clonepage-wrapper',\n      wpstgObject = wpstg,\n  ) {\n    this.pageWrapper = dom.qs(pageWrapperId);\n    this.wpstgObject = wpstgObject;\n    this.enableButtonId = '#wpstg-enable-staging-cloning';\n    this.enableAction = 'wpstg_enable_staging_cloning';\n\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    if (this.pageWrapper === null) {\n      return;\n    }\n\n    dom.addEvent(this.pageWrapper, 'click', this.enableButtonId, () => {\n      this.sendRequest(this.enableAction);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  sendRequest(action) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        location.reload();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Fetch directory direct child directories\n */\nexport default class WpstgDirectoryNavigation {\n  constructor(\n      directoryListingSelector = '#wpstg-directories-listing',\n      wpstgObject = wpstg,\n      notyf = null,\n  ) {\n    this.directoryListingContainer = dom.qs(directoryListingSelector);\n    this.wpstgObject = wpstgObject;\n    this.dirCheckboxSelector = '.wpstg-check-dir';\n    this.dirExpandSelector = '.wpstg-expand-dirs';\n    this.unselectAllDirsSelector = '.wpstg-unselect-dirs';\n    this.selectDefaultDirsSelector = '.wpstg-select-dirs-default';\n    this.fetchChildrenAction = 'wpstg_fetch_dir_childrens';\n    this.currentCheckboxElement = null;\n    this.currentParentDiv = null;\n    this.currentLoader = null;\n    this.existingExcludes = [];\n    this.excludedDirectories = [];\n    this.isDefaultSelected = false;\n    this.notyf = notyf;\n\n    this.init();\n  }\n\n  addEvents() {\n    if (this.directoryListingContainer === null) {\n      console.log('Error: directory navigation add events');\n      return;\n    }\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.dirExpandSelector, (element, event) => {\n      event.preventDefault();\n      if (this.toggleDirExpand(element)) {\n        this.sendRequest(this.fetchChildrenAction, element);\n      }\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.unselectAllDirsSelector, () => {\n      this.unselectAll();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.selectDefaultDirsSelector, () => {\n      this.selectDefault();\n    });\n  }\n\n  init() {\n    this.addEvents();\n    this.parseExcludes();\n  }\n\n  /**\n   * Toggle Dir Expand,\n   * Return true if children aren't fetched\n   * @param {HTMLElement} element\n   * @return {boolean}\n   */\n  toggleDirExpand(element) {\n    this.currentParentDiv = element.parentElement;\n    this.currentCheckboxElement = element.previousSibling;\n    this.currentLoader = this.currentParentDiv.querySelector('.wpstg-is-dir-loading');\n    if (this.currentCheckboxElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return false;\n    }\n\n    if (this.currentCheckboxElement.getAttribute('data-scanned', 'false') === 'false') {\n      return true;\n    }\n\n    return false;\n  }\n\n  sendRequest(action) {\n    if (this.currentLoader !== null) {\n      this.currentLoader.style.display = 'inline-block';\n    }\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        dirPath: this.currentCheckboxElement.value,\n        isChecked: this.currentCheckboxElement.checked,\n        forceDefault: this.isDefaultSelected,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.currentCheckboxElement.setAttribute('data-scanned', true);\n        const dirContainer = document.createElement('div');\n        dirContainer.classList.add('wpstg-dir');\n        dirContainer.classList.add('wpstg-subdir');\n        dirContainer.innerHTML = JSON.parse(data.directoryListing);\n        this.currentParentDiv.appendChild(dirContainer);\n        if (this.currentLoader !== null) {\n          this.currentLoader.style.display = 'none';\n        }\n\n        dom.slideDown(dirContainer);\n\n        return;\n      }\n\n      if (this.notyf !== null) {\n        this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n      } else {\n        alert('Error: ' + this.wpstgObject.i18n['somethingWentWrong']);\n      }\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getExcludedDirectories() {\n    this.excludedDirectories = [];\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input:not(:checked)').forEach((element) => {\n      if (!this.isParentExcluded(element.value)) {\n        this.excludedDirectories.push(element.value);\n      }\n    });\n\n    this.existingExcludes.forEach((exclude) => {\n      if (!this.isParentExcluded(exclude) && !this.isExcludeScanned(exclude)) {\n        this.excludedDirectories.push(exclude);\n      }\n    });\n\n    return this.excludedDirectories.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  /**\n   * @param {string} path\n   * @return {bool}\n   */\n  isParentExcluded(path) {\n    let isParentAlreadyExcluded = false;\n    this.excludedDirectories.forEach((dir) => {\n      if (path.startsWith(dir + '/')) {\n        isParentAlreadyExcluded = true;\n      }\n    });\n\n    return isParentAlreadyExcluded;\n  }\n\n  getExtraDirectoriesRootOnly() {\n    this.getExcludedDirectories();\n    const extraDirectories = [];\n    this.directoryListingContainer.querySelectorAll(':not(.wpstg-subdir)>.wpstg-dir>input.wpstg-wp-non-core-dir:checked').forEach((element) => {\n      extraDirectories.push(element.value);\n    });\n\n    // Check if extra directories text area exists\n    // TODO: remove extraCustomDirectories code if no one require extraCustomDirectories...\n    const extraDirectoriesTextArea = dom.qs('#wpstg_extraDirectories');\n    if (extraDirectoriesTextArea === null || extraDirectoriesTextArea.value === '') {\n      return extraDirectories.join(this.wpstgObject.settings.directorySeparator);\n    }\n\n    const extraCustomDirectories = extraDirectoriesTextArea.value.split(/\\r?\\n/);\n\n    return extraDirectories.concat(extraCustomDirectories).join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  unselectAll() {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      element.checked = false;\n    });\n  }\n\n  selectDefault() {\n    // unselect all checkboxes\n    this.unselectAll();\n\n    // only select those checkboxes whose class is wpstg-wp-core-dir\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input.wpstg-wp-core-dir').forEach((element) => {\n      element.checked = true;\n    });\n\n    // then unselect those checkboxes whose parent has wpstg extra checkbox\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir > .wpstg-wp-non-core-dir').forEach((element) => {\n      element.parentElement.querySelectorAll('input.wpstg-wp-core-dir').forEach((element) => {\n        element.checked = false;\n      });\n    });\n\n    this.isDefaultSelected = true;\n  }\n\n  parseExcludes() {\n    this.existingExcludes = this.directoryListingContainer.getAttribute('data-existing-excludes', []);\n    if (this.existingExcludes === '') {\n      this.existingExcludes = [];\n    }\n\n    if (this.existingExcludes.length !== 0) {\n      this.existingExcludes = this.existingExcludes.split(',');\n    }\n  }\n\n  isExcludeScanned(exclude) {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      if (element.value === exclude) {\n        return true;\n      }\n    });\n\n    return false;\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Rich Exclude Filter Module\n */\nexport default class WpstgExcludeFilters {\n  constructor(\n      excludeFilterContainerSelector = '#wpstg-exclude-filters-container',\n      wpstgObject = wpstg,\n  ) {\n    this.excludeContainer = dom.qs(excludeFilterContainerSelector);\n    this.excludeTableBody = dom.qs(`${excludeFilterContainerSelector} tbody`);\n    this.wpstgObject = wpstgObject;\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-size-rule', () => {\n      this.addFileSizeExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-ext-rule', () => {\n      this.addFileExtExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-name-rule', () => {\n      this.addFileNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-dir-name-rule', () => {\n      this.addDirNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-clear-all-rules', () => {\n      this.clearExcludes();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-remove-exclude-rule', (target) => {\n      this.removeExclude(target);\n    });\n  }\n\n  init() {\n    if (this.excludeContainer === null) {\n      console.log('Error: Given table selector not found!');\n      return;\n    }\n\n    this.addEvents();\n  }\n\n  addFileSizeExclude() {\n    this.addExcludeRuleRow('#wpstg-file-size-exclude-filter-template');\n  }\n\n  addFileExtExclude() {\n    this.addExcludeRuleRow('#wpstg-file-ext-exclude-filter-template');\n  }\n\n  addFileNameExclude() {\n    this.addExcludeRuleRow('#wpstg-file-name-exclude-filter-template');\n  }\n\n  addDirNameExclude() {\n    this.addExcludeRuleRow('#wpstg-dir-name-exclude-filter-template');\n  }\n\n  addExcludeRuleRow(templateName) {\n    const excludeRowTemplate = dom.qs(templateName);\n    if (excludeRowTemplate !== null) {\n      const clone = excludeRowTemplate.content.cloneNode(true);\n      const excludeRow = clone.querySelector('tr');\n\n      this.excludeTableBody.appendChild(excludeRow);\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'inherit';\n      });\n    }\n  }\n\n  clearExcludes() {\n    this.excludeTableBody.innerHTML = '';\n    dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n      e.style.display = 'none';\n    });\n  }\n\n  removeExclude(target) {\n    if (target.parentElement !== null && target.parentElement.parentElement !== null) {\n      this.excludeTableBody.removeChild(target.parentElement.parentElement);\n    }\n\n    if (this.excludeTableBody.innerHTML.trim() === '') {\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'none';\n      });\n    }\n  }\n\n  /**\n   * Converts all the exclude filters arrays into one single string to keep size of post request small\n   * @return {string}\n   */\n  getExcludeFilters() {\n    const globExcludes = [];\n    const sizeExcludes = [];\n\n    const sizeCompares = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleCompare[]\"]');\n    const sizeSizes = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileSizeExcludeRuleSize[]\"]');\n    const sizeByte = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleByte[]\"]');\n    for (const [key, sizeInput] of Object.entries(sizeSizes)) {\n      if (sizeInput.value !== '') {\n        sizeExcludes.push(sizeCompares[key].value + ' ' + sizeInput.value + sizeByte[key].value);\n      }\n    }\n\n    const extensionInputs = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileExtExcludeRule[]\"]');\n    extensionInputs.forEach((x) => {\n      const ext = this.cleanStringForGlob(x.value);\n      if (ext !== '') {\n        globExcludes.push('ext:' + ext.trim());\n      }\n    });\n\n    const fileNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileNameExcludeRulePos[]\"]');\n    const fileNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileNameExcludeRulePath[]\"]');\n    for (const [key, fileInput] of Object.entries(fileNames)) {\n      const fileName = this.cleanStringForGlob(fileInput.value);\n      if (fileName !== '') {\n        globExcludes.push('file:' + fileNamesPos[key].value + ' ' + fileName.trim());\n      }\n    }\n\n    const dirNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgDirNameExcludeRulePos[]\"]');\n    const dirNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgDirNameExcludeRulePath[]\"]');\n    for (const [key, dirInput] of Object.entries(dirNames)) {\n      const dirName = this.cleanStringForGlob(dirInput.value);\n      if (dirName !== '') {\n        globExcludes.push('dir:' + dirNamesPos[key].value + ' ' + dirName.trim());\n      }\n    }\n\n    return {\n      'sizes': sizeExcludes.filter(this.onlyUnique).join(','),\n      // return set of unique rules\n      'globs': globExcludes.filter(this.onlyUnique).join(','),\n    };\n  }\n\n  onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n\n  /**\n   * Remove most of the comment glob characters from the string\n   * @param {String} value\n   * @return {String}\n   */\n  cleanStringForGlob(value) {\n    // will replace character like * ^ / \\ ! ? [ from the string\n    return value.replace(/[*^//!\\.[?]/g, '');\n  }\n}\n","/**\n * Basic WP Staging Modal implemented with help of Sweetalerts\n */\nexport default class WpstgModal {\n  constructor(\n      confirmAction,\n      wpstgObject = wpstg,\n  ) {\n    this.confirmAction = confirmAction;\n    this.wpstgObject = wpstgObject;\n  }\n\n  show(swalOptions, additionalParams = {}, callback = null) {\n    Swal.fire(swalOptions).then((result) => {\n      if (result.value && this.error !== null) {\n        this.triggerConfirmAction(additionalParams, callback);\n      }\n    });\n  }\n\n  triggerConfirmAction(additionalParams = {}, callback = null) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams(Object.assign({\n        action: this.confirmAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }, additionalParams)),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((response) => {\n      if (callback !== null) {\n        callback(response);\n      }\n    }).catch((error) => {\n      console.log(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","\nimport * as dom from './wpstg-dom-utils.js';\nimport WpstgDirectoryNavigation from './wpstg-directory-navigation.js';\nimport WpstgExcludeFilters from './wpstg-exclude-filters.js';\nimport WpstgModal from './wpstg-modal.js';\n\n/**\n * Manage RESET MODAL\n */\nexport default class WpstgResetModal {\n  constructor(\n      cloneID,\n      workflowSelector = '#wpstg-workflow',\n      fetchExcludeSettingsAction = 'wpstg_clone_excludes_settings',\n      modalErrorAction = 'wpstg_modal_error',\n      wpstgObject = wpstg,\n  ) {\n    this.cloneID = cloneID;\n    this.workflow = dom.qs(workflowSelector);\n    this.wpstgObject = wpstgObject;\n    this.fetchExcludeSettingsAction = fetchExcludeSettingsAction;\n    this.modalErrorAction = modalErrorAction;\n    this.resetButtonClass = 'wpstg-confirm-reset-clone';\n    this.resetModalContainerClass = 'wpstg-reset-confirmation';\n    this.resetTabSelector = '.wpstg-reset-exclude-tab';\n    this.directoryNavigator = null;\n    this.excludeFilters = null;\n    this.isAllTablesChecked = true;\n  }\n\n  addEvents() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (resetModalContainer === null) {\n      console.log('Exit');\n      return;\n    }\n\n    dom.addEvent(resetModalContainer, 'click', this.resetTabSelector, (target) => {\n      this.toggleContent(target);\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-button-select', () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-button-unselect', () => {\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-expand-dirs', (target, event) => {\n      event.preventDefault();\n      this.toggleDirectoryNavigation(target);\n    });\n\n    dom.addEvent(resetModalContainer, 'change', 'input.wpstg-check-dir', (target) => {\n      this.updateDirectorySelection(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  toggleContent(target) {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const contentId = target.getAttribute('data-id');\n    const tabTriangle = target.querySelector('.wpstg-tab-triangle');\n    const isCollapsed = target.getAttribute('data-collapsed', 'true');\n    const content = dom.qs(contentId);\n    if (isCollapsed === 'true') {\n      if (resetModalContainer.classList.contains('has-collapsible-open')) {\n        resetModalContainer.classList.add('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.add('has-collapsible-open');\n      }\n\n      dom.slideDown(content);\n      tabTriangle.style.transform = 'rotate(90deg)';\n      target.setAttribute('data-collapsed', 'false');\n    } else {\n      if (resetModalContainer.classList.contains('has-collapsible-open-2')) {\n        resetModalContainer.classList.remove('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.remove('has-collapsible-open');\n      }\n\n      dom.slideUp(content);\n      tabTriangle.style.removeProperty('transform');\n      target.setAttribute('data-collapsed', 'true');\n    }\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    this.init();\n    this.fetchCloneExcludes();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return Swal.fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '300px',\n      focusConfirm: false,\n      customClass: {\n        confirmButton: this.resetButtonClass,\n        container: 'wpstg-swal2-container wpstg-swal2-loading ' + this.resetModalContainerClass,\n      },\n      confirmButtonText: this.wpstgObject.i18n.resetClone,\n      showCancelButton: true,\n    });\n  }\n\n  fetchCloneExcludes() {\n    this.error = null;\n    // send ajax request and fetch preserved exclude settings\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.fetchExcludeSettingsAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        job: 'resetting',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if (!data.success) {\n        const errorModal = new WpstgModal(this.modalErrorAction, this.wpstgObject);\n        errorModal.show(Object.assign({\n          title: 'Error',\n          icon: 'error',\n          html: this.wpstgObject.i18n['somethingWentWrong'],\n          width: '500px',\n          confirmButtonText: 'Ok',\n          showCancelButton: false,\n        }, data.swalOptions), {\n          type: data.type,\n        });\n\n        return;\n      }\n\n      const modal = dom.qs('.wpstg-reset-confirmation');\n      modal.classList.remove('wpstg-swal2-loading');\n      modal.querySelector('.swal2-popup').style.width = 'auto';\n      modal.querySelector('.swal2-content').innerHTML = data.html;\n      this.directoryNavigator = new WpstgDirectoryNavigation();\n      this.excludeFilters = new WpstgExcludeFilters();\n    }).catch((error) => {\n      this.renderError({\n        'html': this.wpstgObject.i18n['somethingWentWrong'] + ' ' + error,\n      });\n    });\n  }\n\n  getDirectoryNavigator() {\n    return this.directoryNavigator;\n  }\n\n  getExcludeFilters() {\n    return this.excludeFilters;\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n\n  toggleDirectoryNavigation(element) {\n    const cbElement = element.previousSibling;\n    if (cbElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return;\n    }\n\n    if (cbElement.getAttribute('data-scanned', 'false') === 'false') {\n      return;\n    }\n\n    const subDirectories = dom.getNextSibling(element, '.wpstg-subdir');\n\n    if (subDirectories.style.display === 'none') {\n      dom.slideDown(subDirectories);\n    } else {\n      dom.slideUp(subDirectories);\n    }\n  }\n\n  updateDirectorySelection(element) {\n    const parent = element.parentElement;\n    if (element.checked) {\n      dom.getParents(parent, '.wpstg-dir').forEach((parElem) => {\n        for (let i = 0; i < parElem.children.length; i++) {\n          if (parElem.children[i].matches('.wpstg-check-dir')) {\n            parElem.children[i].checked = true;\n          }\n        }\n      });\n      parent.querySelectorAll('.wpstg-expand-dirs').forEach((x) => {\n        x.classList.remove('disabled');\n      });\n      parent.querySelectorAll('.wpstg-subdir .wpstg-check-dir').forEach((x) => {\n        x.checked = true;\n      });\n    } else {\n      parent.querySelectorAll('.wpstg-expand-dirs, .wpstg-check-subdirs').forEach((x) => {\n        x.classList.add('disabled');\n      });\n      parent.querySelectorAll('.wpstg-dir .wpstg-check-dir').forEach((x) => {\n        x.checked = false;\n      });\n    }\n  }\n\n  selectDefaultTables() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const options = resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const multisitePattern = '^' + this.wpstgObject.tblprefix + '([^0-9])_*';\n    const singleSitePattern = '^' + this.wpstgObject.tblprefix;\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (this.wpstgObject.isMultisite === '1' && name.match(multisitePattern)) {\n        option.setAttribute('selected', 'selected');\n      } else if (this.wpstgObject.isMultisite === '' && name.match(singleSitePattern)) {\n        option.setAttribute('selected', 'selected');\n      } else {\n        option.removeAttribute('selected');\n      }\n    });\n  }\n\n  toggleTableSelection() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (false === this.isAllTablesChecked) {\n      resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.setAttribute('selected', 'selected');\n      });\n      resetModalContainer.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n      this.isAllTablesChecked = true;\n    } else {\n      resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.removeAttribute('selected');\n      });\n      resetModalContainer.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n      this.isAllTablesChecked = false;\n    }\n  }\n}\n","import WpstgCloneStaging from './modules/wpstg-clone-staging.js';\nimport WpstgDirectoryNavigation from './modules/wpstg-directory-navigation.js';\nimport WpstgExcludeFilters from './modules/wpstg-exclude-filters.js';\nimport WpstgResetModal from './modules/wpstg-reset-modal.js';\nimport WpstgModal from './modules/wpstg-modal.js';\n\nvar WPStaging = (function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    time: 1,\n    executionTime: false,\n    progressBar: 0,\n    cloneExcludeFilters: null,\n    directoryNavigator: null,\n    notyf: new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    }),\n  };\n  const cache = {elements: []};\n  let timeout; let ajaxSpinner;\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n  /**\n     * Show and Log Error Message\n     * @param {String} message\n     */\n  const showError = function(message) {\n    cache.get('#wpstg-try-again').css('display', 'inline-block');\n    cache.get('#wpstg-cancel-cloning').text('Reset');\n    cache.get('#wpstg-resume-cloning').show();\n    cache.get('#wpstg-error-wrapper').show();\n    cache.get('#wpstg-error-details').show().html(message);\n    cache.get('#wpstg-removing-clone').removeClass('loading');\n    cache.get('.wpstg-loader').hide();\n    $('.wpstg--modal--process--generic-problem').show().html(message);\n  };\n\n  /**\n   * Show warning during cloning or push process when closing tab or browser, or changing page\n   * @param {beforeunload} event\n   * @return {null}\n   */\n  that.warnIfClosingDuringProcess = function(event) {\n    // Only some browsers show the message below, most say something like \"Changes you made may not be saved\" (Chrome) or \"You have unsaved changes. Exit?\"\n    event.returnValue = 'You MUST leave this window open while cloning/pushing. Please wait...';\n    return null;\n  };\n\n  /**\n     *\n     * @param obj\n     * @return {boolean}\n     */\n  function isEmpty(obj) {\n    for (const prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n     *\n     * @param response the error object\n     * @param prependMessage Overwrite default error message at beginning\n     * @param appendMessage Overwrite default error message at end\n     * @returns void\n     */\n\n  const showAjaxFatalError = function(response, prependMessage, appendMessage) {\n    prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n    appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n    if (response === false) {\n      showError(prependMessage + ' Error: No response.' + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n\n    if (typeof response.error !== 'undefined' && response.error) {\n      console.error(response.message);\n      showError(prependMessage + ' Error: ' + response.message + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n  };\n\n  /**\n     *\n     * @param response\n     * @return {{ok}|*}\n     */\n  const handleFetchErrors = function(response) {\n    if (!response.ok) {\n      showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n    }\n    return response;\n  };\n\n  /** Hide and reset previous thrown visible errors */\n  const resetErrors = function() {\n    cache.get('#wpstg-error-details').hide().html('');\n  };\n\n  const slugify = function(url) {\n    return url.toString()\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .replace(/\\s+/g, '-')\n        .replace(/&/g, '-and-')\n        .replace(/[^a-z0-9\\-]/g, '')\n        .replace(/-+/g, '-')\n        .replace(/^-*/, '')\n        .replace(/-*$/, '')\n    ;\n  };\n\n\n  /**\n     * Common Elements\n     */\n  const elements = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    let isAllChecked = true;\n    let urlSpinner = ajaxurl.replace('/admin-ajax.php', '') + '/images/spinner';\n    let timer;\n\n    if (2 < window.devicePixelRatio) {\n      urlSpinner += '-2x';\n    }\n\n    urlSpinner += '.gif';\n\n    ajaxSpinner = '<img src=\\'\\'' + urlSpinner + '\\' alt=\\'\\' class=\\'ajax-spinner general-spinner\\' />';\n\n    const getBaseValues = function() {\n      const path = $('#wpstg-use-target-dir').data('base-path');\n      const uri = $('#wpstg-use-target-hostname').data('base-uri');\n      return {\n        path,\n      };\n    };\n\n    $workFlow\n    // Check / Un-check All Database Tables New\n        .on('click', '.wpstg-button-unselect', function(e) {\n          e.preventDefault();\n\n          if (false === isAllChecked) {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', 'selected');\n            cache.get('.wpstg-button-unselect').text('Unselect All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n            isAllChecked = true;\n          } else {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', false);\n            cache.get('.wpstg-button-unselect').text('Select All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n            isAllChecked = false;\n          }\n        })\n\n    /**\n             * Select tables with certain tbl prefix | NEW\n             * @param obj e\n             * @returns {undefined}\n             */\n        .on('click', '.wpstg-button-select', function(e) {\n          e.preventDefault();\n          $('#wpstg_select_tables_cloning .wpstg-db-table').each(function() {\n            if (wpstg.isMultisite == 1) {\n              if ($(this).attr('name').match('^' + wpstg.tblprefix + '([^0-9])_*')) {\n                $(this).prop('selected', 'selected');\n              } else {\n                $(this).prop('selected', false);\n              }\n            }\n\n            if (wpstg.isMultisite == 0) {\n              if ($(this).attr('name').match('^' + wpstg.tblprefix)) {\n                $(this).prop('selected', 'selected');\n              } else {\n                $(this).prop('selected', false);\n              }\n            }\n          });\n        })\n    // Expand Directories\n        .on('click', '.wpstg-expand-dirs', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          $this.siblings('.wpstg-subdir').slideToggle();\n        })\n    // When a directory checkbox is Selected\n        .on('change', 'input.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // When a directory name is Selected\n        .on('change', 'href.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // Check the max length of the clone name and if the clone name already exists\n        .on('keyup', '#wpstg-new-clone-id', function() {\n          // Hide previous errors\n          document.getElementById('wpstg-error-details').style.display = 'none';\n\n          // This request was already sent, clear it up!\n          if ('number' === typeof (timer)) {\n            clearInterval(timer);\n          }\n\n          const cloneID = this.value;\n\n          timer = setTimeout(\n              function() {\n                ajax(\n                    {\n                      action: 'wpstg_check_clone',\n                      accessToken: wpstg.accessToken,\n                      nonce: wpstg.nonce,\n                      cloneID: cloneID,\n                    },\n                    function(response) {\n                      if (response.status === 'success') {\n                        cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').removeAttr('disabled');\n                        cache.get('#wpstg-clone-id-error').text('').hide();\n                      } else {\n                        cache.get('#wpstg-new-clone-id').addClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').prop('disabled', true);\n                        cache.get('#wpstg-clone-id-error').text(response.message).show();\n                      }\n                    },\n                );\n              },\n              500,\n          );\n        })\n    // Restart cloning process\n        .on('click', '#wpstg-start-cloning', function() {\n          resetErrors();\n          that.isCancelled = false;\n          that.getLogs = false;\n          that.progressBar = 0;\n        })\n        .on('input', '#wpstg-new-clone-id', function() {\n          if ($('#wpstg-clone-directory').length < 1) {\n            return;\n          }\n\n          const slug = slugify(this.value);\n          const $targetDir = $('#wpstg-use-target-dir');\n          const $targetUri = $('#wpstg-use-target-hostname');\n          let path = $targetDir.data('base-path');\n          let uri = $targetUri.data('base-uri');\n\n          if (path) {\n            path = path.replace(/\\/+$/g, '') + '/' + slug + '/';\n          }\n\n          if (uri) {\n            uri = uri.replace(/\\/+$/g, '') + '/' + slug;\n          }\n\n\n          $('.wpstg-use-target-dir--value').text(path);\n          $('.wpstg-use-target-hostname--value').text(uri);\n\n          $targetDir.attr('data-path', path);\n          $targetUri.attr('data-uri', uri);\n          $('#wpstg_clone_dir').attr('placeholder', path);\n          $('#wpstg_clone_hostname').attr('placeholder', uri);\n        })\n        .on('input', '#wpstg_clone_hostname', function() {\n          if ($(this).val() === '' || validateTargetHost()) {\n            $('#wpstg_clone_hostname_error').remove();\n            return;\n          }\n          if (!validateTargetHost() && !$('#wpstg_clone_hostname_error').length) {\n            $('#wpstg-clone-directory tr:last-of-type').after('<tr><td>&nbsp;</td><td><p id=\"wpstg_clone_hostname_error\" style=\"color: red;\">&nbsp;Invalid host name. Please provide it in a format like http://example.com</p></td></tr>');\n          }\n        })\n    ;\n\n    cloneActions();\n  };\n\n  /* @returns {boolean} */\n  var validateTargetHost = function() {\n    const the_domain = $('#wpstg_clone_hostname').val();\n\n    if (the_domain === '') {\n      return true;\n    }\n\n    const reg = /^http(s)?:\\/\\/.*$/;\n    if (reg.test(the_domain) === false) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n     * Clone actions\n     */\n  var cloneActions = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Cancel cloning\n        .on('click', '#wpstg-cancel-cloning', function() {\n          if (!confirm('Are you sure you want to cancel cloning process?')) {\n            return false;\n          }\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n          that.progressBar = 0;\n\n          $('#wpstg-processing-status').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloning();\n        })\n    // Resume cloning\n        .on('click', '#wpstg-resume-cloning', function() {\n          resetErrors();\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n\n          that.isCancelled = false;\n\n          $('#wpstg-processing-status').text('Try to resume cloning process...');\n          $('#wpstg-error-details').hide();\n          $('.wpstg-loader').show();\n\n          $this.parent().append(ajaxSpinner);\n\n          that.startCloning();\n        })\n    // Cancel update cloning\n        .on('click', '#wpstg-cancel-cloning-update', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloningUpdate();\n        })\n    // Restart cloning\n        .on('click', '#wpstg-restart-cloning', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          restart();\n        })\n    // Delete clone - confirmation\n        .on('click', '.wpstg-remove-clone[data-clone]', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          const $existingClones = cache.get('#wpstg-existing-clones');\n\n          $workFlow.removeClass('active');\n\n          cache.get('.wpstg-loader').show();\n\n          ajax(\n              {\n                action: 'wpstg_confirm_delete_clone',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                clone: $(this).data('clone'),\n              },\n              function(response) {\n                cache.get('#wpstg-removing-clone').html(response);\n\n                $existingClones.children('img').remove();\n\n                cache.get('.wpstg-loader').hide();\n\n                $('html, body').animate({\n                  // This logic is meant to be a \"scrollBottom\"\n                  scrollTop: $('#wpstg-remove-clone').offset().top - $(window).height() +\n                                $('#wpstg-remove-clone').height() + 50,\n                }, 100);\n              },\n              'HTML',\n          );\n        })\n    // Delete clone - confirmed\n        .on('click', '#wpstg-remove-clone', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          cache.get('#wpstg-removing-clone').addClass('loading');\n\n          cache.get('.wpstg-loader').show();\n\n          deleteClone($(this).data('clone'));\n        })\n    // Cancel deleting clone\n        .on('click', '#wpstg-cancel-removing', function(e) {\n          e.preventDefault();\n          $('.wpstg-clone').removeClass('active');\n          cache.get('#wpstg-removing-clone').html('');\n        })\n    // Update\n        .on('click', '.wpstg-execute-clone', function(e) {\n          e.preventDefault();\n\n          const clone = $(this).data('clone');\n\n          $workFlow.addClass('loading');\n          that.cloneExcludeFilters = null;\n          ajax(\n              {\n                action: 'wpstg_scanning',\n                clone: clone,\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n              },\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! Error: No response.  Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n                  );\n                }\n\n                const jsonResponse = tryParseJson(response);\n                if (jsonResponse !== false && jsonResponse.success === false) {\n                  $workFlow.removeClass('loading');\n                  showErrorModal(jsonResponse);\n\n                  return;\n                }\n\n                $workFlow.removeClass('loading').html(response);\n                // register check disk space function for clone update process.\n                checkDiskSpace();\n                that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n                that.cloneExcludeFilters = new WpstgExcludeFilters();\n                that.switchStep(2);\n              },\n              'HTML',\n          );\n        })\n    // Reset Clone\n        .on('click', '.wpstg-reset-clone', function(e) {\n          e.preventDefault();\n          const clone = $(this).data('clone');\n          const resetModal = new WpstgResetModal(clone);\n          const promise = resetModal.showModal();\n\n          promise.then((result) => {\n            if (result.value) {\n              const dirNavigator = resetModal.getDirectoryNavigator();\n              const exclFilters = resetModal.getExcludeFilters().getExcludeFilters();\n              resetClone(clone, {\n                includedTables: getIncludedTables(),\n                excludeSizeRules: encodeURIComponent(exclFilters.sizes),\n                excludeGlobRules: encodeURIComponent(exclFilters.globs),\n                excludedDirectories: dirNavigator.getExcludedDirectories(),\n                extraDirectories: dirNavigator.getExtraDirectoriesRootOnly(),\n              });\n            }\n          });\n\n          return;\n        });\n  };\n\n  /**\n   * Ajax Requests\n   * @param Object data\n   * @param Function callback\n   * @param string dataType\n   * @param bool showErrors\n   * @param int tryCount\n   * @param float incrementRatio\n   */\n  var ajax = function(data, callback, dataType, showErrors, tryCount, incrementRatio = null) {\n    if ('undefined' === typeof (dataType)) {\n      dataType = 'json';\n    }\n\n    if (false !== showErrors) {\n      showErrors = true;\n    }\n\n    tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n    const retryLimit = 10;\n\n    let retryTimeout = 10000 * tryCount;\n\n    incrementRatio = parseInt(incrementRatio);\n    if (!isNaN(incrementRatio)) {\n      retryTimeout *= incrementRatio;\n    }\n\n    $.ajax({\n      url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n      type: 'POST',\n      dataType: dataType,\n      cache: false,\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        // try again after 10 seconds\n        tryCount++;\n        if (tryCount <= retryLimit) {\n          setTimeout(function() {\n            ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n            return;\n          }, retryTimeout);\n        } else {\n          const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n          showError(\n              'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n          );\n        }\n      },\n      success: function(data) {\n        if ('function' === typeof (callback)) {\n          callback(data);\n        }\n      },\n      statusCode: {\n        404: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n          }\n        },\n        500: function() {\n          if (tryCount >= retryLimit) {\n            showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n          }\n        },\n        504: function() {\n          if (tryCount > retryLimit) {\n            showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        502: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        503: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        429: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        403: function() {\n          if (tryCount >= retryLimit) {\n            showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n          }\n        },\n      },\n    });\n  };\n\n  /**\n   * Next / Previous Step Clicks to Navigate Through Staging Job\n   */\n  const stepButtons = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Next Button\n        .on('click', '.wpstg-next-step-link', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n          const isScan = false;\n\n          if ($('#wpstg_clone_hostname').length && !validateTargetHost()) {\n            $('#wpstg_clone_hostname').focus();\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_update' || $this.data('action') === 'wpstg_reset') {\n          // Update / Reset Clone - confirmed\n            let onlyUpdateMessage = '';\n            if ($this.data('action') === 'wpstg_update') {\n              onlyUpdateMessage = ' \\n\\nExclude all tables and folders you do not want to overwrite, first! \\n\\nDo not cancel the updating process! This can break your staging site. \\n\\n\\Create a backup of your staging website before you proceed.';\n            }\n\n            if (!confirm('STOP! This will overwrite your staging site with all selected data from the production site! This should be used only if you want to clone again your production site. Are you sure you want to do this?' + onlyUpdateMessage)) {\n              return false;\n            }\n          }\n\n          // Button is disabled\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_cloning') {\n          // Verify External Database If Checked and Not Skipped\n            if ($('#wpstg-ext-db').is(':checked')) {\n              verifyExternalDatabase($this, $workFlow);\n              return;\n            }\n          }\n\n          proceedCloning($this, $workFlow);\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          cache.get('.wpstg-loader').removeClass('wpstg-finished');\n          cache.get('.wpstg-loader').hide();\n          loadOverview();\n        });\n  };\n\n  /**\n   * Get Included (Checked) Database Tables\n   * @return {Array}\n   */\n  const getIncludedTables = function() {\n    const includedTables = [];\n\n    $('#wpstg_select_tables_cloning option:selected').each(function() {\n      includedTables.push(this.value);\n    });\n\n    return includedTables;\n  };\n\n  /**\n   * Get Excluded (Unchecked) Database Tables\n   * Not used anymore!\n   * @return {Array}\n   */\n  const getExcludedTables = function() {\n    const excludedTables = [];\n\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n  /**\n   * Verify External Database for Cloning\n   */\n  var verifyExternalDatabase = function($this, workflow) {\n    cache.get('.wpstg-loader').show();\n    ajax(\n        {\n          action: 'wpstg_database_verification',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          databaseUser: cache.get('#wpstg_db_username').val(),\n          databasePassword: cache.get('#wpstg_db_password').val(),\n          databaseServer: cache.get('#wpstg_db_server').val(),\n          databaseDatabase: cache.get('#wpstg_db_database').val(),\n        },\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' === typeof (response.success)) {\n            showError(\n                'Something went wrong! Error: Invalid response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          if (response.success) {\n            cache.get('.wpstg-loader').hide();\n            proceedCloning($this, workflow);\n            return;\n          }\n\n          if (response.error_type === 'comparison') {\n            cache.get('.wpstg-loader').hide();\n            let render = '<table style=\"width: 100%;\"><thead><tr><th>Property</th><th>Production DB</th><th>Staging DB</th><th>Status</th></tr></thead><tbody>';\n            response.checks.forEach((x) => {\n              let icon = '<i style=\"color: #00ff00\"></i>';\n              if (x.production !== x.staging) {\n                icon = '<i style=\"color: #ff0000\"></i>';\n              }\n              render += '<tr><td>' + x.name + '</td><td>' + x.production + '</td><td>' + x.staging + '</td><td>' + icon + '</td></tr>';\n            });\n            render += '</tbody></table><p>Note: Some mySQL properties do not match. You may proceed but the staging site may not work as expected.</p>';\n            Swal.fire({\n              title: 'Different Database Properties',\n              icon: 'warning',\n              html: render,\n              width: '650px',\n              focusConfirm: false,\n              confirmButtonText: 'Proceed Anyway',\n              showCancelButton: true,\n            }).then(function(result) {\n              if (result.value) {\n                proceedCloning($this, workflow);\n              }\n            });\n            return;\n          }\n\n          Swal.fire({\n            title: 'Different Database Properties',\n            icon: 'error',\n            html: response.message,\n            focusConfirm: true,\n            confirmButtonText: 'Ok',\n            showCancelButton: false,\n          });\n          cache.get('.wpstg-loader').hide();\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n   * Get Cloning Step Data\n   */\n  const getCloningData = function() {\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.data.cloneID = $('#wpstg-new-clone-id').val() || new Date().getTime().toString();\n    // Remove this to keep &_POST[] small otherwise mod_security will throw error 404\n    // that.data.excludedTables = getExcludedTables();\n\n    if (that.directoryNavigator !== null) {\n      that.data.excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      that.data.extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n    }\n\n    that.data.excludeGlobRules = '';\n    that.data.excludeSizeRules = '';\n    if (that.cloneExcludeFilters instanceof WpstgExcludeFilters) {\n      const rules = that.cloneExcludeFilters.getExcludeFilters();\n      that.data.excludeGlobRules = encodeURIComponent(rules.globs);\n      that.data.excludeSizeRules = encodeURIComponent(rules.sizes);\n    }\n\n    that.data.includedTables = getIncludedTables();\n    that.data.databaseServer = $('#wpstg_db_server').val();\n    that.data.databaseUser = $('#wpstg_db_username').val();\n    that.data.databasePassword = $('#wpstg_db_password').val();\n    that.data.databaseDatabase = $('#wpstg_db_database').val();\n    that.data.databasePrefix = $('#wpstg_db_prefix').val();\n    const cloneDir = $('#wpstg_clone_dir').val();\n    that.data.cloneDir = encodeURIComponent($.trim(cloneDir));\n    that.data.cloneHostname = $('#wpstg_clone_hostname').val();\n    that.data.emailsAllowed = $('#wpstg_allow_emails').is(':checked');\n    that.data.uploadsSymlinked = $('#wpstg_symlink_upload').is(':checked');\n    that.data.cleanPluginsThemes = $('#wpstg-clean-plugins-themes').is(':checked');\n    that.data.cleanUploadsDir = $('#wpstg-clean-uploads').is(':checked');\n  };\n\n  var proceedCloning = function($this, workflow) {\n    // Add loading overlay\n    workflow.addClass('loading');\n\n    // Prepare data\n    that.data = {\n      action: $this.data('action'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    // Cloning data\n    getCloningData();\n\n    sendCloningAjax(workflow);\n  };\n\n  var sendCloningAjax = function(workflow) {\n    // Send ajax request\n    ajax(\n        that.data,\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong!<br/><br/> Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n          const jsonResponse = tryParseJson(response);\n          if (jsonResponse !== false && jsonResponse.success === false) {\n            workflow.removeClass('loading');\n            showErrorModal(jsonResponse);\n\n            return;\n          }\n\n          // Styling of elements\n          workflow.removeClass('loading').html(response);\n          that.cloneExcludeFilters = null;\n          if (that.data.action === 'wpstg_scanning') {\n            that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n            that.switchStep(2);\n            that.cloneExcludeFilters = new WpstgExcludeFilters();\n          } else if (that.data.action === 'wpstg_cloning' || that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n            that.switchStep(3);\n          }\n\n          // Start cloning\n          that.startCloning();\n        },\n        'HTML',\n    );\n  };\n\n  var showErrorModal = function(response) {\n    const errorModal = new WpstgModal('wpstg_modal_error', wpstg);\n    errorModal.show(Object.assign({\n      title: 'Error',\n      icon: 'error',\n      html: wpstg.i18n['somethingWentWrong'],\n      width: '500px',\n      confirmButtonText: 'Ok',\n      showCancelButton: false,\n    }, response.swalOptions), {\n      type: response.type,\n    });\n  };\n\n  const tryParseJson = function(json) {\n    // early bail if not string\n    if (!json) {\n      return false;\n    }\n\n    try {\n      const object = JSON.parse(json);\n      if (object && typeof object === 'object') {\n        return object;\n      }\n    } catch (e) {\n      // do nothing on catch\n    }\n\n    return false;\n  };\n\n  var resetClone = function(clone, excludeOptions) {\n    that.data = {\n      action: 'wpstg_reset',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n      cloneID: clone,\n    };\n\n    that.data = {...that.data, ...excludeOptions};\n\n    const $workFlow = cache.get('#wpstg-workflow');\n    sendCloningAjax($workFlow);\n  };\n\n  /**\n   * Loads Overview (first step) of Staging Job\n   */\n  var loadOverview = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow.addClass('loading');\n\n    ajax(\n        {\n          action: 'wpstg_overview',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response. Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report.',\n            );\n          }\n\n          const $currentStep = cache.get('.wpstg-current-step');\n\n          // Styling of elements\n          $workFlow.removeClass('loading').html(response);\n        },\n        'HTML',\n    );\n\n    that.switchStep(1);\n    cache.get('.wpstg-step3-cloning').show();\n    cache.get('.wpstg-step3-pushing').hide();\n  };\n\n  /**\n   * Load Tabs\n   */\n  const tabs = function() {\n    cache.get('#wpstg-workflow').on('click', '.wpstg-tab-header', function(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const $section = cache.get($this.data('id'));\n\n      $this.toggleClass('expand');\n\n      $section.slideToggle();\n\n      if ($this.hasClass('expand')) {\n        $this.find('.wpstg-tab-triangle').html('&#9660;');\n      } else {\n        $this.find('.wpstg-tab-triangle').html('&#9658;');\n      }\n    });\n  };\n\n  /**\n   * Delete Clone\n   * @param {String} clone\n   */\n  var deleteClone = function(clone) {\n    const deleteDir = $('#deleteDirectory:checked').data('deletepath');\n\n    ajax(\n        {\n          action: 'wpstg_delete_clone',\n          clone: clone,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          excludedTables: getExcludedTables(),\n          deleteDir: deleteDir,\n        },\n        function(response) {\n          if (response) {\n            showAjaxFatalError(response);\n\n            // Finished\n            if ('undefined' !== typeof response.delete && (response.delete === 'finished' || response.delete === 'unfinished')) {\n              cache.get('#wpstg-removing-clone').removeClass('loading').html('');\n\n              if (response.delete === 'finished') {\n                $('.wpstg-clone#' + clone).remove();\n              }\n\n              if ($('.wpstg-clone').length < 1) {\n                cache.get('#wpstg-existing-clones').find('h3').text('');\n              }\n\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n          }\n          // continue\n          if (true !== response) {\n            deleteClone(clone);\n            return;\n          }\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloning = function() {\n    that.timer('stop');\n\n\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_clone',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n            cache.get('.wpstg-loader').hide();\n            // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloning();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloningUpdate = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_update',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var restart = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_restart',\n          // clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Scroll the window log to bottom\n   * @return void\n   */\n  const logscroll = function() {\n    const $div = cache.get('.wpstg-log-details');\n    if ('undefined' !== typeof ($div[0])) {\n      $div.scrollTop($div[0].scrollHeight);\n    }\n  };\n\n  /**\n   * Append the log to the logging window\n   * @param string log\n   * @return void\n   */\n  const getLogs = function(log) {\n    if (log != null && 'undefined' !== typeof (log)) {\n      if (log.constructor === Array) {\n        $.each(log, function(index, value) {\n          if (value === null) {\n            return;\n          }\n          if (value.type === 'ERROR') {\n            cache.get('.wpstg-log-details').append('<span style=\"color:red;\">[' + value.type + ']</span>-' + '[' + value.date + '] ' + value.message + '</br>');\n          } else {\n            cache.get('.wpstg-log-details').append('[' + value.type + ']-' + '[' + value.date + '] ' + value.message + '</br>');\n          }\n        });\n      } else {\n        cache.get('.wpstg-log-details').append('[' + log.type + ']-' + '[' + log.date + '] ' + log.message + '</br>');\n      }\n    }\n    logscroll();\n  };\n\n  /**\n   * Check diskspace\n   * @return string json\n   */\n  var checkDiskSpace = function() {\n    cache.get('#wpstg-check-space').on('click', function(e) {\n      cache.get('.wpstg-loader').show();\n      const excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      const extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n\n      ajax(\n          {\n            action: 'wpstg_check_disk_space',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedDirectories: excludedDirectories,\n            extraDirectories: extraDirectories,\n          },\n          function(response) {\n            if (false === response) {\n              cache.get('#wpstg-clone-id-error').text('Can not detect required disk space').show();\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n\n            // Show required disk space\n            cache.get('#wpstg-clone-id-error').html('Estimated necessary disk space: ' + response.usedspace + '<br> <span style=\"color:#444;\">Before you proceed ensure your account has enough free disk space to hold the entire instance of the production site. You can check the available space from your hosting account (cPanel or similar).</span>').show();\n            cache.get('.wpstg-loader').hide();\n          },\n          'json',\n          false,\n      );\n    });\n  };\n\n  const mainTabs = function() {\n    $('.wpstg--tab--header a[data-target]').on('click', function() {\n      const $this = $(this);\n      const target = $this.attr('data-target');\n      const $wrapper = $this.parents('.wpstg--tab--wrapper');\n      const $menuItems = $wrapper.find('.wpstg--tab--header a[data-target]');\n      const $contents = $wrapper.find('.wpstg--tab--contents > .wpstg--tab--content');\n\n      $contents.filter('.wpstg--tab--active:not(.wpstg--tab--active' + target + ')').removeClass('wpstg--tab--active');\n      $menuItems.not($this).removeClass('wpstg--tab--active');\n      $this.addClass('wpstg--tab--active');\n      $(target).addClass('wpstg--tab--active');\n\n      if ('#wpstg--tab--backup' === target) {\n        that.backups.init();\n      }\n\n      if ('#wpstg--tab--database-backups' === target) {\n        window.dispatchEvent(new Event('database-backups-tab'));\n      }\n    });\n  };\n\n  /**\n   * Show or hide animated loading icon\n   * @param isLoading bool\n   */\n  const isLoading = function(isLoading) {\n    if (!isLoading || isLoading === false) {\n      cache.get('.wpstg-loader').hide();\n    } else {\n      cache.get('.wpstg-loader').show();\n    }\n  };\n\n  /**\n   * Count up processing execution time\n   * @param string status\n   * @return html\n   */\n  that.timer = function(status) {\n    if (status === 'stop') {\n      const time = that.time;\n      that.time = 1;\n      clearInterval(that.executionTime);\n      return that.convertSeconds(time);\n    }\n\n\n    that.executionTime = setInterval(function() {\n      if (null !== document.getElementById('wpstg-processing-timer')) {\n        document.getElementById('wpstg-processing-timer').innerHTML = 'Elapsed Time: ' + that.convertSeconds(that.time);\n      }\n      that.time++;\n      if (status === 'stop') {\n        that.time = 1;\n        clearInterval(that.executionTime);\n      }\n    }, 1000);\n  };\n\n  /**\n   * Convert seconds to hourly format\n   * @param int seconds\n   * @return string\n   */\n  that.convertSeconds = function(seconds) {\n    const date = new Date(null);\n    date.setSeconds(seconds); // specify value for SECONDS here\n    return date.toISOString().substr(11, 8);\n  };\n\n  /**\n   * Start Cloning Process\n   * @type {Function}\n   */\n  that.startCloning = (function() {\n    resetErrors();\n\n    // Register function for checking disk space\n    checkDiskSpace();\n\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.isCancelled = false;\n\n    // Start the process\n    start();\n\n    // Functions\n    // Start\n    function start() {\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-cancel-cloning').text('Cancel');\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-error-details').hide();\n\n\n      // Clone Database\n      setTimeout(function() {\n        // cloneDatabase();\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        processing();\n      }, wpstg.delayReq);\n\n      that.timer('start');\n    }\n\n\n    /**\n     * Start ajax processing\n     * @return string\n     */\n    var processing = function() {\n      if (true === that.isCancelled) {\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return false;\n      }\n\n      isLoading(true);\n\n      let excludedDirectories = '';\n      let extraDirectories = '';\n      if (that.directoryNavigator !== null) {\n        excludedDirectories = that.directoryNavigator.getExcludedDirectories();\n        extraDirectories = that.directoryNavigator.getExtraDirectoriesRootOnly();\n      }\n\n      // Show logging window\n      cache.get('.wpstg-log-details').show();\n\n      WPStaging.ajax(\n          {\n            action: 'wpstg_processing',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedTables: getExcludedTables(),\n            excludedDirectories: encodeURIComponent(excludedDirectories),\n            extraDirectories: encodeURIComponent(extraDirectories),\n          },\n          function(response) {\n            showAjaxFatalError(response);\n\n            // Add Log messages\n            if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n              getLogs(response.last_msg);\n            }\n            // Continue processing\n            if (false === response.status) {\n              progressBar(response);\n\n              setTimeout(function() {\n                cache.get('.wpstg-loader').show();\n                processing();\n              }, wpstg.delayReq);\n            } else if (true === response.status && 'finished' !== response.status) {\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-error-wrapper').hide();\n              progressBar(response, true);\n              processing();\n            } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n              window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n              finish(response);\n            }\n            ;\n          },\n          'json',\n          false,\n      );\n    };\n\n    // Finish\n    function finish(response) {\n      if (true === that.getLogs) {\n        getLogs();\n      }\n\n      progressBar(response);\n\n      // Add Log\n      if ('undefined' !== typeof (response.last_msg)) {\n        getLogs(response.last_msg);\n      }\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n      $('#wpstg-processing-status').text('Succesfully finished');\n\n      cache.get('#wpstg_staging_name').html(that.data.cloneID);\n      cache.get('#wpstg-finished-result').show();\n      cache.get('#wpstg-cancel-cloning').hide();\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-cancel-cloning-update').prop('disabled', true);\n\n      const $link1 = cache.get('#wpstg-clone-url-1');\n      const $link = cache.get('#wpstg-clone-url');\n      $link1.attr('href', response.url);\n      $link1.html(response.url);\n      $link.attr('href', response.url);\n\n      cache.get('#wpstg-remove-clone').data('clone', that.data.cloneID);\n\n      // Finished\n      that.isFinished = true;\n      that.timer('stop');\n\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n\n      // show alert\n      let msg = wpstg.i18n.cloneResetComplete;\n      if (that.data.action === 'wpstg_update') {\n        msg = wpstg.i18n.cloneUpdateComplete;\n      }\n\n      if (that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n        Swal.fire({\n          title: '',\n          icon: 'success',\n          html: msg,\n          width: '500px',\n          focusConfirm: true,\n        });\n      }\n\n      return false;\n    }\n\n    /**\n     * Add percentage progress bar\n     * @param object response\n     * @return {Boolean}\n     */\n    var progressBar = function(response, restart) {\n      if ('undefined' === typeof (response.percentage)) {\n        return false;\n      }\n\n      if (response.job === 'database') {\n        cache.get('#wpstg-progress-db').width(response.percentage * 0.2 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Cloning Database Tables...');\n      }\n\n      if (response.job === 'SearchReplace') {\n        cache.get('#wpstg-progress-db').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-db').html('1. Database');\n        // Assumption: All previous steps are done.\n        // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n        cache.get('#wpstg-progress-db').width('20%');\n\n        cache.get('#wpstg-progress-sr').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 2 of 4 Preparing Database Data...');\n      }\n\n      if (response.job === 'directories') {\n        cache.get('#wpstg-progress-sr').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-sr').html('2. Data');\n        cache.get('#wpstg-progress-sr').width('10%');\n\n        cache.get('#wpstg-progress-dirs').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 3 of 4 Getting files...');\n      }\n      if (response.job === 'files') {\n        cache.get('#wpstg-progress-dirs').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-dirs').html('3. Files');\n        cache.get('#wpstg-progress-dirs').width('10%');\n\n        cache.get('#wpstg-progress-files').width(response.percentage * 0.6 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Copy files...');\n      }\n      if (response.job === 'finish') {\n        cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-files').html('4. Copy Files');\n        cache.get('#wpstg-progress-files').width('60%');\n\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Cloning Process Finished');\n      }\n    };\n  });\n\n  that.switchStep = function(step) {\n    cache.get('.wpstg-current-step')\n        .removeClass('wpstg-current-step');\n    cache.get('.wpstg-step' + step)\n        .addClass('wpstg-current-step');\n  };\n\n  /**\n   * Initiation\n   * @type {Function}\n   */\n  that.init = (function() {\n    loadOverview();\n    elements();\n    stepButtons();\n    tabs();\n    mainTabs();\n    new WpstgCloneStaging();\n  });\n\n  /**\n   * Ajax call\n   * @type {ajax}\n   */\n  that.ajax = ajax;\n  that.showError = showError;\n  that.getLogs = getLogs;\n  that.loadOverview = loadOverview;\n\n  // TODO RPoC (too big, scattered and unorganized)\n  that.backups = {\n    type: null,\n    isCancelled: false,\n    processInfo: {\n      title: null,\n      interval: null,\n    },\n    modal: {\n      create: {\n        html: null,\n        confirmBtnTxt: null,\n      },\n      process: {\n        html: null,\n        cancelBtnTxt: null,\n        modal: null,\n      },\n      download: {\n        html: null,\n      },\n      import: {\n        html: null,\n        btnTxtNext: null,\n        btnTxtConfirm: null,\n        btnTxtCancel: null,\n        searchReplaceForm: null,\n        file: null,\n        containerUpload: null,\n        containerFilesystem: null,\n        setFile: (file, upload = true) => {\n          const toUnit = (bytes) => {\n            const i = Math.floor(Math.log(bytes) / Math.log(1024));\n            return (bytes / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n          };\n\n          if (!file) {\n            return;\n          }\n\n          that.backups.modal.import.file = file;\n          that.backups.modal.import.data.file = file.name;\n\n          $('.wpstg--backup--import--selected-file').html(`${file.name} <br /> (${toUnit(file.size)})`).show();\n          $('.wpstg--drag').hide();\n          $('.wpstg--drag-or-upload').show();\n\n          if (upload) {\n            $('.wpstg--modal--actions .swal2-confirm').prop('disabled', true);\n            that.backups.upload.start();\n          }\n        },\n        baseDirectory: null,\n        data: {\n          file: null,\n          search: [],\n          replace: [],\n        },\n      },\n    },\n    messages: {\n      WARNING: 'warning',\n      ERROR: 'error',\n      INFO: 'info',\n      DEBUG: 'debug',\n      CRITICAL: 'critical',\n      data: {\n        all: [], // TODO RPoC\n        info: [],\n        error: [],\n        critical: [],\n        warning: [],\n        debug: [],\n      },\n      shouldWarn() {\n        return that.backups.messages.data.error.length > 0 ||\n          that.backups.messages.data.critical.length > 0\n        ;\n      },\n      countByType(type = that.backups.messages.ERROR) {\n        return that.backups.messages.data[type].length;\n      },\n      addMessage(message) {\n        if (Array.isArray(message)) {\n          message.forEach((item) => {\n            that.backups.messages.addMessage(item);\n          });\n          return;\n        }\n        const type = message.type.toLowerCase() || 'info';\n        if (!that.backups.messages.data[type]) {\n          that.backups.messages.data[type] = [];\n        }\n        that.backups.messages.data.all.push(message); // TODO RPoC\n        that.backups.messages.data[type].push(message);\n      },\n      reset() {\n        that.backups.messages.data = {\n          all: [],\n          info: [],\n          error: [],\n          critical: [],\n          warning: [],\n          debug: [],\n        };\n      },\n    },\n    timer: {\n      totalSeconds: 0,\n      interval: null,\n      start() {\n        if (null !== that.backups.timer.interval) {\n          return;\n        }\n\n        const prettify = (seconds) => {\n          // If potentially anything can exceed 24h execution time than that;\n          // const _seconds = parseInt(seconds, 10)\n          // const hours = Math.floor(_seconds / 3600)\n          // const minutes = Math.floor(_seconds / 60) % 60\n          // seconds = _seconds % 60\n          //\n          // return [hours, minutes, seconds]\n          //   .map(v => v < 10 ? '0' + v : v)\n          //   .filter((v,i) => v !== '00' || i > 0)\n          //   .join(':')\n          // ;\n          // Are we sure we won't create anything that exceeds 24h execution time? If not then this;\n          return `${(new Date(seconds * 1000)).toISOString().substr(11, 8)}`;\n        };\n\n        that.backups.timer.interval = setInterval(() => {\n          $('.wpstg--modal--process--elapsed-time').text(prettify(that.backups.timer.totalSeconds));\n          that.backups.timer.totalSeconds++;\n        }, 1000);\n      },\n      stop() {\n        that.backups.timer.totalSeconds = 0;\n        if (that.backups.timer.interval) {\n          clearInterval(that.backups.timer.interval);\n          that.backups.timer.interval = null;\n        }\n      },\n    },\n    upload: {\n      reader: null,\n      file: null,\n      iop: 1000 * 1024,\n      uploadInfo(isShow) {\n        const $containerUpload = $('.wpstg--modal--import--upload--process');\n        const $containerUploader = $('.wpstg--uploader');\n        if (isShow) {\n          $containerUpload.css('display', 'flex');\n          $containerUploader.hide();\n          return;\n        }\n\n        $containerUploader.css('display', 'flex');\n        $containerUpload.hide();\n      },\n      start() {\n        that.backups.upload.reader = new FileReader();\n        that.backups.upload.file = that.backups.modal.import.file;\n        that.backups.upload.uploadInfo(true);\n        that.backups.upload.sendChunk();\n      },\n      sendChunk(startsAt = 0) {\n        if (!that.backups.upload.file) {\n          return;\n        }\n        const isReset = startsAt < 1;\n        const endsAt = startsAt + that.backups.upload.iop + 1;\n        const blob = that.backups.upload.file.slice(startsAt, endsAt);\n        that.backups.upload.reader.onloadend = function(event) {\n          if (event.target.readyState !== FileReader.DONE) {\n            return;\n          }\n\n          const body = new FormData();\n          body.append('accessToken', wpstg.accessToken);\n          body.append('nonce', wpstg.nonce);\n          body.append('data', event.target.result);\n          body.append('filename', that.backups.upload.file.name);\n          body.append('reset', isReset ? '1' : '0');\n\n\n          fetch(`${ajaxurl}?action=wpstg--backups--import--file-upload`, {\n            method: 'POST',\n            body,\n          }).then(handleFetchErrors)\n              .then((res) => res.json())\n              .then((res) => {\n                showAjaxFatalError(res, '', 'Submit an error report.');\n                const writtenBytes = startsAt + that.backups.upload.iop;\n                const percent = Math.floor((writtenBytes / that.backups.upload.file.size) * 100);\n                if (endsAt >= that.backups.upload.file.size) {\n                  that.backups.upload.uploadInfo(false);\n                  isLoading(false);\n                  that.backups.switchModalToConfigure();\n                  return;\n                }\n                $('.wpstg--modal--import--upload--progress--title > span').text(percent);\n                $('.wpstg--modal--import--upload--progress').css('width', `${percent}%`);\n                that.backups.upload.sendChunk(endsAt);\n              })\n              .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n          ;\n        };\n        that.backups.upload.reader.readAsDataURL(blob);\n      },\n    },\n    status: {\n      hasResponse: null,\n      reTryAfter: 5000,\n    },\n    init() {\n      this.create();\n      this.delete();\n      this.edit();\n\n      // noinspection JSIgnoredPromiseFromCall\n      that.backups.fetchListing();\n\n      $('body')\n          .on('click', '.wpstg--backup--download', function() {\n            const url = this.getAttribute('data-url');\n            if (url.length > 0) {\n              window.location.href = url;\n              return;\n            }\n            that.backups.downloadModal({\n              titleExport: this.getAttribute('data-title-export'),\n              title: this.getAttribute('data-title'),\n              id: this.getAttribute('data-id'),\n              btnTxtCancel: this.getAttribute('data-btn-cancel-txt'),\n              btnTxtConfirm: this.getAttribute('data-btn-download-txt'),\n            });\n          })\n          .on('click', '.wpstg--backup--import', function() {\n          // Clicked \"Import\" on the backup list\n            that.backups.importModal();\n            that.backups.modal.import.data.file = this.getAttribute('data-filePath');\n            that.backups.switchModalToConfigure();\n          // $('.wpstg--modal--actions .swal2-confirm').show();\n          // $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n          })\n          .off('click', '#wpstg-import-backup')\n          .on('click', '#wpstg-import-backup', function() {\n            that.backups.importModal();\n          })\n      // Import\n          .off('click', '.wpstg--backup--import--choose-option')\n          .on('click', '.wpstg--backup--import--choose-option', function() {\n            const $this = $(this);\n            const $parent = $this.parent();\n            if (!$parent.hasClass('wpstg--show-options')) {\n              $parent.addClass('wpstg--show-options');\n              $this.text($this.attr('data-txtChoose'));\n            } else {\n              $parent.removeClass('wpstg--show-options');\n              $this.text($this.attr('data-txtOther'));\n            }\n          })\n          .off('click', '.wpstg--modal--backup--import--search-replace--new')\n          .on('click', '.wpstg--modal--backup--import--search-replace--new', function(e) {\n            e.preventDefault();\n            const $container = $(Swal.getContainer()).find('.wpstg--modal--backup--import--search-replace--input--container');\n            const total = $container.find('.wpstg--modal--backup--import--search-replace--input-group').length;\n            $container.append(that.backups.modal.import.searchReplaceForm.replace(/{i}/g, total));\n          })\n          .off('click', '.wpstg--modal--backup--import--search-replace--remove')\n          .on('click', '.wpstg--modal--backup--import--search-replace--remove', function(e) {\n            e.preventDefault();\n            $(e.target).closest('.wpstg--modal--backup--import--search-replace--input-group').remove();\n          })\n          .off('input', '.wpstg--backup--import--search')\n          .on('input', '.wpstg--backup--import--search', function() {\n            const index = parseInt(this.getAttribute('data-index'));\n            if (!isNaN(index)) {\n              that.backups.modal.import.data.search[index] = this.value;\n            }\n          })\n          .off('input', '.wpstg--backup--import--replace')\n          .on('input', '.wpstg--backup--import--replace', function() {\n            const index = parseInt(this.getAttribute('data-index'));\n            if (!isNaN(index)) {\n              that.backups.modal.import.data.replace[index] = this.value;\n            }\n          })\n      // Other Options\n          .off('click', '.wpstg--backup--import--option[data-option]')\n          .on('click', '.wpstg--backup--import--option[data-option]', function() {\n            const option = this.getAttribute('data-option');\n\n            if (option === 'file') {\n              $('input[type=\"file\"][name=\"wpstg--backup--import--upload--file\"]').trigger('click');\n              return;\n            }\n\n            if (option === 'upload') {\n              that.backups.modal.import.containerFilesystem.hide();\n              that.backups.modal.import.containerUpload.show();\n            }\n\n            if (option !== 'filesystem') {\n              return;\n            }\n\n            that.backups.modal.import.containerUpload.hide();\n            const $containerFilesystem = that.backups.modal.import.containerFilesystem;\n            $containerFilesystem.show();\n\n            fetch(`${ajaxurl}?action=wpstg--backups--import--file-list&_=${Math.random()}&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n                .then(handleFetchErrors)\n                .then((res) => res.json())\n                .then((res) => {\n                  const $ul = $('.wpstg--modal--backup--import--filesystem ul');\n                  $ul.empty();\n\n                  if (!res || isEmpty(res)) {\n                    $ul.append(`<span id=\"wpstg--backups--import--file-list-empty\">`+ wpstg.i18n.noImportFileFound +`</span><br />`);\n                    $('.wpstg--modal--backup--import--search-replace--wrapper').hide();\n                    return;\n                  }\n\n                  $ul.append(`<span id=\"wpstg--backups--import--file-list\">`+ wpstg.i18n.selectFileToImport +`</span><br />`);\n                  res.forEach(function(file, index) {\n                    $ul.append(`\n<li data-filepath=\"${file.fullPath}\" class=\"wpstg--backups--import--file-list--sigle-item\">\n    <ul class=\"wpstg-import-backup-more-info wpstg-import-backup-more-info-` + index + `\">\n        <li style=\"font-weight: bold\">${file.backupName}</li>\n        <li>Created on: ${file.dateCreatedFormatted}</li>\n        <li>Size: ${file.size}</li>\n        <li>\n            <div class=\"wpstg-import-backup-contains-title\">This backup contains:</div>\n            <ul class=\"wpstg-import-backup-contains\">\n            ` + (file.isExportingDatabase ? '<li><span class=\"dashicons dashicons-database wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Database</div></span></li>' : '') + `\n            ` + (file.isExportingPlugins ? '<li><span class=\"dashicons dashicons-admin-plugins wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Plugins</div></span></li>' : '') + `\n            ` + (file.isExportingMuPlugins ? '<li><span class=\"dashicons dashicons-plugins-checked wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Mu-plugins</div></span></li>' : '') + `\n            ` + (file.isExportingThemes ? '<li><span class=\"dashicons dashicons-layout wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Themes</div></span></li>' : '') + `\n            ` + (file.isExportingUploads ? '<li><span class=\"dashicons dashicons-images-alt wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Uploads</div></span></li>' : '') + `\n            ` + (file.isExportingOtherWpContentFiles ? '<li><span class=\"dashicons dashicons-admin-generic wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Other files in wp-content</div></span></li>' : '') + `\n            </ul>\n        </li>\n        <li>Filename: ${file.name}</li>\n    </ul>\n</li>\n`);\n                  });\n                  return res;\n                })\n                .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n            ;\n          })\n          .off('change', 'input[type=\"file\"][name=\"wpstg--backup--import--upload--file\"]')\n          .on('change', 'input[type=\"file\"][name=\"wpstg--backup--import--upload--file\"]', function() {\n            that.backups.modal.import.setFile(this.files[0] || null);\n          })\n          .off('change', 'input[type=\"radio\"][name=\"backup_import_file\"]')\n          .on('change', 'input[type=\"radio\"][name=\"backup_import_file\"]', function() {\n            $('.wpstg--modal--actions .swal2-confirm').show();\n            $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n            that.backups.modal.import.data.file = this.value;\n          })\n      // Drag & Drop\n          .on('drag dragstart dragend dragover dragenter dragleave drop', '.wpstg--modal--backup--import--upload--container', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n          })\n          .on('dragover dragenter', '.wpstg--modal--backup--import--upload--container', function() {\n            $(this).addClass('wpstg--has-dragover');\n          })\n          .on('dragleave dragend drop', '.wpstg--modal--backup--import--upload--container', function() {\n            $(this).removeClass('wpstg--has-dragover');\n          })\n          .on('drop', '.wpstg--modal--backup--import--upload--container', function(e) {\n          // Uploaded a file through the \"Import Backup modal\"\n            that.backups.modal.import.setFile(e.originalEvent.dataTransfer.files[0] || null);\n          })\n          .on('click', '.wpstg--modal--backup--import--filesystem li', function(e) {\n          // Selected an existing backup in the Import Backup modal\n            const fullPath = $(e.target).closest('.wpstg--backups--import--file-list--sigle-item').data().filepath;\n            if (!fullPath.length) {\n              alert('Error: Could not get file path.');\n              return;\n            }\n            that.backups.modal.import.data.file = fullPath;\n            that.backups.switchModalToConfigure();\n          // $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n          // that.backups.modal.gotoStart();\n          })\n          .on('change', '.wpstg-advanced-options-site input[type=\"checkbox\"]', function(e) {\n          /*\n                 * We use a timeout here to simulate an \"afterChange\" event.\n                 * This allows us to read from the DOM whether the checkbox is checked or not,\n                 * instead of having to read from the event, which would require a lengthier code\n                 * to account for all elements we might want to read.\n                 */\n            setTimeout(function(e) {\n            // Reset\n              document.getElementById('exportUploadsWithoutDatabaseWarning').style.display = 'none';\n\n              // Exporting Media Library without Database\n              const databaseChecked = document.getElementById('includeDatabaseInBackup').checked;\n              const mediaLibraryChecked = document.getElementById('includeMediaLibraryInBackup').checked;\n              if (mediaLibraryChecked && !databaseChecked) {\n                document.getElementById('exportUploadsWithoutDatabaseWarning').style.display = 'block';\n              }\n            }, 100);\n          })\n      ;\n    },\n    fetchListing(isResetErrors = true) {\n      isLoading(true);\n\n      if (isResetErrors) {\n        resetErrors();\n      }\n\n      return fetch(`${ajaxurl}?action=wpstg--backups--listing&_=${Math.random()}&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n          .then(handleFetchErrors)\n          .then((res) => res.json())\n          .then((res) => {\n            showAjaxFatalError(res, '', 'Submit an error report.');\n            cache.get('#wpstg--tab--backup').html(res);\n            isLoading(false);\n            window.dispatchEvent(new Event('backupListingFinished'));\n            return res;\n          })\n          .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n      ;\n    },\n    delete() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg-delete-backup[data-md5]')\n          .on('click', '.wpstg-delete-backup[data-md5]', function(e) {\n            e.preventDefault();\n            resetErrors();\n\n            if (!confirm('Are you sure you want to delete this backup?')) {\n              return;\n            }\n\n            isLoading(true);\n            cache.get('#wpstg-existing-backups').hide();\n            const md5 = this.getAttribute('data-md5');\n            that.ajax(\n                {\n                  action: 'wpstg--backups--delete',\n                  md5: md5,\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                },\n                function(response) {\n                  showAjaxFatalError(response, '', ' Please submit an error report by using the REPORT ISSUE button.');\n                  isLoading(false);\n                  that.backups.fetchListing();\n                },\n            );\n          })\n      ;\n\n      // Force delete if backup tables do not exist\n      // TODO This is bloated, no need extra ID, use existing one?\n      $('#wpstg-error-wrapper')\n          .off('click', '#wpstg-backup-force-delete')\n          .on('click', '#wpstg-backup-force-delete', function(e) {\n            e.preventDefault();\n            resetErrors();\n            isLoading(true);\n            const id = this.getAttribute('data-id');\n\n            if (!confirm('Do you want to delete this backup ' + id + ' from the listed backups?')) {\n              isLoading(false);\n              return false;\n            }\n\n            that.ajax(\n                {\n                  action: 'wpstg--backups--delete',\n                  id: id,\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                },\n                function(response) {\n                  showAjaxFatalError(response, '', ' Please submit an error report by using the REPORT ISSUE button.');\n                  // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                  isLoading(false);\n                },\n            );\n          })\n      ;\n    },\n    create() {\n      const prepareBackup = function(data) {\n        WPStaging.ajax(\n            {\n              action: 'wpstg--backups--prepare-export',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n              wpstgExportData: data,\n            },\n            function(response) {\n              if (response.success) {\n                that.backups.timer.start();\n\n                createBackup();\n              } else {\n                showAjaxFatalError(response.data, '', 'Submit an error report.');\n              }\n            },\n            'json',\n            false,\n            0,\n            1.25,\n        );\n      };\n      const createBackup = function() {\n        resetErrors();\n\n        if (that.backups.isCancelled) {\n          // Swal.close();\n          return;\n        }\n\n        const statusStop = () => {\n          clearInterval(that.backups.processInfo.interval);\n          that.backups.processInfo.interval = null;\n        };\n        const status = () => {\n          if (that.backups.processInfo.interval !== null) {\n            return;\n          }\n          that.backups.processInfo.interval = setInterval(() => {\n            if (true === that.backups.isCancelled) {\n              statusStop();\n              return;\n            }\n\n            if (that.backups.status.hasResponse === false) {\n              return;\n            }\n\n            that.backups.status.hasResponse = false;\n            fetch(`${ajaxurl}?action=wpstg--backups--status&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n                .then((res) => res.json())\n                .then((res) => {\n                  that.backups.status.hasResponse = true;\n                  if (typeof res === 'undefined') {\n                    statusStop();\n                  }\n\n                  if (that.backups.processInfo.title === res.currentStatusTitle) {\n                    return;\n                  }\n\n                  that.backups.processInfo.title = res.currentStatusTitle;\n                  const $container = $(Swal.getContainer());\n                  $container.find('.wpstg--modal--process--title').text(res.currentStatusTitle);\n                  $container.find('.wpstg--modal--process--percent').text('0');\n                })\n                .catch((e) => {\n                  that.backups.status.hasResponse = true;\n                  showAjaxFatalError(e, '', 'Submit an error report.');\n                })\n            ;\n          }, 5000);\n        };\n        WPStaging.ajax(\n            {\n              action: 'wpstg--backups--export',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n            },\n            function(response) {\n              if (typeof response === 'undefined') {\n                setTimeout(function() {\n                  createBackup();\n                }, wpstg.delayReq);\n                return;\n              }\n\n              that.backups.processResponse(response);\n              if (!that.backups.processInfo.interval) {\n                status();\n              }\n\n              if (response.status === false) {\n                createBackup();\n              } else if (response.status === true) {\n                $('#wpstg--progress--status').text('Backup successfully created!');\n                that.backups.type = null;\n                if (that.backups.messages.shouldWarn()) {\n                // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                  that.backups.logsModal();\n                  return;\n                }\n                statusStop();\n                Swal.close();\n                that.backups.fetchListing()\n                    .then(() => {\n                      if (!response.backupMd5) {\n                        showError('Failed to get backup md5 from response');\n                        return;\n                      }\n\n                      // Wait for fetchListing to populate the DOM with the backup data that we want to read\n                      let $el = '';\n                      let timesWaited = 0;\n                      const intervalWaitForBackupInDom = setInterval(function() {\n                        timesWaited++;\n                        $el = $(`.wpstg--backup--download[data-md5=\"${response.backupMd5}\"]`);\n\n                        // Could not find element, let's try again...\n                        if (!$el.length) {\n                          if (timesWaited >= 10) {\n                            // Bail: We tried too many times and couldn't find.\n                            clearInterval(intervalWaitForBackupInDom);\n                          }\n                          return;\n                        }\n\n                        // Found it. No more need for the interval.\n                        clearInterval(intervalWaitForBackupInDom);\n\n                        const backupSize = response.hasOwnProperty('backupSize') ? ' (' + response.backupSize + ')' : '';\n\n                        that.backups.downloadModal({\n                          id: $el.data('id'),\n                          url: $el.data('url'),\n                          title: $el.data('title'),\n                          titleExport: $el.data('title-export'),\n                          btnTxtCancel: $el.data('btn-cancel-txt'),\n                          btnTxtConfirm: $el.data('btn-download-txt') + backupSize,\n                        });\n                        $('.wpstg--modal--download--logs--wrapper').show();\n                        const $logsContainer = $('.wpstg--modal--process--logs');\n                        that.backups.messages.data.all.forEach((message) => {\n                          const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n                          $logsContainer\n                              .append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`)\n                          ;\n                        });\n                      }, 200);\n                    })\n                ;\n              } else {\n                setTimeout(function() {\n                  createBackup();\n                }, wpstg.delayReq);\n              }\n            },\n            'json',\n            false,\n            0, // Don't retry upon failure\n            1.25,\n        );\n      };\n\n      const $body = $('body');\n\n      $body\n          .off('click', '.wpstg--tab--toggle')\n          .on('click', '.wpstg--tab--toggle', function() {\n            const $this = $(this);\n            const $target = $($this.attr('data-target'));\n            $target.toggle();\n            if ($target.is(':visible')) {\n              $this.find('span').text('');\n            } else {\n              $this.find('span').text('');\n            }\n          })\n          .off('change', '[name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent')\n          .on('change', '[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent', function() {\n            const isExportingAnyDir = $('[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"]:checked').length > 0;\n            const isExportingDatabase = $('input#includeDatabaseInBackup:checked').length === 1;\n            const isExportingOtherFilesInWpContent = $('input#includeOtherFilesInWpContent:checked').length === 1;\n            if (!isExportingAnyDir && !isExportingDatabase && !isExportingOtherFilesInWpContent) {\n              $('.swal2-confirm').prop('disabled', true);\n            } else {\n              $('.swal2-confirm').prop('disabled', false);\n            }\n          })\n      ;\n\n      // Add backup name and notes\n      $('#wpstg--tab--backup')\n          .off('click', '#wpstg-new-backup')\n          .on('click', '#wpstg-new-backup', async function(e) {\n            resetErrors();\n            e.preventDefault();\n            that.backups.isCancelled = false;\n\n            if (!that.backups.modal.create.html || !that.backups.modal.create.confirmBtnTxt) {\n              const $newBackupModal = $('#wpstg--modal--backup--new');\n              const html = $newBackupModal.html();\n              const btnTxt = $newBackupModal.attr('data-confirmButtonText');\n              that.backups.modal.create.html = html || null;\n              that.backups.modal.create.confirmBtnTxt = btnTxt || null;\n              $newBackupModal.remove();\n            }\n\n            const {value: formValues} = await Swal.fire({\n              title: '',\n              html: that.backups.modal.create.html,\n              focusConfirm: false,\n              confirmButtonText: that.backups.modal.create.confirmBtnTxt,\n              showCancelButton: true,\n              preConfirm: () => {\n                const container = Swal.getContainer();\n\n                return {\n                  name: container.querySelector('input[name=\"backup_name\"]').value || null,\n                  isExportingPlugins: container.querySelector('#includePluginsInBackup:checked') !== null,\n                  isExportingMuPlugins: container.querySelector('#includeMuPluginsInBackup:checked') !== null,\n                  isExportingThemes: container.querySelector('#includeThemesInBackup:checked') !== null,\n                  isExportingUploads: container.querySelector('#includeMediaLibraryInBackup:checked') !== null,\n                  isExportingOtherWpContentFiles: container.querySelector('#includeOtherFilesInWpContent:checked') !== null,\n                  isExportingDatabase: container.querySelector('#includeDatabaseInBackup:checked') !== null,\n                };\n              },\n            });\n\n            if (!formValues) {\n              return;\n            }\n\n            that.backups.process({\n              execute: () => {\n                that.backups.messages.reset();\n                prepareBackup(formValues);\n              },\n            });\n          })\n      ;\n    },\n    switchModalToConfigure() {\n      that.backups.modal.import.containerUpload.hide();\n      that.backups.modal.import.containerFilesystem.hide();\n      that.backups.modal.import.containerConfigure.show();\n    },\n    // Edit backups name and notes\n    edit() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg--backup--edit[data-md5]')\n          .on('click', '.wpstg--backup--edit[data-md5]', async function(e) {\n            e.preventDefault();\n\n            const $this = $(this);\n            const name = $this.data('name');\n            const notes = $this.data('notes');\n\n            const {value: formValues} = await Swal.fire({\n              title: '',\n              html: `\n                    <label id=\"wpstg-backup-edit-name\">Backup Name</label>\n                    <input id=\"wpstg-backup-edit-name-input\" class=\"swal2-input\" value=\"${name}\">\n                    <label>Additional Notes</label>\n                    <textarea id=\"wpstg-backup-edit-notes-textarea\" class=\"swal2-textarea\">${notes}</textarea>\n                  `,\n              focusConfirm: false,\n              confirmButtonText: 'Update Backup',\n              showCancelButton: true,\n              preConfirm: () => ({\n                name: document.getElementById('wpstg-backup-edit-name-input').value || null,\n                notes: document.getElementById('wpstg-backup-edit-notes-textarea').value || null,\n              }),\n            });\n\n            if (!formValues) {\n              return;\n            }\n\n            that.ajax(\n                {\n                  action: 'wpstg--backups--edit',\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                  md5: $this.data('md5'),\n                  name: formValues.name,\n                  notes: formValues.notes,\n                },\n                function(response) {\n                  showAjaxFatalError(response, '', 'Submit an error report.');\n                  // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                },\n            );\n          })\n      ;\n    },\n    cancel() {\n      that.backups.timer.stop();\n      that.backups.isCancelled = true;\n      Swal.close();\n      setTimeout(() => that.ajax(\n          {\n            action: 'wpstg--backups--cancel',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            type: that.backups.type,\n          },\n          function(response) {\n            showAjaxFatalError(response, '', 'Submit an error report.');\n          },\n      ), 500);\n    },\n    /**\n     * If process.execute exists, process.data and process.onResponse is not used\n     * process = { data: {}, onResponse: (resp) => {}, onAfterClose: () => {}, execute: () => {}, isShowCancelButton: bool }\n     * @param {object} process\n     */\n    process(process) {\n      if (typeof process.execute !== 'function' && (!process.data || !process.onResponse)) {\n        Swal.close();\n        showError('process.data and / or process.onResponse is not set');\n        return;\n      }\n\n      // TODO move to backend and get the contents as xhr response?\n      if (!that.backups.modal.process.html || !that.backups.modal.process.cancelBtnTxt) {\n        const $modal = $('#wpstg--modal--backup--process');\n        const html = $modal.html();\n        const btnTxt = $modal.attr('data-cancelButtonText');\n        that.backups.modal.process.html = html || null;\n        that.backups.modal.process.cancelBtnTxt = btnTxt || null;\n        $modal.remove();\n      }\n\n      $('body')\n          .off('click', '.wpstg--modal--process--logs--tail')\n          .on('click', '.wpstg--modal--process--logs--tail', function(e) {\n            e.preventDefault();\n            const container = Swal.getContainer();\n            const $logs = $(container).find('.wpstg--modal--process--logs');\n            $logs.toggle();\n            if ($logs.is(':visible')) {\n              container.childNodes[0].style.width = '100%';\n              container.style['z-index'] = 9999;\n            } else {\n              container.childNodes[0].style.width = '600px';\n            }\n          })\n      ;\n\n      process.isShowCancelButton = false !== process.isShowCancelButton;\n\n      that.backups.modal.process.modal = Swal.mixin({\n        customClass: {\n          cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n          content: 'wpstg--process--content',\n        },\n        buttonsStyling: false,\n      }).fire({\n        html: that.backups.modal.process.html,\n        cancelButtonText: that.backups.modal.process.cancelBtnTxt,\n        showCancelButton: process.isShowCancelButton,\n        showConfirmButton: false,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        width: 600,\n        onRender: () => {\n          const _btnCancel = Swal.getContainer().getElementsByClassName('swal2-cancel wpstg--btn--cancel')[0];\n          const btnCancel = _btnCancel.cloneNode(true);\n          _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n\n          btnCancel.addEventListener('click', function(e) {\n            if (confirm('Are You Sure? This will cancel the process!')) {\n              Swal.close();\n            }\n          });\n\n          if (typeof process.execute === 'function') {\n            process.execute();\n            return;\n          }\n\n          if (!process.data || !process.onResponse) {\n            Swal.close();\n            showError('process.data and / or process.onResponse is not set');\n            return;\n          }\n\n          that.ajax(process.data, process.onResponse);\n        },\n        onAfterClose: () => typeof process.onAfterClose === 'function' && process.onAfterClose(),\n        onClose: () => {\n          that.backups.cancel();\n        },\n      });\n    },\n    processResponse(response, useTitle) {\n      if (response === null) {\n        Swal.close();\n        showError('Invalid Response; null');\n        throw new Error(`Invalid Response; ${response}`);\n      }\n\n      const $container = $(Swal.getContainer());\n      const title = () => {\n        if ((response.title || response.statusTitle) && useTitle === true) {\n          $container.find('.wpstg--modal--process--title').text(response.title || response.statusTitle);\n        }\n      };\n      const percentage = () => {\n        if (response.percentage) {\n          $container.find('.wpstg--modal--process--percent').text(response.percentage);\n        }\n      };\n      const logs = () => {\n        if (!response.messages) {\n          return;\n        }\n        const $logsContainer = $container.find('.wpstg--modal--process--logs');\n        const stoppingTypes = [\n          that.backups.messages.ERROR,\n          that.backups.messages.CRITICAL,\n        ];\n        const appendMessage = (message) => {\n          if (Array.isArray(message)) {\n            for (const item of message) {\n              appendMessage(item);\n            }\n            return;\n          }\n          const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n          $logsContainer.append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`);\n\n          if (stoppingTypes.includes(message.type.toLowerCase())) {\n            that.backups.cancel();\n            setTimeout(that.backups.logsModal, 500);\n          }\n        };\n        for (const message of response.messages) {\n          if (!message) {\n            continue;\n          }\n          that.backups.messages.addMessage(message);\n          appendMessage(message);\n        }\n\n        if ($logsContainer.is(':visible')) {\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        }\n\n        if (!that.backups.messages.shouldWarn()) {\n          return;\n        }\n\n        const $btnShowLogs = $container.find('.wpstg--modal--process--logs--tail');\n        $btnShowLogs.html($btnShowLogs.attr('data-txt-bad'));\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--critical-count')\n            .text(that.backups.messages.countByType(that.backups.messages.CRITICAL))\n        ;\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--error-count')\n            .text(that.backups.messages.countByType(that.backups.messages.ERROR))\n        ;\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--warning-count')\n            .text(that.backups.messages.countByType(that.backups.messages.WARNING))\n        ;\n      };\n\n      title();\n      percentage();\n      logs();\n\n      if (response.status === true && response.job_done === true) {\n        that.backups.timer.stop();\n        that.backups.isCancelled = true;\n      }\n    },\n    requestData(notation, data) {\n      const obj = {};\n      const keys = notation.split('.');\n      const lastIndex = keys.length - 1;\n      keys.reduce((accumulated, current, index) => {\n        return accumulated[current] = index >= lastIndex ? data : {};\n      }, obj);\n      return obj;\n    },\n    logsModal() {\n      Swal.fire({\n        html: `<div class=\"wpstg--modal--error--logs\" style=\"display:block\"></div><div class=\"wpstg--modal--process--logs\" style=\"display:block\"></div>`,\n        width: '95%',\n        onRender: () => {\n          const $container = $(Swal.getContainer());\n          $container[0].style['z-index'] = 9999;\n\n          const $logsContainer = $container.find('.wpstg--modal--process--logs');\n          const $errorContainer = $container.find('.wpstg--modal--error--logs');\n          const $translations = $('#wpstg--js--translations');\n          const messages = that.backups.messages;\n          const title = $translations.attr('data-modal-logs-title')\n              .replace('{critical}', messages.countByType(messages.CRITICAL))\n              .replace('{errors}', messages.countByType(messages.ERROR))\n              .replace('{warnings}', messages.countByType(messages.WARNING))\n          ;\n\n          $errorContainer.before(`<h3>${title}</h3>`);\n          const warnings = [\n            that.backups.messages.CRITICAL,\n            that.backups.messages.ERROR,\n            that.backups.messages.WARNING,\n          ];\n\n          if (!that.backups.messages.shouldWarn()) {\n            $errorContainer.hide();\n          }\n\n          for (const message of messages.data.all) {\n            const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n            // TODO RPoC\n            if (warnings.includes(message.type)) {\n              $errorContainer.append(\n                  `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n              );\n            }\n            $logsContainer.append(\n                `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n            );\n          }\n        },\n        onOpen: (container) => {\n          const $logsContainer = $(container).find('.wpstg--modal--process--logs');\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        },\n      });\n    },\n    downloadModal({title = null, titleExport = null, id = null, url = null, btnTxtCancel = 'Cancel', btnTxtConfirm = 'Download'}) {\n      if (null === that.backups.modal.download.html) {\n        const $el = $('#wpstg--modal--backup--download');\n        that.backups.modal.download.html = $el.html();\n        $el.remove();\n      }\n\n      const exportModal = () => Swal.fire({\n        html: `<h2>${titleExport}</h2><span class=\"wpstg-loader\"></span>`,\n        showCancelButton: false,\n        showConfirmButton: false,\n        onRender: () => {\n          that.ajax(\n              {\n                action: 'wpstg--backups--export',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                id,\n              },\n              function(response) {\n                if (!response || !response.success || !response.data || response.data.length < 1) {\n                  return;\n                }\n\n                const a = document.createElement('a');\n                a.style.display = 'none';\n                a.href = response.data;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n\n                Swal.close();\n              },\n          );\n        },\n      });\n\n      Swal.mixin({\n        customClass: {\n          cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n          confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n          actions: 'wpstg--modal--actions',\n        },\n        buttonsStyling: false,\n      })\n          .fire({\n            icon: 'success',\n            html: that.backups.modal.download.html.replace('{title}', title).replace('{btnTxtLog}', 'Show Logs'),\n            cancelButtonText: btnTxtCancel,\n            confirmButtonText: btnTxtConfirm,\n            showCancelButton: true,\n            showConfirmButton: true,\n          })\n          .then((isConfirm) => {\n            if (!isConfirm || !isConfirm.value) {\n              return;\n            }\n\n            if (url && url.length > 0) {\n              window.location.href = url;\n              return;\n            }\n\n            exportModal();\n          })\n      ;\n    },\n    importModal() {\n      const importSiteBackup = (data) => {\n        resetErrors();\n\n        if (that.backups.isCancelled) {\n          // Swal.close();\n          return;\n        }\n\n        that.backups.timer.start();\n\n        const statusStop = () => {\n          clearInterval(that.backups.processInfo.interval);\n          that.backups.processInfo.interval = null;\n        };\n        const status = () => {\n          if (that.backups.processInfo.interval !== null) {\n            return;\n          }\n          that.backups.processInfo.interval = setInterval(() => {\n            if (true === that.backups.isCancelled) {\n              statusStop();\n              return;\n            }\n\n            if (that.backups.status.hasResponse === false) {\n              return;\n            }\n\n            that.backups.status.hasResponse = false;\n            fetch(`${ajaxurl}?action=wpstg--backups--status&process=restore&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n                .then((res) => res.json())\n                .then((res) => {\n                  that.backups.status.hasResponse = true;\n                  if (typeof res === 'undefined') {\n                    statusStop();\n                  }\n\n                  if (that.backups.processInfo.title === res.currentStatusTitle) {\n                    return;\n                  }\n\n                  that.backups.processInfo.title = res.currentStatusTitle;\n                  const $container = $(Swal.getContainer());\n                  $container.find('.wpstg--modal--process--title').text(res.currentStatusTitle);\n                  $container.find('.wpstg--modal--process--percent').text('0');\n                })\n                .catch((e) => {\n                  that.backups.status.hasResponse = true;\n                  showAjaxFatalError(e, '', 'Submit an error report.');\n                })\n            ;\n          }, 5000);\n        };\n\n        WPStaging.ajax(\n            {\n              action: 'wpstg--backups--import',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n            },\n            function(response) {\n              if (typeof response === 'undefined') {\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n                return;\n              }\n\n              that.backups.processResponse(response, true);\n              if (!that.backups.processInfo.interval) {\n                status();\n              }\n\n              if (response.status === false) {\n                importSiteBackup(data);\n              } else if (response.status === true) {\n                $('#wpstg--progress--status').text('Backup successfully imported!');\n                that.backups.type = null;\n                if (that.backups.messages.shouldWarn()) {\n                // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                  that.backups.logsModal();\n                  return;\n                }\n                statusStop();\n                const logEntries = $('.wpstg--modal--process--logs').get(1).innerHTML;\n                const html = '<div class=\"wpstg--modal--process--logs\">' + logEntries + '</div>';\n                const issueFound = html.includes('wpstg--modal--process--msg--warning') || html.includes('wpstg--modal--process--msg--error') ? 'Issues(s) found! ' : '';\n                // var errorMessage = html.includes('wpstg--modal--process--msg--error') ? 'Errors(s) found! ' : '';\n                // var Message = warningMessage + errorMessage;\n\n                // Swal.close();\n                Swal.fire({\n                  icon: 'success',\n                  title: 'Finished',\n                  html: 'System imported from backup. <br/><span class=\"wpstg--modal--process--msg-found\">' + issueFound + '</span><button class=\"wpstg--modal--process--logs--tail\" data-txt-bad=\"\">Show Logs</button><br/>' + html,\n                },\n                );\n\n                // noinspection JSIgnoredPromiseFromCall\n                that.backups.fetchListing();\n              } else {\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n              }\n            },\n            'json',\n            false,\n            0, // Don't retry upon failure\n            1.25,\n        );\n      };\n\n      if (!that.backups.modal.import.html) {\n        const $modal = $('#wpstg--modal--backup--import');\n\n        // Search & Replace Form\n        const $form = $modal.find('.wpstg--modal--backup--import--search-replace--input--container');\n        that.backups.modal.import.searchReplaceForm = $form.html();\n        $form.find('.wpstg--modal--backup--import--search-replace--input-group').remove();\n        $form.html(that.backups.modal.import.searchReplaceForm.replace(/{i}/g, 0));\n\n        that.backups.modal.import.html = $modal.html();\n        that.backups.modal.import.baseDirectory = $modal.attr('data-baseDirectory');\n        that.backups.modal.import.btnTxtNext = $modal.attr('data-nextButtonText');\n        that.backups.modal.import.btnTxtConfirm = $modal.attr('data-confirmButtonText');\n        that.backups.modal.import.btnTxtCancel = $modal.attr('data-cancelButtonText');\n        $modal.remove();\n      }\n\n      that.backups.modal.import.data.search = [];\n      that.backups.modal.import.data.replace = [];\n\n      const $btnConfirm = null;\n      Swal\n          .mixin({\n            customClass: {\n              confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n              cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n              actions: 'wpstg--modal--actions',\n            },\n            buttonsStyling: false,\n          // progressSteps: ['1', '2']\n          })\n          .queue([{\n            html: that.backups.modal.import.html,\n            confirmButtonText: that.backups.modal.import.btnTxtNext,\n            showCancelButton: false,\n            showConfirmButton: true,\n            showLoaderOnConfirm: true,\n            width: 650,\n            onRender() {\n              // $('.wpstg--modal--actions .swal2-confirm').hide();\n\n              // todo: hide this again\n              $('.wpstg--modal--actions .swal2-confirm').show();\n              $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n\n              that.backups.modal.import.containerUpload = $('.wpstg--modal--backup--import--upload');\n              that.backups.modal.import.containerFilesystem = $('.wpstg--modal--backup--import--filesystem');\n              that.backups.modal.import.containerConfigure = $('.wpstg--modal--backup--import--configure');\n            },\n            preConfirm() {\n              const body = new FormData;\n              body.append('accessToken', wpstg.accessToken);\n              body.append('nonce', wpstg.nonce);\n              body.append('filePath', that.backups.modal.import.data.file);\n\n              that.backups.modal.import.data.search.forEach((item, index) => {\n                body.append(`search[${index}]`, item);\n              });\n              that.backups.modal.import.data.replace.forEach((item, index) => {\n                body.append(`replace[${index}]`, item);\n              });\n\n              return fetch(`${ajaxurl}?action=wpstg--backups--import--file-info`, {\n                method: 'POST',\n                body,\n              }).then(handleFetchErrors)\n                  .then((res) => res.json())\n                  .then((html) => {\n                    return Swal.insertQueueStep({\n                      html: html,\n                      confirmButtonText: that.backups.modal.import.btnTxtConfirm,\n                      cancelButtonText: that.backups.modal.import.btnTxtCancel,\n                      showCancelButton: true,\n                    });\n                  })\n                  .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n              ;\n            },\n          }])\n          .then((res) => {\n            if (!res || !res.value || !res.value[1] || res.value[1] !== true) {\n              return;\n            }\n\n            that.backups.isCancelled = false;\n            const data = that.backups.modal.import.data;\n            data['file'] = that.backups.modal.import.baseDirectory + data['file'];\n\n            WPStaging.ajax(\n                {\n                  action: 'wpstg--backups--prepare-import',\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                  wpstgImportData: data,\n                },\n                function(response) {\n                  if (response.success) {\n                    that.backups.process({\n                      execute: () => {\n                        that.backups.messages.reset();\n                        importSiteBackup(data);\n                      },\n                    });\n                  } else {\n                    showAjaxFatalError(response.data, '', 'Submit an error report.');\n                  }\n                },\n                'json',\n                false,\n                0,\n                1.25,\n            );\n          });\n    },\n  };\n\n  window.addEventListener('backupListingFinished', function() {\n    fetch(`${ajaxurl}?action=wpstg--backups--import--file-list&_=${Math.random()}&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}&withTemplate=true`)\n        .then(handleFetchErrors)\n        .then((res) => res.json())\n        .then((res) => {\n          const $ul = $('.wpstg-backup-list ul');\n          $ul.empty();\n          $ul.html(res);\n        })\n        .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n    ;\n  });\n\n  return that;\n})(jQuery);\n\njQuery(document).ready(function() {\n  WPStaging.init();\n  // This is necessary to make WPStaging var accessibile in WP Staging PRO js script\n  window.WPStaging = WPStaging;\n});\n\n/**\n * Report Issue modal\n */\njQuery(document).ready(function($) {\n  $('#wpstg-report-issue-button').on('click', function(e) {\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-backups-report-issue-button', function(e) {\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('#wpstg-report-cancel').on('click', function(e) {\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  /*\n     * Close Success Modal\n     */\n\n  $('body').on('click', '#wpstg-success-button', function(e) {\n    e.preventDefault();\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n  });\n\n  function sendIssueReport(button, forceSend = 'false') {\n    const spinner = button.next();\n    const email = $('.wpstg-report-email').val();\n    const hosting_provider = $('.wpstg-report-hosting-provider').val();\n    const message = $('.wpstg-report-description').val();\n    const syslog = $('.wpstg-report-syslog').is(':checked');\n    const terms = $('.wpstg-report-terms').is(':checked');\n\n    button.attr('disabled', true);\n    spinner.css('visibility', 'visible');\n\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      async: true,\n      data: {\n        'action': 'wpstg_send_report',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'wpstg_email': email,\n        'wpstg_provider': hosting_provider,\n        'wpstg_message': message,\n        'wpstg_syslog': +syslog,\n        'wpstg_terms': +terms,\n        'wpstg_force_send': forceSend,\n      },\n    }).done(function(data) {\n      button.attr('disabled', false);\n      spinner.css('visibility', 'hidden');\n\n      if (data.errors.length > 0) {\n        $('.wpstg-report-issue-form .wpstg-message').remove();\n\n        let errorMessage = $('<div />').addClass('wpstg-message wpstg-error-message');\n        $.each(data.errors, function(key, value) {\n          if (value.status === 'already_submitted') {\n            errorMessage = '';\n            Swal.fire({\n              title: '',\n              customClass: {\n                container: 'wpstg-issue-resubmit-confirmation',\n              },\n              icon: 'warning',\n              html: value.message,\n              showCloseButton: true,\n              showCancelButton: true,\n              focusConfirm: false,\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n            }).then((result) => {\n              if (result.isConfirmed) {\n                sendIssueReport(button, 'true');\n              }\n            });\n          } else {\n            errorMessage.append('<p>' + value + '</p>');\n          }\n        });\n\n        $('.wpstg-report-issue-form').prepend(errorMessage);\n      } else {\n        const successMessage = $('<div />').addClass('wpstg-message wpstg-success-message');\n        successMessage.append('<p>Thanks for submitting your request! You should receive an auto reply mail with your ticket ID immediately for confirmation!<br><br>If you do not get that mail please contact us directly at <strong>support@wp-staging.com</strong></p>');\n\n        $('.wpstg-report-issue-form').html(successMessage);\n        $('.wpstg-success-message').append('<div style=\"float:right;margin-top:10px;\"><a id=\"wpstg-success-button\" href=\"#\">Close</a></div>');\n\n        // Hide message\n        setTimeout(function() {\n          $('.wpstg-report-issue-form').removeClass('wpstg-report-active');\n        }, 2000);\n      }\n    });\n  }\n\n  $('#wpstg-report-submit').on('click', function(e) {\n    const self = $(this);\n    sendIssueReport(self, 'false');\n    e.preventDefault();\n  });\n\n  // Open/close actions drop down menu\n  $(document).on('click', '.wpstg-dropdown>.wpstg-dropdown-toggler', function(e) {\n    e.preventDefault();\n    $(e.target).next('.wpstg-dropdown-menu').toggleClass('shown');\n  });\n\n  // Close action drop down menu if clicked anywhere outside\n  document.addEventListener('click', function(event) {\n    const isClickInside = event.target.closest('.wpstg-dropdown-toggler');\n    if (!isClickInside) {\n      const dropDown = document.getElementsByClassName('wpstg-dropdown-menu');\n      for (let i = 0; i < dropDown.length; i++) {\n        dropDown[i].classList.remove('shown');\n      }\n    }\n  });\n});\n"],"names":["qs","selector","document","querySelector","all","querySelectorAll","addEvent","parent","evt","handler","addEventListener","event","target","matches","closest","slideDown","element","duration","style","display","overflow","height","offsetHeight","transitionProperty","transitionDuration","setTimeout","window","removeProperty","slideUp","getNextSibling","sibling","nextElementSibling","getParents","result","parentElement","push","WpstgCloneStaging","pageWrapperId","wpstgObject","wpstg","pageWrapper","dom","enableButtonId","enableAction","notyf","Notyf","position","x","y","dismissible","types","type","background","icon","init","addEvents","sendRequest","action","fetch","ajaxUrl","method","credentials","body","URLSearchParams","accessToken","nonce","headers","then","response","ok","json","Promise","reject","data","success","location","reload","message","error","i18n","console","warn","WpstgDirectoryNavigation","directoryListingSelector","directoryListingContainer","dirCheckboxSelector","dirExpandSelector","unselectAllDirsSelector","selectDefaultDirsSelector","fetchChildrenAction","currentCheckboxElement","currentParentDiv","currentLoader","existingExcludes","excludedDirectories","isDefaultSelected","log","preventDefault","toggleDirExpand","unselectAll","selectDefault","parseExcludes","previousSibling","getAttribute","dirPath","value","isChecked","checked","forceDefault","setAttribute","dirContainer","createElement","classList","add","innerHTML","JSON","parse","directoryListing","appendChild","alert","getExcludedDirectories","forEach","isParentExcluded","exclude","isExcludeScanned","join","settings","directorySeparator","path","isParentAlreadyExcluded","dir","startsWith","getExtraDirectoriesRootOnly","extraDirectories","extraDirectoriesTextArea","extraCustomDirectories","split","concat","length","WpstgExcludeFilters","excludeFilterContainerSelector","excludeContainer","excludeTableBody","addFileSizeExclude","addFileExtExclude","addFileNameExclude","addDirNameExclude","clearExcludes","removeExclude","addExcludeRuleRow","templateName","excludeRowTemplate","clone","content","cloneNode","excludeRow","e","removeChild","trim","getExcludeFilters","globExcludes","sizeExcludes","sizeCompares","sizeSizes","sizeByte","Object","entries","key","sizeInput","extensionInputs","ext","cleanStringForGlob","fileNamesPos","fileNames","fileInput","fileName","dirNamesPos","dirNames","dirInput","dirName","filter","onlyUnique","index","self","indexOf","replace","WpstgModal","confirmAction","show","swalOptions","additionalParams","callback","Swal","fire","triggerConfirmAction","assign","WpstgResetModal","cloneID","workflowSelector","fetchExcludeSettingsAction","modalErrorAction","workflow","resetButtonClass","resetModalContainerClass","resetTabSelector","directoryNavigator","excludeFilters","isAllTablesChecked","resetModalContainer","toggleContent","selectDefaultTables","toggleTableSelection","toggleDirectoryNavigation","updateDirectorySelection","contentId","tabTriangle","isCollapsed","contains","transform","remove","showModal","swalPromise","loadModal","fetchCloneExcludes","title","html","getAjaxLoader","width","focusConfirm","customClass","confirmButton","container","confirmButtonText","resetClone","showCancelButton","job","errorModal","modal","renderError","getDirectoryNavigator","wpstgIcon","cbElement","subDirectories","parElem","i","children","options","multisitePattern","tblprefix","singleSitePattern","option","name","isMultisite","match","removeAttribute","WPStaging","$","that","isCancelled","isFinished","getLogs","time","executionTime","progressBar","cloneExcludeFilters","cache","elements","ajaxSpinner","get","inArray","jQuery","refresh","showError","css","text","removeClass","hide","warnIfClosingDuringProcess","returnValue","isEmpty","obj","prop","hasOwnProperty","showAjaxFatalError","prependMessage","appendMessage","removeEventListener","handleFetchErrors","status","statusText","resetErrors","slugify","url","toString","toLowerCase","normalize","$workFlow","isAllChecked","urlSpinner","ajaxurl","timer","devicePixelRatio","on","each","attr","$this","siblings","slideToggle","$directory","parents","find","addClass","getElementById","clearInterval","ajax","removeAttr","slug","$targetDir","$targetUri","uri","val","validateTargetHost","after","cloneActions","the_domain","reg","test","confirm","append","cancelCloning","startCloning","cancelCloningUpdate","restart","$existingClones","animate","scrollTop","offset","top","deleteClone","jsonResponse","tryParseJson","showErrorModal","checkDiskSpace","switchStep","resetModal","promise","dirNavigator","exclFilters","includedTables","getIncludedTables","excludeSizeRules","encodeURIComponent","sizes","excludeGlobRules","globs","dataType","showErrors","tryCount","incrementRatio","retryLimit","retryTimeout","parseInt","isNaN","Date","now","xhr","textStatus","errorThrown","errorCode","statusCode","stepButtons","focus","onlyUpdateMessage","is","verifyExternalDatabase","proceedCloning","loadOverview","getExcludedTables","excludedTables","databaseUser","databasePassword","databaseServer","databaseDatabase","error_type","render","checks","production","staging","getCloningData","getTime","rules","databasePrefix","cloneDir","cloneHostname","emailsAllowed","uploadsSymlinked","cleanPluginsThemes","cleanUploadsDir","sendCloningAjax","object","excludeOptions","tabs","$section","toggleClass","hasClass","deleteDir","logscroll","$div","scrollHeight","constructor","Array","date","usedspace","mainTabs","$wrapper","$menuItems","$contents","not","backups","dispatchEvent","Event","isLoading","convertSeconds","setInterval","seconds","setSeconds","toISOString","substr","start","processing","delayReq","last_msg","job_done","finish","$link1","$link","msg","cloneResetComplete","cloneUpdateComplete","percentage","toFixed","step","processInfo","interval","create","confirmBtnTxt","process","cancelBtnTxt","download","btnTxtNext","btnTxtConfirm","btnTxtCancel","searchReplaceForm","file","containerUpload","containerFilesystem","setFile","upload","toUnit","bytes","Math","floor","pow","size","baseDirectory","search","messages","WARNING","ERROR","INFO","DEBUG","CRITICAL","info","critical","warning","debug","shouldWarn","countByType","addMessage","isArray","item","reset","totalSeconds","prettify","stop","reader","iop","uploadInfo","isShow","$containerUpload","$containerUploader","FileReader","sendChunk","startsAt","isReset","endsAt","blob","slice","onloadend","readyState","DONE","FormData","res","writtenBytes","percent","switchModalToConfigure","readAsDataURL","hasResponse","reTryAfter","edit","fetchListing","href","downloadModal","titleExport","id","importModal","off","$parent","$container","getContainer","total","trigger","$containerFilesystem","random","$ul","empty","noImportFileFound","selectFileToImport","fullPath","backupName","dateCreatedFormatted","isExportingDatabase","isExportingPlugins","isExportingMuPlugins","isExportingThemes","isExportingUploads","isExportingOtherWpContentFiles","files","stopPropagation","originalEvent","dataTransfer","filepath","databaseChecked","mediaLibraryChecked","isResetErrors","md5","prepareBackup","wpstgExportData","createBackup","statusStop","currentStatusTitle","processResponse","logsModal","close","backupMd5","$el","timesWaited","intervalWaitForBackupInDom","backupSize","$logsContainer","msgClass","$body","$target","toggle","isExportingAnyDir","isExportingOtherFilesInWpContent","$newBackupModal","btnTxt","preConfirm","formValues","execute","containerConfigure","notes","cancel","onResponse","$modal","$logs","childNodes","isShowCancelButton","mixin","cancelButton","buttonsStyling","cancelButtonText","showConfirmButton","allowOutsideClick","allowEscapeKey","onRender","_btnCancel","getElementsByClassName","btnCancel","parentNode","replaceChild","onAfterClose","onClose","useTitle","Error","statusTitle","logs","stoppingTypes","includes","$btnShowLogs","requestData","notation","keys","lastIndex","reduce","accumulated","current","$errorContainer","$translations","before","warnings","onOpen","exportModal","a","click","actions","isConfirm","importSiteBackup","logEntries","issueFound","$form","queue","showLoaderOnConfirm","insertQueueStep","wpstgImportData","ready","sendIssueReport","button","forceSend","spinner","next","email","hosting_provider","syslog","terms","async","done","errors","errorMessage","showCloseButton","isConfirmed","prepend","successMessage","isClickInside","dropDown"],"mappings":"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"}