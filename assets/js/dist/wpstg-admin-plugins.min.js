!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function t(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}new(function(){function e(){var e=this;this.wpstgDeactivateLink=null,this.wpstgDeactivateLinkUrl=null,document.addEventListener("DOMContentLoaded",(function(){e.init()}))}var n=e.prototype;return n.init=function(){var e=this;this.wpstgDeactivateLink=document.querySelector('.wp-admin.plugins-php tr[data-slug="wp-staging"] .row-actions .deactivate a'),this.wpstgDeactivateLink&&(this.wpstgDeactivateLinkUrl=this.wpstgDeactivateLink.getAttribute("href"),this.wpstgDeactivateLink.addEventListener("click",(function(t){e.handleDeactivateClick(t)})),document.querySelectorAll('#wpstg-feedback-content input[type="checkbox"]').forEach((function(t){t.addEventListener("click",(function(){e.toggleTextField(t)}))})),document.querySelector("#wpstg-feedback-submit").addEventListener("click",(function(){e.handleButtonClick()})),document.querySelector("#wpstg-skip-and-deactivate").addEventListener("click",(function(){e.handleButtonClick("skip")})),document.querySelector(".wpstg-close-feedback-form").addEventListener("click",(function(){e.closeFeedbackForm()})))},n.handleDeactivateClick=function(e){e.preventDefault(),void 0===this.wpstgAdminGetCookie("wpstg_hide_feedback")?document.getElementById("wpstg-feedback-overlay").style.display="flex":window.location.href=this.wpstgDeactivateLinkUrl},n.toggleTextField=function(e){var t=e.checked,n=e.parentNode.parentNode.nextElementSibling;if(n){var o=n.querySelector('input[type="text"], textarea');o&&(o.style.display=t?"block":"none")}},n.handleButtonClick=function(e){var t=this;void 0===e&&(e="submit");var n=new Date;if(n.setSeconds(n.getSeconds()+2592e3),document.cookie="wpstg_hide_feedback=1; expires="+n.toUTCString()+"; path=/",document.getElementById("wpstg-feedback-overlay").style.display="none","submit"===e){var o=document.querySelector("#wpstg-feedback-content form"),i=new FormData(o);fetch(ajaxurl,{method:"POST",body:new URLSearchParams({action:"wpstg_send_feedback",nonce:wpstg.nonce,data:new URLSearchParams(i).toString()}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){if(!e.ok)throw new Error("Network response was not ok.");document.getElementById("wpstg-feedback-overlay").remove(),window.location.href=t.wpstgDeactivateLinkUrl})).catch((function(e){console.error("Error occurred while sending feedback:",e)}))}else document.getElementById("wpstg-feedback-overlay").remove(),window.location.href=this.wpstgDeactivateLinkUrl},n.closeFeedbackForm=function(){document.getElementById("wpstg-feedback-overlay").style.display="none"},n.wpstgAdminGetCookie=function(e){for(var n,o=t(document.cookie.split(";"));!(n=o()).done;){var i=n.value.split("="),r=i[0],a=i[1];if((r=r.trim())===e)return decodeURIComponent(a.trim())}},e}())}();
