{"version":3,"file":"wpstg.min.js","sources":["../src/modules/wpstg-hover-intent.js","../src/modules/wpstg-detect-memory-exhaust.js","../src/wpstg.js"],"sourcesContent":["'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","/**\n * Detect memory exhaustion and show warning.\n */\nexport default class WpstgDetectMemoryExhaust {\n  constructor(\n      wpstgObject = wpstg,\n  ) {\n    this.wpstgObject = wpstgObject;\n  }\n\n  async sendRequest(requestType) {\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: 'wpstg--detect-memory-exhaust',\n          requestType: requestType,\n          accessToken: this.wpstgObject.accessToken,\n          nonce: this.wpstgObject.nonce,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      const data = await response.json();\n\n      if ('undefined' !== typeof (data.status) && data.status && data.error) {\n        return data;\n      }\n\n      console.warn(data.message);\n    } catch (error) {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    }\n\n    return false;\n  }\n}\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\nimport WpstgDetectMemoryExhaust from './modules/wpstg-detect-memory-exhaust.js';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    retry: {\n      currentDelay: 0,\n      count: 0,\n      max: 10,\n      retryOnErrors: [401, 403, 404, 429, 502, 503, 504],\n      performingRequest: false,\n      incrementRetry: function(incrementRatio = 1.25) {\n        WPStagingCommon.retry.performingRequest = true;\n        if (WPStagingCommon.retry.currentDelay === 0) {\n          // start with a delay of 1sec\n          WPStagingCommon.retry.currentDelay = 1000;\n          WPStagingCommon.retry.count = 1;\n        }\n\n        WPStagingCommon.retry.currentDelay += (500 * WPStagingCommon.retry.count * incrementRatio);\n        WPStagingCommon.retry.count++;\n      },\n      canRetry: function() {\n        return WPStagingCommon.retry.count < WPStagingCommon.retry.max;\n      },\n      reset: function() {\n        WPStagingCommon.retry.currentDelay = 0;\n        WPStagingCommon.retry.count = 0;\n        WPStagingCommon.retry.performingRequest = false;\n      },\n    },\n    memoryExhaustArticleLink: 'https://wp-staging.com/docs/php-fatal-error-allowed-memory-size-of-134217728-bytes-exhausted/',\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    async checkMemoryExhaustion(requestType) {\n      const detectMemoryExhaust = new WpstgDetectMemoryExhaust();\n      const response = await detectMemoryExhaust.sendRequest(requestType);\n\n      if (!response) {\n        return false;\n      }\n\n      return response;\n\n      response.messages = [{\n        'type': 'critical',\n        'date': result.data['time'],\n        'message': result.message + '. Read <a target=\"_blank\" href=\"' + WPStagingCommon.memoryExhaustArticleLink + '\">this article</a> for solving this issue. Please contact WP Staging support if you need further assistance.',\n      }];\n\n      WPStagingBackup.processResponse(response);\n\n      return true;\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup wpstg-centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If an attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overwrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      // If retry request no need to show Error;\n      if (WPStagingCommon.retry.performingRequest) {\n        return;\n      }\n\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n"],"names":["wpstgHoverIntent","parent","selector","onOver","onOut","x","y","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","e","clientX","clientY","compare","el","clearTimeout","Math","abs","undefined","setTimeout","dispatchOver","removeEventListener","addEventListener","this","onMouseOver","event","target","matches","closest","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","Object","assign","remove","$","WPStagingCommon","WpstgDetectMemoryExhaust","wpstgObject","wpstg","prototype","sendRequest","_sendRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestType","response","data","wrap","_context","prev","next","fetch","ajaxUrl","method","credentials","body","URLSearchParams","action","accessToken","nonce","headers","sent","json","status","error","abrupt","console","warn","message","t0","i18n","stop","_x","apply","arguments","jQuery","continueErrorHandle","retry","currentDelay","count","max","retryOnErrors","performingRequest","incrementRetry","incrementRatio","canRetry","reset","memoryExhaustArticleLink","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","checkMemoryExhaustion","detectMemoryExhaust","listenTooltip","document","querySelector","style","visibility","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","icon","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","hasOwnProperty","success","Array","length","shift","isLoading","show","hide","slugify","url","toString","toLowerCase","normalize","replace","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","ok","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","type","xhr","textStatus","errorThrown","log","errorCode","statusCode"],"mappings":"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"}