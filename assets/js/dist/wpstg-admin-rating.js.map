{"version":3,"file":"wpstg-admin-rating.js","sources":["../src/wpstg-admin-rating.js"],"sourcesContent":["let wpstgTimesWaited = 0;\n\n/*\nLet's wait for jQuery to be available to show the rating.\nWe need it to dispatch AJAX requests.\n */\nvar wpstgWaitForJQuery = setInterval(function() {\n  if (wpstgTimesWaited > 100) {\n    // Give up waiting.\n    clearInterval(wpstgWaitForJQuery);\n  }\n  if (typeof jQuery != 'undefined') {\n    wpstgRegisterRatingEvents();\n\n    clearInterval(wpstgWaitForJQuery);\n  }\n  wpstgTimesWaited = wpstgTimesWaited + 1;\n}, 100);\n\nfunction wpstgRegisterRatingEvents() {\n  // Show the rating once jQuery is loaded.\n  jQuery('.wpstg_fivestar').show();\n\n  /**\n     * Dispatch the request to hide the notice after user clicks to rate the plugin.\n     */\n  jQuery(document).on('click', '#wpstg_clicked_deserved_it', function(e) {\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: {action: 'wpstg_hide_rating', nonce: wpstg.nonce},\n      error: function(xhr, textStatus, errorThrown) {\n        console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n        console.log(textStatus);\n\n        alert(\n            'Unknown error. Please get in contact with us to solve it support@wp-staging.com',\n        );\n      },\n      success: function(data) {\n        jQuery('.wpstg_fivestar').slideUp('fast');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          alert('Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com');\n        },\n        500: function() {\n          alert('Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com');\n        },\n      },\n    });\n  });\n\n  jQuery('.wpstg_hide_rating').on('click', function(e) {\n    e.preventDefault();\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: {action: 'wpstg_hide_rating', nonce: wpstg.nonce},\n      error: function(xhr, textStatus, errorThrown) {\n        console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n        console.log(textStatus);\n\n        alert(\n            'Unknown error. Please get in contact with us to solve it support@wp-staging.com',\n        );\n      },\n      success: function(data) {\n        jQuery('.wpstg_fivestar').slideUp('fast');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          alert('Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com');\n        },\n        500: function() {\n          alert('Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com');\n        },\n      },\n    });\n  });\n\n  jQuery('.wpstg_rate_later').on('click', function(e) {\n    e.preventDefault();\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: {action: 'wpstg_hide_later', nonce: wpstg.nonce},\n      error: function(xhr, textStatus, errorThrown) {\n        console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n        console.log(textStatus);\n\n        alert(\n            'Unknown error. Please get in contact with us to solve it support@wp-staging.com',\n        );\n      },\n      success: function(data) {\n        jQuery('.wpstg_fivestar').slideUp('fast');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          alert('Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com');\n        },\n        500: function() {\n          alert('Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com');\n        },\n      },\n    });\n  });\n}\n\ndocument.styleSheets[0].insertRule('@media only screen and (max-width:600px){.wpstg-welcome-box{display:block !important}.wpstg-welcome-text{padding-left:8px !important}}', '');\n"],"names":["wpstgTimesWaited","wpstgWaitForJQuery","setInterval","clearInterval","jQuery","wpstgRegisterRatingEvents","show","document","on","e","ajax","url","ajaxurl","type","data","action","nonce","wpstg","error","xhr","textStatus","errorThrown","console","log","status","statusText","alert","success","slideUp","statusCode","_","preventDefault","styleSheets","insertRule"],"mappings":"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"}